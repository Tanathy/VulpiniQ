const Q=function(){"use strict";let t=function(e){if(!(this instanceof t))return new t(e);"string"==typeof e?this.elements=document.querySelectorAll(e):e instanceof HTMLElement&&(this.elements=[e])};return t.create=function(e,n,i){let r=document.createElement(e);for(let o in n)"class"===o?n[o].split(" ").forEach(t=>r.classList.add(t)):r.setAttribute(o,n[o]);return Array.isArray(i)&&i.forEach(t=>{r[t]=!0}),new t(r)},t.register=function(e,n,i){i||(i=n,n=e,e="Q");let r="Q"===e?t.prototype:t[e]&&t[e].prototype;r||console.error(`Unknown plugin type: ${e}`),r[n]&&console.error(`Plugin ${n} already exists on ${e}.prototype`),r[n]=i},t.prototype.parseJSON=function(t,e,n={modify:!1,recursive:!1}){let{modify:i,recursive:r}=n,o=t=>{if("object"==typeof t&&null!==t&&!Array.isArray(t)){for(let n in t)if(t.hasOwnProperty(n)){let s=e(n,t[n]);i&&(t[n]=s),r&&"object"==typeof t[n]&&null!==t[n]&&o(t[n])}}};return o(t),t},t.prototype.JSONKeys=function(t){let e=[];return this.parseJSON(t,t=>{e.push(t)}),e},t.prototype.each=function(t){return Array.prototype.forEach.call(this.elements,(e,n)=>{t.call(e,n,e)}),this},t.prototype.text=function(t){return void 0===t?this.elements.length>0?this.elements[0].textContent:null:this.each(function(){this.textContent=t})},t.prototype.html=function(e){return void 0===e?this.elements.length>0?this.elements[0].innerHTML:null:this.each(function(){"string"==typeof e?this.innerHTML=e:e instanceof HTMLElement?(this.innerHTML="",this.append(e)):e instanceof t?(this.innerHTML="",e.each(t=>this.append(t))):(e instanceof NodeList||Array.isArray(e))&&(this.innerHTML="",Array.prototype.forEach.call(e,t=>this.append(t)))})},t.prototype.addClass=function(t){return this.each(function(){this.classList.add(t)})},t.prototype.removeClass=function(t){return this.each(function(){this.classList.remove(t)})},t.prototype.toggleClass=function(t){return this.each(function(){this.classList.toggle(t)})},t.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)})},t.prototype.off=function(t,e){return this.each(function(){this.removeEventListener(t,e)})},t.prototype.val=function(t){return void 0===t?this.elements.length>0?this.elements[0].value:null:this.each(function(){this.value=t})},t.prototype.data=function(t,e){return void 0===e?this.elements.length>0?this.elements[0].dataset[t]:null:this.each(function(){this.dataset[t]=e})},t.prototype.removeData=function(t){return this.each(function(){delete this.dataset[t]})},t.prototype.width=function(t){return void 0===t?this.elements.length>0?this.elements[0].clientWidth:null:this.each(function(){this.style.width="number"==typeof t?`${t}px`:t})},t.prototype.css=function(t,e){return void 0===e?this.elements.length>0?getComputedStyle(this.elements[0])[t]:null:this.each(function(){this.style[t]=e})},t.prototype.attr=function(t,e){return void 0===e?this.elements.length>0?this.elements[0].getAttribute(t):null:this.each(function(){this.setAttribute(t,e)})},t.prototype.removeAttr=function(t){return this.each(function(){this.removeAttribute(t)})},t.prototype.append=function(...e){return this.each(function(){e.forEach(e=>{"string"==typeof e?this.insertAdjacentHTML("beforeend",e):e instanceof t?e.each(t=>this.appendChild(t)):e instanceof HTMLElement?this.appendChild(e):(e instanceof NodeList||Array.isArray(e))&&Array.prototype.forEach.call(e,t=>this.appendChild(t))})})},t.prototype.prepend=function(...e){return this.each(function(){e.reverse().forEach(e=>{"string"==typeof e?this.insertAdjacentHTML("afterbegin",e):e instanceof t?e.each(t=>this.insertBefore(t,this.firstChild)):e instanceof HTMLElement?this.insertBefore(e,this.firstChild):(e instanceof NodeList||Array.isArray(e))&&(Array.prototype.reverse.call(e),Array.prototype.forEach.call(e,t=>this.insertBefore(t,this.firstChild)))})})},t.prototype.remove=function(){return this.each(function(){this.parentNode.removeChild(this)})},t.prototype.empty=function(){return this.each(function(){this.innerHTML=""})},t.prototype.show=function(){return this.each(function(){this.style.display=""})},t.prototype.hide=function(){return this.each(function(){this.style.display="none"})},t.prototype.toggle=function(){return this.each(function(){this.style.display="none"===this.style.display?"":"none"})},t.prototype.fadeIn=function(t=400,e){return this.each(function(){this.style.display="",this.style.transition=`opacity ${t}ms`,this.style.opacity=1,setTimeout(()=>{this.style.transition="","function"==typeof e&&e()},t)})},t.prototype.fadeOut=function(t=400,e){return this.each(function(){this.style.transition=`opacity ${t}ms`,this.style.opacity=0,setTimeout(()=>{this.style.transition="",this.style.display="none","function"==typeof e&&e()},t)})},t.prototype.fadeToggle=function(t=400,e){return this.each(function(){"0"===this.style.opacity?this.fadeIn(t,e):this.fadeOut(t,e)})},t.prototype.parent=function(){return new t(this.elements[0].parentNode)},t.prototype.children=function(){return new t(this.elements[0].children)},t.prototype.find=function(e){return new t(this.elements[0].querySelectorAll(e))},t.prototype.closest=function(e){let n=this.elements[0];for(;n;){if(n.matches(e))return new t(n);n=n.parentElement}return null},t.prototype.first=function(){return new t(this.elements[0])},t.prototype.last=function(){return new t(this.elements[this.elements.length-1])},t.prototype.eq=function(e){return new t(this.elements[e])},t.prototype.index=function(t){return void 0===t?Array.prototype.indexOf.call(this.elements,this.elements[0]):(t>=0&&t<this.elements.length&&this.elements.unshift(this.elements.splice(t,1)[0]),this)},t.fetch=function(t,e,n={}){let{method:i="GET",headers:r={},body:o=null,contentType:s="application/json",responseType:l="json",credentials:h="same-origin",mode:c="cors",cache:p="default",redirect:u="follow",referrerPolicy:a="no-referrer"}=n;r["Content-Type"]||(r["Content-Type"]=s),fetch(t,{method:i,headers:r,body:o,credentials:h,mode:c,cache:p,redirect:u,referrerPolicy:a}).then(t=>{if(!t.ok)throw Error("Network response was not ok");switch(l){case"json":return t.json();case"text":return t.text();case"blob":return t.blob();case"arrayBuffer":return t.arrayBuffer();default:throw Error("Unsupported response type")}}).then(t=>e(null,t)).catch(t=>e(t,null))},t.socket=function(t,e,n,i={}){let{retries:r=5,delay:o=1e3,protocols:s=[]}=i,l,h=0,c=()=>{if(h>r){n&&n("Max retries exceeded");return}(l=new WebSocket(t,s)).onopen=()=>{h=0,n&&n("connected")},l.onmessage=t=>{e&&e(t.data)},l.onerror=t=>{n&&n("error",t)},l.onclose=()=>{h++,n&&n("closed"),setTimeout(c,o)}};return c(),{send(t){l&&l.readyState===WebSocket.OPEN&&l.send(t)},reconnect(){l.close(),c()},close(){l&&(l.readyState===WebSocket.OPEN||l.readyState===WebSocket.CONNECTING)&&l.close()}}},t.style=function(t,e){let n=document.getElementById("qlib-styles");n||((n=document.createElement("style")).id="qlib-styles",document.head.appendChild(n));let i=n.sheet,r=i.cssRules||i.rules,o=-1;for(let s=0;s<r.length;s++)if(r[s].selectorText===t){o=s;break}let l=Object.entries(e).map(([t,e])=>`${t}: ${e};`).join(" ");-1===o?i.insertRule(`${t} { ${l} }`,r.length):(i.deleteRule(o),i.insertRule(`${t} { ${l} }`,o))},t.removeStyle=function(){let t=document.getElementById("qlib-styles");t&&t.parentNode.removeChild(t)},t.String=function(t){this.string=t},t.String.prototype.capitalize=function(){return this.string.charAt(0).toUpperCase()+this.string.slice(1)},t.String.prototype.levenshtein=function(t){let e=this.string,n=e.length,i=t.length,r=Array.from({length:n+1},()=>Array(i+1).fill(0));for(let o=0;o<=n;o++)r[o][0]=o;for(let s=0;s<=i;s++)r[0][s]=s;for(let l=1;l<=n;l++)for(let h=1;h<=i;h++)e[l-1]===t[h-1]?r[l][h]=r[l-1][h-1]:r[l][h]=Math.min(r[l-1][h-1],r[l-1][h],r[l][h-1])+1;return r[n][i]},t.String.prototype.replaceAll=function(t,e){return this.string.split(t).join(e)},t.String.prototype.find=function(t){return this.string.match(t)},t.String.prototype.words=function(t){let e=this.string.match(/\b\w+\b/g);return t&&e.forEach(t),e},t.String.prototype.lower=function(){return this.string.toLowerCase()},t.String.prototype.upper=function(){return this.string.toUpperCase()},t.String.prototype.highlight=function(e){let n=this.string;return e.forEach(t=>{let e=RegExp(`(${t})`,"gi");n=n.replace(e,'<span class="highlight">$1</span>')}),t(n)},t.String.prototype.unique=function(){let t=this.string.match(/\b\w+\b/g),e=new Set(t);return e.size},t.String.prototype.shuffle=function(t="words"){let e=t=>t.sort(()=>Math.random()-.5);if("words"===t){let n=this.string.split(" ");return e(n).join(" ")}{let i=this.string.split("");return e(i).join("")}},t.String.prototype.longest=function(){let t=this.string.match(/\b\w+\b/g);return t.reduce((t,e)=>e.length>t.length?e:t,"")},t.String.prototype.shortest=function(){let t=this.string.match(/\b\w+\b/g);return t.reduce((t,e)=>e.length<t.length?e:t,t[0])},t.String.prototype.asc=function(){let t=this.string.match(/\b\w+\b/g);return t.sort().join(" ")},t.String.prototype.desc=function(){let t=this.string.match(/\b\w+\b/g);return t.sort().reverse().join(" ")},t.String.prototype.count=function(t){let e=this.string.match(/\b\w+\b/g);return e.filter(e=>e===t).length},t.String.prototype.has=function(t){let e=this.string.match(/\b\w+\b/g);return e.includes(t)},t.String.prototype.palindrome=function(){let t=this.string.toLowerCase().replace(/[\W_]/g,"");return t===t.split("").reverse().join("")},t.String.prototype.anagram=function(t){let e=this.string.toLowerCase().replace(/[\W_]/g,"");return t=t.toLowerCase().replace(/[\W_]/g,""),e.split("").sort().join("")===t.split("").sort().join("")},t.Ready=function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t,{once:!0})},t.Resize=function(t){window.addEventListener("resize",function(){t(window.innerWidth,window.innerHeight)})},t.Unload=function(t){window.addEventListener("beforeunload",t)},t}();