<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VulpiniQ</title>
    <link rel="stylesheet" href="builder.css">
<style>* { margin: 0; padding: 0; box-sizing: border-box; /* outline: 1px solid rgba(255, 255, 255, 0.2); */}body { font-family: 'Arial', sans-serif; background-color: #0e0e0e; color: #a3a3a3; line-height: 1.6; font-size: 12px;}::-webkit-scrollbar { width: 8px; height: 8px;}::-webkit-scrollbar-track { background: #2e2e2e;}::-webkit-scrollbar-thumb { background: #555; border-radius: 4px;}::-webkit-scrollbar-thumb:hover { background: #777;}.container{ display: flex;}.left_side{width: 50%;background-color: #0000003d;border-right: 1px solid #ffffff15;}.right_side{ flex-shrink: 0; width: 50%;padding-left:5px}.tab_header{display:flex;}.tab{padding: 5px 15px;cursor: pointer;}.tab.active{background: rgba(255, 255, 255, 0.2);color: #c4c4c4;}.tab_container{overflow-x: hidden;height: calc(100vh - 30px);padding: 0 5px;}.tags{display: flex;flex-wrap: wrap;}.tag{ padding: 0px 9px; margin: 3px; background: #333; border-radius: 5px; cursor: default;}.block{ cursor: default;padding:10px; background: #ffffff09; border-radius: 10px; /* outline: 1px solid #ffffff10; */ width: 100%;}.block.active { background: #ffffff18;}.block_example{ padding: 8px; background: #00000033; border-radius: 12px; width: 100%; margin-top: 10px;}.block_example pre { background: #181818; color: #a3a3a3; border-radius: 8px; padding: 10px; margin: 8px 0 0 0; font-family: 'Fira Mono', 'Consolas', 'Menlo', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre-wrap; word-break: break-word; line-height: 1.6;}.code_content{ display: grid; grid-template-columns: repeat(2, 1fr); /* Create 3 equal columns */ gap: 10px; /* Add gap between grid items */}.block_dependencies{ margin-top: 10px;}.block_title{ font-size: 16px; font-weight: bold; margin-bottom: 20px;}.code_category_title{ font-size: 20px; font-weight: bold; margin: 15px 0}.code_category{margin-bottom: 40px;}.codeData{ padding: 10px; background: #00000033; border-radius: 12px; width: calc(100% - 10px); height: 200px; margin-top: 10px; color: #a3a3a3; text-align: justify; border: 1px solid #ffffff10; box-sizing: border-box; margin: 5px; resize: vertical; max-height: 400px;}.codeData:focus{ outline: none;}.footer{display:flex;}.sizedata{ margin: 0 20px; display: flex; align-items: center;}.btn { padding: 5px 10px; background: #333; color: #a3a3a3; border: none; border-radius: 5px; cursor: pointer;}.tab_content{ display: none;}.tab_content.active{ display: block;}.bracket { color: #d4d4d4; /* VSCode: Default foreground */}.bracket_inner { color: #b5cea8; /* VSCode: Bracket pair color */}.class,.object { color: #4ec9b0; /* VSCode: class name */ font-weight: normal;}.keyword { color: #569cd6; /* VSCode: keyword */}.operator { color: #d4d4d4; /* VSCode: operator */}.method { color: #dcdcaa; /* VSCode: function/method */}.string { color: #ce9178; /* VSCode: string */ font-weight: normal;}.number { color: #b5cea8; /* VSCode: number */}.comment { color: #6a9955 !important; /* VSCode: comment */ font-style: italic;}.variable { color: #9cdcfe; /* VSCode: variable */}</style>
<script>
var DATA = {
    "base": "const Q = (() => {\n    'use strict';\n    const _ob = Object, _ar = Array, _ma = Math, _da = Date, _re = RegExp,\n        _st = setTimeout, _un = undefined, _n = null, _nl = NodeList,\n        _el = Element, _si = setInterval, _c = console, _ct = clearTimeout,\n        _ci = clearInterval, _pr = Promise, _str = String, _nu = Number,\n        _bo = Boolean, _json = JSON, _map = Map, _set = Set, _sym = Symbol,\n        _win = window, _doc = document, _loc = location, _hist = history,\n        _ls = localStorage, _ss = sessionStorage, _f = fetch, _ev = Event,\n        _ac = AbortController, _as = AbortSignal, _err = Error;\n    let GLOBAL = {};\n    let styleData = {\n        elements: [],\n        root: '',\n        generic: \"\",\n        responsive: {},\n        element: _n,\n        init: false\n    };\n    function applyStyles() {\n        if (!styleData.init) {\n            styleData.element = document.getElementById('qlib_set') || createStyleElement();\n            styleData.init = true;\n        }\n        let finalStyles = styleData.root ? `:root {${styleData.root}}\\n` : '';\n        finalStyles += styleData.generic;\n        const breakpoints = _ob.keys(styleData.responsive);\n        for (let i = 0; i < breakpoints.length; i++) {\n            const size = breakpoints[i];\n            const css = styleData.responsive[size];\n            if (css) {\n                finalStyles += `\\n@media (max-width: ${size}) {\\n${css}\\n}`;\n            }\n        }\n        styleData.element.textContent = finalStyles;\n    }\n    function createStyleElement() {\n        const styleElement = document.createElement('style');\n        styleElement.id = 'qlib_set';\n        document.head.insertBefore(styleElement, document.head.firstChild);\n        return styleElement;\n    }\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n        applyStyles();\n    } else {\n        window.addEventListener('load', applyStyles, { once: true });\n    }\n    function Q(identifier, attributes, props) {\n        if (!(this instanceof Q)) return new Q(identifier, attributes, props);\n        if (identifier && identifier.nodeType) {\n            this.nodes = [identifier];\n            return;\n        }\n        if (identifier instanceof Q) {\n            this.nodes = identifier.nodes;\n            return;\n        }\n        if (identifier?.constructor === _nl) {\n            this.nodes = _ar.from(identifier);\n            return;\n        }\n        if (typeof identifier === 'string') {\n            const isCreating = attributes || identifier.indexOf('<') > -1;\n            if (isCreating) {\n                const svgTags = ['svg','g','line','polyline','rect','circle','ellipse','text','path','polygon'];\n                const tagMatch = identifier.match(/^<([a-zA-Z0-9\\-]+)(\\s|>|\\/)*/);\n                const tag = tagMatch ? tagMatch[1].toLowerCase() : null;\n                if (tag && svgTags.includes(tag)) {\n                    const el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n                    if (attributes) {\n                        for (const [k, v] of Object.entries(attributes)) {\n                            if (k === 'children' && Array.isArray(v)) {\n                                v.forEach(child => {\n                                    if (child instanceof Node) {\n                                        el.appendChild(child);\n                                    } else if (child instanceof Q) {\n                                        child.nodes.forEach(n => el.appendChild(n));\n                                    } else if (typeof child === 'string') {\n                                        const temp = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                                        temp.innerHTML = child;\n                                        Array.from(temp.childNodes).forEach(n => el.appendChild(n));\n                                    }\n                                });\n                            } else if (k !== 'children') {\n                                el.setAttribute(k, v);\n                            }\n                        }\n                    }\n                    const inner = identifier.replace(/^<[^>]+>/, '').replace(/<\\/[a-zA-Z0-9\\-]+>$/, '');\n                    if (inner.trim()) {\n                        const temp = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                        temp.innerHTML = inner;\n                        Array.from(temp.childNodes).forEach(n => el.appendChild(n));\n                    }\n                    this.nodes = [el];\n                    return;\n                }\n                const template = document.createElement('template');\n                template.innerHTML = identifier.trim();\n                this.nodes = _ar.from(template.content.childNodes);\n                if (attributes) {\n                    const attrEntries = _ob.entries(attributes);\n                    for (let i = 0, n = this.nodes.length; i < n; i++) {\n                        const element = this.nodes[i];\n                        for (let j = 0, m = attrEntries.length; j < m; j++) {\n                            const [attr, val] = attrEntries[j];\n                            if (attr === 'class') {\n                                element.classList.add(...(Array.isArray(val) ? val : val.split(/\\s+/)));\n                            } else if (attr === 'style') {\n                                if (typeof val === 'object') {\n                                    const styleEntries = _ob.entries(val);\n                                    for (let k = 0, p = styleEntries.length; k < p; k++) {\n                                        const [prop, propVal] = styleEntries[k];\n                                        element.style[prop] = propVal;\n                                    }\n                                } else {\n                                    element.style.cssText = val;\n                                }\n                            } else if (attr === 'text') {\n                                element.textContent = val;\n                            } else if (attr === 'html') {\n                                element.innerHTML = val;\n                            } else {\n                                element.setAttribute(attr, val);\n                            }\n                        }\n                    }\n                }\n                if (props) {\n                    for (let i = 0, n = this.nodes.length; i < n; i++) {\n                        const element = this.nodes[i];\n                        for (let j = 0, m = props.length; j < m; j++) {\n                            element[props[j]] = true;\n                        }\n                    }\n                }\n            } else {\n                this.nodes = _ar.from(document.querySelectorAll(identifier));\n            }\n        }\n    }\n    Q.Ext = (methodName, functionImplementation) =>\n        (Q.prototype[methodName] = functionImplementation, Q);\n    Q.getGLOBAL = key => GLOBAL[key];\n    Q.setGLOBAL = value => (GLOBAL = { ...GLOBAL, ...value });\n    Q.style = (root = _n, style = '', responsive = _n, mapping = _n, enable_mapping = true) => {\n        const cleanUp = (str) => {\n            str= str.replace(/^\\s*[\\r\\n]/gm, '');\n            str = str.replace(/\\s+/g, ' ');\n            str = str.replace(/;;/g, ';');\n            return str.trim();\n        }\n        if (mapping && enable_mapping) {\n            const keys = _ob.keys(mapping);\n            const generateSecureCSSClassName = () => {\n                const letters = 'abcdefghijklmnopqrstuvwxyz';\n                const allChars = letters + '0123456789';\n                const length = _ma.floor(_ma.random() * 3) + 6;  \n                const firstChar = letters.charAt(_ma.floor(_ma.random() * letters.length));\n                const remainingChars = Array.from({ length: length - 1 }, () => \n                    allChars.charAt(_ma.floor(_ma.random() * allChars.length))\n                ).join('');\n                return firstChar + remainingChars;\n            };\n            const getUniqueClassName = () => {\n                let newKey;\n                do {\n                    newKey = generateSecureCSSClassName();\n                } while (styleData.elements.includes(newKey));\n                styleData.elements.push(newKey);\n                return newKey;\n            };\n            keys.forEach((key) => {\n                let newKey = getUniqueClassName();\n                if (style && typeof style === 'string') {\n                    style = style.replace(new _re(`\\\\.${key}\\\\b`, 'gm'), `.${newKey}`);\n                    style = style.replace(new _re(`^\\\\s*\\\\.${key}\\\\s*{`, 'gm'), `.${newKey} {`);\n                    style = style.replace(new _re(`(,\\\\s*)\\\\.${key}\\\\b`, 'gm'), `$1.${newKey}`);\n                    style = style.replace(new _re(`(\\\\s+)\\\\.${key}\\\\b`, 'gm'), `$1.${newKey}`);\n                }\n                mapping[key] = mapping[key].replace(key, newKey);\n            });\n        }\n        if (root && typeof root === 'string') {\n            styleData.root += root.trim();\n            styleData.root = cleanUp(styleData.root);\n        }\n        if (style && typeof style === 'string') {\n            styleData.generic += style;\n            styleData.generic = cleanUp(styleData.generic);\n        }\n        if (responsive && typeof responsive === 'object') {\n            const breakpoints = _ob.entries(responsive);\n            for (let i = 0; i < breakpoints.length; i++) {\n                const [size, css] = breakpoints[i];\n                if (css && typeof css === 'string') {\n                    if (!styleData.responsive[size]) {\n                        styleData.responsive[size] = '';\n                    }\n                    styleData.responsive[size] += css + '\\n';\n                }\n            }\n        }\n        if (document.readyState === 'complete') {\n            applyStyles();\n        }\n        return mapping;\n    };\n    Q._ = {\n        ob: _ob, ar: _ar, ma: _ma, da: _da, re: _re, st: _st, un: _un,\n        n: _n, nl: _nl, el: _el, si: _si, c: _c, ct: _ct, ci: _ci,\n        pr: _pr, str: _str, nu: _nu, bo: _bo, json: _json, map: _map,\n        set: _set, sym: _sym, win: _win, doc: _doc, loc: _loc, hist: _hist,\n        ls: _ls, ss: _ss, f: _f, ev: _ev, ac: _ac, as: _as, err: _err\n    };\n    return Q;\n})();",
    "scripts": {
        "basics": {
            "Done": {
                "uuid": "ae83685e-b6aa-4195-a9f1-c0bc2116b8c5",
                "name": "Done",
                "method": "Static",
                "desc": "Executes a function once the window's load event is fired, indicating all resources are loaded.",
                "type": "Event Handling",
                "example": [
                    "Q.Done(() => console.log('All resources loaded!'));",
                    "let postLoad = () => { document.body.classList.add('loaded'); }; Q.Done(postLoad);",
                    "Q.Done(() => { document.getElementById('preloader').classList.add('fade-out'); });",
                    "const calculateLayout = () => { const imageHeights = Array.from(document.images).map(img => img.height); console.log('All image heights:', imageHeights); }; Q.Done(calculateLayout);"
                ],
                "dependencies": [],
                "script": "Q.Done=((c)=>{\n    window.addEventListener(\"load\",()=>{while(c.length)c.shift()();c=0});\n    return f=>c?c.push(f):f()\n})([]);"
            },
            "Leaving": {
                "uuid": "d7388d45-8ec3-4de4-9a12-08949ef0d2b3",
                "name": "Leaving",
                "method": "Static",
                "desc": "Attaches a function to the window's beforeunload event, allowing actions before the page is closed or refreshed.",
                "type": "Event Handling",
                "example": [
                    "Q.Leaving(e => e.preventDefault());",
                    "let goodbyeMessage = e => { e.preventDefault(); e.returnValue = 'Are you sure you want to leave?'; }; Q.Leaving(goodbyeMessage);",
                    "Q.Leaving(event => { if (document.querySelector('form').dataset.modified === 'true') { event.preventDefault(); event.returnValue = 'You have unsaved changes'; } });",
                    "const saveState = e => { localStorage.setItem('appState', JSON.stringify(currentState)); }; Q.Leaving(saveState);"
                ],
                "dependencies": [],
                "script": "Q.Leaving=((c)=>{\n    let ev;\n    window.addEventListener(\"beforeunload\",e=>{\n      ev=e;while(c.length)c.shift()(e);c=0\n    });\n    return f=>c?c.push(f):f(ev)\n  })([]);"
            },
            "Ready": {
                "uuid": "54ac5d95-4bfa-4045-ba3c-49c0d63a0fa7",
                "name": "Ready",
                "method": "Static",
                "desc": "Executes a function when the document is fully loaded, ensuring all elements are accessible.",
                "type": "Event Handling",
                "example": [
                    "Q.Ready(() => console.log('Document is ready!'));",
                    "let init = () => { console.log('Initialization complete.'); }; Q.Ready(init);",
                    "Q.Ready(() => { document.getElementById('loader').style.display = 'none'; document.getElementById('content').style.display = 'block'; });",
                    "const setupEventListeners = () => { document.querySelectorAll('.clickable').forEach(el => el.addEventListener('click', handleClick)); }; Q.Ready(setupEventListeners);"
                ],
                "dependencies": [],
                "script": "Q.Ready=((c)=>{\n    document.readyState==='loading'?document.addEventListener(\"DOMContentLoaded\",()=>{while(c.length)c.shift()();c=0},{once:1}):c=0;\n    return f=>c?c.push(f):f();\n  })([]);"
            },
            "Resize": {
                "uuid": "ad7caec5-4a63-45af-9270-4c65b047cd53",
                "name": "Resize",
                "method": "Static",
                "desc": "Attaches a function to the window's resize event, executing it with the new innerWidth and innerHeight.",
                "type": "Event Handling",
                "example": [
                    "Q.Resize((width, height) => console.log(`Window resized to ${width}x${height}`));",
                    "let resizeHandler = (width, height) => { document.body.style.fontSize = (width / 100) + 'em'; }; Q.Resize(resizeHandler);",
                    "Q.Resize((width, height) => { const ratio = width / height; document.getElementById('container').style.aspectRatio = ratio; });",
                    "const updateLayout = (w, h) => { if (w < 768) { document.body.classList.add('mobile'); } else { document.body.classList.remove('mobile'); } }; Q.Resize(updateLayout);"
                ],
                "dependencies": [],
                "script": "Q.Resize=((c)=>{\n    addEventListener(\"resize\",()=>{\n      for(let i=0,l=c.length;i<l;) c[i++](innerWidth,innerHeight)\n    });\n    return f=>c.push(f)\n  })([]);"
            }
        },
        "methods": {
            "addClass": {
                "uuid": "f17d27ee-18ad-4509-8804-e08bde23531e",
                "name": "addClass",
                "method": "Prototype",
                "desc": "Adds one or more classes to each node, ignoring duplicates.",
                "type": "Class Manipulation",
                "example": [
                    "Q(selector).addClass(\"class1\");",
                    "Q(selector).addClass(\"class1 class2\");"
                ],
                "dependencies": [],
                "script": "Q.Ext('addClass', function (classes) {\n    var list = classes.split(' '),\n        nodes = this.nodes;\n    for (var i = 0, l = nodes.length; i < l; i++) {\n        nodes[i].classList.add.apply(nodes[i].classList, list);\n    }\n    return this;\n});"
            },
            "after": {
                "uuid": "6beb1a67-8945-4837-900c-e9e07050c38e",
                "name": "after",
                "method": "Prototype",
                "desc": "Inserts content after each element in the current set of matched elements.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).after(\"<p>New paragraph</p>\");",
                    "Q(selector).after(document.createElement(\"div\"));",
                    "Q(selector).after(Q(otherSelector));",
                    "Q(selector).after([document.createElement(\"span\"), document.createElement(\"img\")]);"
                ],
                "dependencies": [],
                "script": "Q.Ext('after', function (...contents) {\n  const nodes = this.nodes;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const target = nodes[i];\n    const parent = target.parentNode;\n    if (!parent) continue;\n    for (let j = 0, clen = contents.length; j < clen; j++) {\n      const content = contents[j];\n      if (typeof content === \"string\") {\n        target.insertAdjacentHTML('afterend', content);\n      } else if (content instanceof HTMLElement) {\n        if (target.nextSibling) {\n          parent.insertBefore(content, target.nextSibling);\n        } else {\n          parent.appendChild(content);\n        }\n      } else if (content instanceof Q) {\n        if (target.nextSibling) {\n          parent.insertBefore(content.nodes[0], target.nextSibling);\n        } else {\n          parent.appendChild(content.nodes[0]);\n        }\n      } else if (Array.isArray(content) || content instanceof NodeList) {\n        const subNodes = Array.from(content);\n        let nextSibling = target.nextSibling;\n        for (let k = 0, slen = subNodes.length; k < slen; k++) {\n          if (nextSibling) {\n            parent.insertBefore(subNodes[k], nextSibling);\n            nextSibling = subNodes[k].nextSibling;\n          } else {\n            parent.appendChild(subNodes[k]);\n          }\n        }\n      }\n    }\n  }\n  return this;\n});"
            },
            "animate": {
                "uuid": "0faa8564-2672-48a0-bc0c-dd80b3106012",
                "name": "animate",
                "method": "Prototype",
                "desc": "Animates each node using specified CSS properties over a given duration, with an optional callback when complete.",
                "type": "Animation",
                "example": [
                    "Q(selector).animate(500, { opacity: 0 }, () => { console.log('Fade out complete'); });",
                    "Q(selector).animate(1000, { left: \"100px\", top: \"50px\" });",
                    "Q(selector).animate(700, { opacity: 1, backgroundColor: \"#ff0000\" }, () => { alert('Animation finished!'); });"
                ],
                "dependencies": [],
                "script": "Q.Ext('animate', function (duration, properties, callback) {\n  var nodes = this.nodes;\n  for (var i = 0, len = nodes.length; i < len; i++) {\n    var element = nodes[i],\n        keys = Object.keys(properties),\n        transitionProperties = '';\n    for (var j = 0, klen = keys.length; j < klen; j++) {\n      transitionProperties += keys[j] + ' ' + duration + 'ms' + (j < klen - 1 ? ', ' : '');\n    }\n    element.style.transition = transitionProperties;\n    for (var j = 0; j < klen; j++) {\n      var prop = keys[j];\n      element.style[prop] = properties[prop];\n    }\n    if (typeof callback === 'function') {\n      setTimeout((function(el){\n          return function(){ callback.call(el); };\n      })(element), duration);\n    }\n  }\n  return this;\n});"
            },
            "append": {
                "uuid": "41958347-9927-493e-b3ff-fe5d4e3e518e",
                "name": "append",
                "method": "Prototype",
                "desc": "Appends child nodes, HTML, or multiple elements to each node.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).append(\"<p>New paragraph</p>\");",
                    "Q(selector).append(document.createElement(\"div\"));",
                    "Q(selector).append(Q(otherSelector));",
                    "Q(selector).append([document.createElement(\"span\"), document.createElement(\"img\")]);",
                    "Q(selector).append(document.querySelectorAll(\".items\"));"
                ],
                "dependencies": [],
                "script": "Q.Ext('append', function (...contents) {\n  const nodes = this.nodes;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const parent = nodes[i];\n    for (let j = 0, clen = contents.length; j < clen; j++) {\n      const child = contents[j];\n      if (typeof child === \"string\") {\n        if (parent instanceof SVGElement) {\n          const temp = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n          temp.innerHTML = child;\n          Array.from(temp.childNodes).forEach(n => parent.appendChild(n));\n        } else {\n          parent.insertAdjacentHTML('beforeend', child);\n        }\n      } else if (child instanceof HTMLElement || child instanceof Q || child instanceof SVGElement) {\n        parent.appendChild(child.nodes ? child.nodes[0] : child);\n      } else if (Array.isArray(child) || child instanceof NodeList) {\n        const subNodes = Array.from(child);\n        for (let k = 0, slen = subNodes.length; k < slen; k++) {\n          parent.appendChild(subNodes[k]);\n        }\n      }\n    }\n  }\n  return this;\n});"
            },
            "attr": {
                "uuid": "1fe60fbd-2a7a-47fa-99e9-9435610de586",
                "name": "attr",
                "method": "Prototype",
                "desc": "Gets or sets attributes on the nodes, supporting multiple attributes at once.",
                "type": "Attribute Manipulation",
                "example": [
                    "Q(selector).attr(\"id\", \"newId\");",
                    "Q(selector).attr({ \"src\": \"image.jpg\", \"alt\": \"An image\" });",
                    "Q(selector).attr(\"href\");"
                ],
                "dependencies": [],
                "script": "Q.Ext('attr', function (attribute, value) {\n    var nodes = this.nodes;\n    if (typeof attribute === 'object') {\n        var keys = Object.keys(attribute);\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            var node = nodes[i];\n            for (var j = 0, klen = keys.length; j < klen; j++) {\n                node.setAttribute(keys[j], attribute[keys[j]]);\n            }\n        }\n        return this;\n    } else {\n        if (value === undefined) {\n            return nodes[0] && nodes[0].getAttribute(attribute) || null;\n        }\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            nodes[i].setAttribute(attribute, value);\n        }\n        return this;\n    }\n});"
            },
            "before": {
                "uuid": "e7fb81f6-b75f-4c64-b5f9-de5472bd7b56",
                "name": "before",
                "method": "Prototype",
                "desc": "Inserts content before each element in the current set of matched elements.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).before(\"<p>New paragraph</p>\");",
                    "Q(selector).before(document.createElement(\"div\"));",
                    "Q(selector).before(Q(otherSelector));",
                    "Q(selector).before([document.createElement(\"span\"), document.createElement(\"img\")]);"
                ],
                "dependencies": [],
                "script": "Q.Ext('before', function (...contents) {\n  const nodes = this.nodes;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const target = nodes[i];\n    const parent = target.parentNode;\n    if (!parent) continue;\n    for (let j = 0, clen = contents.length; j < clen; j++) {\n      const content = contents[j];\n      if (typeof content === \"string\") {\n        target.insertAdjacentHTML('beforebegin', content);\n      } else if (content instanceof HTMLElement) {\n        parent.insertBefore(content, target);\n      } else if (content instanceof Q) {\n        parent.insertBefore(content.nodes[0], target);\n      } else if (Array.isArray(content) || content instanceof NodeList) {\n        const subNodes = Array.from(content);\n        for (let k = 0, slen = subNodes.length; k < slen; k++) {\n          parent.insertBefore(subNodes[k], target);\n        }\n      }\n    }\n  }\n  return this;\n});"
            },
            "bind": {
                "uuid": "a35f5fb9-e39b-41de-857f-bb5693584c10",
                "name": "bind",
                "method": "Prototype",
                "desc": "Adds an event listener to each node, allowing for event delegation to improve performance.",
                "type": "Event Handling",
                "example": [
                    "Q(selector).bind(\"click\", () => console.log(\"Clicked\"));",
                    "Q('.btn').bind(\"mouseover\", (e) => { console.log(`Hovered over: ${e.target.tagName}`); });"
                ],
                "dependencies": [],
                "script": "Q.Ext('bind', function (event, handler) {\n    if (!this._eventDelegation) {\n        this._eventDelegation = {};\n    }\n    if (!this._eventDelegation[event]) {\n        document.addEventListener(event, (e) => {\n            var nodes = this.nodes;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                if (nodes[i].contains(e.target)) {\n                    handler.call(e.target, e);\n                }\n            }\n        });\n        this._eventDelegation[event] = true;\n    }\n    return this;\n});"
            },
            "blur": {
                "uuid": "1d45c72b-f8e7-4052-9aaa-a9f446756d10",
                "name": "blur",
                "method": "Prototype",
                "desc": "Removes focus from the first node in the selection, effectively blurring it.",
                "type": "Form Manipulation",
                "example": [
                    "Q(selector).blur();",
                    "Q('.active').blur();",
                    "Q('textarea').blur();"
                ],
                "dependencies": [],
                "script": "Q.Ext('blur', function () {\n    var nodes = this.nodes;\n    for (var i = 0, l = nodes.length; i < l; i++) {\n        nodes[i].blur();\n    }\n    return this;\n});"
            },
            "children": {
                "uuid": "627a8e67-4027-478d-94bb-9e9be4ba9ae3",
                "name": "children",
                "method": "Prototype",
                "desc": "Gets the direct child elements of each node, optionally filtered by a selector.",
                "type": "Traversal",
                "example": [
                    "const items = Q('ul').children();",
                    "Q('#menu').children('.active').addClass('highlight');",
                    "const visibleItems = Q('.container').children(':visible');",
                    "const selector = 'li'; Q('nav').children(selector).css('display', 'inline-block');"
                ],
                "dependencies": [],
                "script": "Q.Ext('children', function (selector) {\n  const result = [];\n  const nodes = this.nodes;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const parent = nodes[i];\n    if (!parent || !parent.children) continue;\n    const childElements = parent.children;\n    if (selector) {\n      for (let j = 0; j < childElements.length; j++) {\n        if (childElements[j].matches && childElements[j].matches(selector)) {\n          result.push(childElements[j]);\n        }\n      }\n    } else {\n      for (let j = 0; j < childElements.length; j++) {\n        result.push(childElements[j]);\n      }\n    }\n  }\n  return new Q(result);\n});"
            },
            "click": {
                "uuid": "838fbf38-58eb-4bb9-8d45-5289de108294",
                "name": "click",
                "method": "Prototype",
                "desc": "Simulates a click event on each node in the selection.",
                "type": "Event Handling",
                "example": [
                    "Q(selector).click();",
                    "Q('.button').click();"
                ],
                "dependencies": [],
                "script": "Q.Ext('click', function () {\n    var nodes = this.nodes;\n    for (var i = 0, l = nodes.length; i < l; i++) {\n        nodes[i].click();\n    }\n    return this;\n});"
            },
            "clone": {
                "uuid": "30c2cf7d-dec6-4159-857b-6b23ee82fb60",
                "name": "clone",
                "method": "Prototype",
                "desc": "Creates a deep copy of the first node in the selection, including its child nodes.",
                "type": "DOM Manipulation",
                "example": [
                    "let clonedNode = Q(selector).clone();",
                    "Q(selector).clone().appendTo('#target');"
                ],
                "dependencies": [],
                "script": "Q.Ext('clone', function () {\n    return new Q(this.nodes[0].cloneNode(true));\n});"
            },
            "closest": {
                "uuid": "03ca5cdc-858f-4cf5-8801-6482f7758a0d",
                "name": "closest",
                "method": "Prototype",
                "desc": "Finds the nearest ancestor node of the first node that matches a given selector.",
                "type": "Traversal",
                "example": [
                    "Q(selector).closest('.parent');",
                    "Q(selector).closest('#container');",
                    "Q(selector).closest('[data-role=wrapper]');"
                ],
                "dependencies": [],
                "script": "Q.Ext('closest', function (selector) {\n    let node = this.nodes[0];\n    while (node) {\n        if (node.matches && node.matches(selector)) {\n            return new Q(node);\n        }\n        node = node.parentElement;\n    }\n    return null;\n});"
            },
            "css": {
                "uuid": "474765d6-694c-4343-a66f-6dc6518a263a",
                "name": "css",
                "method": "Prototype",
                "desc": "Gets or sets one or more CSS properties for the nodes.",
                "type": "CSS Manipulation",
                "example": [
                    "const color = Q('#element').css('color');",
                    "Q('.highlight').css('background-color', '#ffff00');",
                    "Q('header').css({ position: 'fixed', top: 0, width: '100%' });",
                    "const fontSize = 16; Q('.text').css('font-size', fontSize + 'px');"
                ],
                "dependencies": [],
                "script": "Q.Ext('css', function(property, value) {\n  const nodes = this.nodes;\n  if (typeof property === 'object') {\n      for (let i = 0, len = nodes.length; i < len; i++) {\n          const elemStyle = nodes[i].style;\n          for (const key in property) {\n              elemStyle[key] = property[key];\n          }\n      }\n      return this;\n  }\n  if (value === Q._.un) return getComputedStyle(nodes[0])[property];\n  for (let i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].style[property] = value;\n  }\n  return this;\n});"
            },
            "data": {
                "uuid": "d8cf3c32-c835-452b-9175-f0b33892ed2f",
                "name": "data",
                "method": "Prototype",
                "desc": "Retrieves or sets data-* attributes on the selected nodes. Provides an easy way to store and access custom data associated with the elements.",
                "type": "Data Manipulation",
                "example": [
                    "Q(selector).data('userId', 123);",
                    "const userId = Q('#user').data('userId');",
                    "Q('#user').data('role', 'admin');"
                ],
                "dependencies": [],
                "script": "Q.Ext('data', function (key, value) {\n    const nodes = this.nodes;\n    if (value === Q._.un) {\n        return nodes[0] && nodes[0].dataset[key] || Q._.n;\n    }\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].dataset[key] = value;\n    }\n    return this;\n});"
            },
            "detach": {
                "uuid": "657ee84f-3e3d-42f6-8d82-1eae759171f5",
                "name": "detach",
                "method": "Method",
                "desc": "Removes the elements from the DOM but keeps them in memory for later reattachment.",
                "type": "Method",
                "example": [
                    "const element = Q('#myElement').detach();",
                    "Q('#container').append(element);"
                ],
                "dependencies": [],
                "script": "Q.Ext('detach', function() {\n    const nodes = this.nodes;\n    const detachedNodes = [];\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        const parent = node.parentNode;\n        if (parent) {\n            detachedNodes.push(node);\n            parent.removeChild(node);\n        }\n    }\n    this.nodes = detachedNodes;\n    return this;\n});"
            },
            "each": {
                "uuid": "86747598-1e43-4c8b-9bd6-fbf435faea3b",
                "name": "each",
                "method": "Prototype",
                "desc": "Iterates over all nodes in the Q object and executes a callback on each node, providing access to the index and element.",
                "type": "Iteration",
                "example": [
                    "Q(selector).each((index, element) => console.log(index, element));",
                    "Q('.items').each((i, el) => el.style.color = 'red');"
                ],
                "dependencies": [],
                "script": "Q.Ext('each', function (callback) {\n    if (!this.nodes) return this;\n    const nodes = this.nodes;\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        callback.call(nodes[i], i, nodes[i]);\n    }\n    return this;\n});"
            },
            "empty": {
                "uuid": "300d146b-eaa0-46d3-82e8-3a563db4829f",
                "name": "empty",
                "method": "Prototype",
                "desc": "Empties the innerHTML of each node.",
                "type": "Content Manipulation",
                "example": [
                    "Q(selector).empty();",
                    "Q('.container').empty();",
                    "Q('#main').empty();",
                    "Q('div').empty();"
                ],
                "dependencies": [],
                "script": "Q.Ext('empty', function () {\n  var nodes = this.nodes;\n  for (var i = 0, len = nodes.length; i < len; i++) {\n    nodes[i].innerHTML = '';\n  }\n  return this;\n});"
            },
            "eq": {
                "uuid": "2c27d6c4-850f-4c71-bb04-3ff647954669",
                "name": "eq",
                "method": "Prototype",
                "desc": "Returns a specific node by index.",
                "type": "Traversal",
                "example": [
                    "Q(selector).eq(1);",
                    "const secondItem = Q('.list-item').eq(1);"
                ],
                "dependencies": [],
                "script": "Q.Ext('eq', function (index) {\n  var node = this.nodes[index];\n  return node ? new Q(node) : null;\n});"
            },
            "fadeIn": {
                "uuid": "5becef48-f973-427b-b425-39228aa332d2",
                "name": "fadeIn",
                "method": "Prototype",
                "desc": "Fades in all nodes over a specified duration.",
                "type": "Animation",
                "example": [
                    "Q('#notification').fadeIn(500);",
                    "Q('.hidden-content').fadeIn();",
                    "Q('.modal').fadeIn(300, () => Q('.modal-content').slideDown());",
                    "const duration = 1000; Q('#welcome-message').fadeIn(duration, () => console.log('Animation complete'));"
                ],
                "dependencies": [],
                "script": "Q.Ext('fadeIn', function(duration, callback) {\n    duration = duration || 400;\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        (function(el) {\n            var elemStyle = el.style;\n            elemStyle.display = '';\n            elemStyle.transition = 'opacity ' + duration + 'ms';\n            void el.offsetHeight;\n            elemStyle.opacity = 1;\n            setTimeout(function() {\n                elemStyle.transition = '';\n                if (callback) callback();\n            }, duration);\n        })(nodes[i]);\n    }\n    return this;\n});"
            },
            "fadeOut": {
                "uuid": "0129058a-9cdf-4d64-853c-22bb110c15c1",
                "name": "fadeOut",
                "method": "Prototype",
                "desc": "Fades out all nodes over a specified duration and then sets display to none.",
                "type": "Animation",
                "example": [
                    "Q('#notification').fadeOut(500);",
                    "Q('.temporary-message').fadeOut();",
                    "Q('.modal').fadeOut(300, () => Q('.modal-backdrop').fadeOut());",
                    "const duration = 800; Q('#splash-screen').fadeOut(duration, () => console.log('Animation complete'));"
                ],
                "dependencies": [],
                "script": "Q.Ext('fadeOut', function(duration, callback) {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        (function(el) {\n            var elemStyle = el.style;\n            elemStyle.transition = 'opacity ' + duration + 'ms';\n            elemStyle.opacity = 0;\n            setTimeout(function() {\n                elemStyle.transition = '';\n                elemStyle.display = 'none';\n                if (callback) callback();\n            }, duration);\n        })(nodes[i]);\n    }\n    return this;\n});"
            },
            "fadeTo": {
                "uuid": "2a39411c-7b44-463f-9e17-769ab8fe835b",
                "name": "fadeTo",
                "method": "Prototype",
                "desc": "Fades each node to a specific opacity.",
                "type": "Display",
                "example": [
                    "Q(selector).fadeTo(0.5, 400, function() { console.log('Faded to 50%'); });",
                    "Q('.element').fadeTo(0.75, 1000);",
                    "Q('#box').fadeTo(0, 200).fadeTo(1, 200);"
                ],
                "dependencies": [],
                "script": "Q.Ext('fadeTo', function(opacity, duration, callback) {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        (function(el) {\n            var style = el.style;\n            style.transition = 'opacity ' + duration + 'ms';\n            void el.offsetHeight;\n            style.opacity = opacity;\n            setTimeout(function() {\n                style.transition = '';\n                if (callback) callback();\n            }, duration);\n        })(nodes[i]);\n    }\n    return this;\n});"
            },
            "fadeToggle": {
                "uuid": "35f61941-ca67-46ba-8fa8-a35faa187c1f",
                "name": "fadeToggle",
                "method": "Prototype",
                "desc": "Toggles the fade state of each node.",
                "type": "Display",
                "example": [
                    "Q(selector).fadeToggle(1000);",
                    "Q('.menu-items').fadeToggle(500);",
                    "Q('#notification').fadeToggle(800, function() { console.log('Animation complete'); });"
                ],
                "dependencies": [],
                "script": "Q.Ext('fadeToggle', function(duration, callback) {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        var computed = window.getComputedStyle(nodes[i]);\n        if (computed.opacity === '0') {\n            this.fadeIn(duration, callback);\n        } else {\n            this.fadeOut(duration, callback);\n        }\n    }\n    return this;\n});"
            },
            "find": {
                "uuid": "8a0d3cac-e721-408d-8ca2-cc14fcf08756",
                "name": "find",
                "method": "Prototype",
                "desc": "Finds descendants of each node that match the selector.",
                "type": "Traversal",
                "example": [
                    "Q('#container').find('.item');",
                    "const nestedImages = Q('.article').find('img');",
                    "const selector = '[data-role=\"button\"]'; Q('nav').find(selector);",
                    "Q('form').find('input:invalid').addClass('error');"
                ],
                "dependencies": [],
                "script": "Q.Ext('find', function(selector) {\n    var parent = this.nodes[0];\n    if (!parent) return null;\n    var found = parent.querySelectorAll(selector);\n    return found.length ? Q(found) : null;\n});"
            },
            "first": {
                "uuid": "a066828e-5f5f-45f3-8e41-ead14e8da98c",
                "name": "first",
                "method": "Prototype",
                "desc": "Returns the first node.",
                "type": "Traversal",
                "example": [
                    "Q(selector).first();",
                    "Q('li').first();",
                    "Q('.item').first().addClass('active');"
                ],
                "dependencies": [],
                "script": "Q.Ext('first', function () {\n    return new Q(this.nodes[0]);\n});"
            },
            "focus": {
                "uuid": "0f2cc114-3195-478d-baaf-7f5794ac6c13",
                "name": "focus",
                "method": "Prototype",
                "desc": "Focuses on the first node.",
                "type": "Form Manipulation",
                "example": [
                    "Q('input#username').focus();",
                    "Q('.search-box').focus();",
                    "Q(selector).click(function() { Q('#target-field').focus(); });"
                ],
                "dependencies": [],
                "script": "Q.Ext('focus', function () {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].focus();\n    }\n    return this;\n});"
            },
            "hasClass": {
                "uuid": "3fd01e39-2427-474a-8354-142d332bf59d",
                "name": "hasClass",
                "method": "Prototype",
                "desc": "Checks if the first node has a specific class.",
                "type": "Class Manipulation",
                "example": [
                    "var hasActiveClass = Q(selector).hasClass('active');",
                    "if (Q(selector).hasClass('disabled')) { /* disable functionality */ }",
                    "Q(selector).hasClass('highlight') ? doSomething() : doSomethingElse();"
                ],
                "dependencies": [],
                "script": "Q.Ext('hasClass', function(className) {\n    var node = this.nodes[0];\n    return (node && node.classList.contains(className)) || false;\n});"
            },
            "height": {
                "uuid": "f945be40-2ec7-4f2d-a681-357f25e1f8a0",
                "name": "height",
                "method": "Prototype",
                "desc": "Gets or sets the height of the first node.",
                "type": "Dimensions",
                "example": [
                    "Q(selector).height();",
                    "Q('#content').height('300px');",
                    "const elemHeight = Q('.box').height();",
                    "Q('.panel').height('50vh');"
                ],
                "dependencies": [],
                "script": "Q.Ext('height', function (value) {\n    var nodes = this.nodes;\n    if (value === undefined) {\n        return nodes[0].offsetHeight;\n    }\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].style.height = value;\n    }\n    return this;\n});"
            },
            "hide": {
                "uuid": "925b38b0-40b1-4419-a8b8-2c7f7f6a5266",
                "name": "hide",
                "method": "Prototype",
                "desc": "Hides each node, optionally with a fade-out effect over a specified duration.",
                "type": "Display",
                "example": [
                    "Q(selector).hide();",
                    "Q(selector).hide(500);",
                    "Q(selector).hide(1000, function() { console.log('Element hidden'); });"
                ],
                "dependencies": [],
                "script": "Q.Ext('hide', function (duration, callback) {\n    duration = duration || 0;\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        if (duration === 0) {\n            node.style.display = 'none';\n            if (callback) callback();\n        } else {\n            node.style.transition = 'opacity ' + duration + 'ms';\n            node.style.opacity = 1;\n            setTimeout((function(n) {\n                return function() {\n                    n.style.opacity = 0;\n                    n.addEventListener('transitionend', function handler() {\n                        n.style.display = 'none';\n                        n.style.transition = '';\n                        n.removeEventListener('transitionend', handler);\n                        if (callback) callback();\n                    });\n                };\n            })(node), 0);\n        }\n    }\n    return this;\n});"
            },
            "html": {
                "uuid": "c4808b20-61f8-468b-9e89-ef9043649228",
                "name": "html",
                "method": "Prototype",
                "desc": "Gets or sets the innerHTML of the nodes. This method allows for easy manipulation of the content inside the selected elements.",
                "type": "Content Manipulation",
                "example": [
                    "const currentHtml = Q(selector).html();",
                    "Q(selector).html('<div>New Content</div>');",
                    "Q(selector).html(['<span>First</span>', '<span>Second</span>']);",
                    "const newNode = Q('<p>Paragraph</p>'); Q(selector).html(newNode);",
                    "Q(selector).html(document.createElement('div'));",
                    "const nodeList = document.querySelectorAll('.child'); Q(selector).html(nodeList);",
                    "Q(selector).html([]);",
                    "Q(selector).html(null);"
                ],
                "dependencies": [],
                "script": "Q.Ext('html', function (content) {\n    var nodes = this.nodes;\n    if (content === undefined) {\n        return nodes[0] ? nodes[0].innerHTML : null;\n    }\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        node.innerHTML = '';\n        var appendContent = function(child) {\n            if (typeof child === 'string') {\n                node.insertAdjacentHTML('beforeend', child);\n            } else if (child instanceof Q) {\n                for (var j = 0, clen = child.nodes.length; j < clen; j++) {\n                    node.appendChild(child.nodes[j]);\n                }\n            } else if (child instanceof HTMLElement || child instanceof Node) {\n                node.appendChild(child);\n            } else if (Array.isArray(child) || child instanceof NodeList) {\n                var subs = Array.from(child);\n                for (var k = 0, slen = subs.length; k < slen; k++) {\n                    node.appendChild(subs[k]);\n                }\n            }\n        };\n        if (Array.isArray(content) || content instanceof NodeList) {\n            var contArr = Array.from(content);\n            for (var m = 0, mlen = contArr.length; m < mlen; m++) {\n                appendContent(contArr[m]);\n            }\n        } else {\n            appendContent(content);\n        }\n    }\n    return this;\n});"
            },
            "id": {
                "uuid": "e2ee6cfc-4fea-4e7b-990d-476c2abed0d8",
                "name": "id",
                "method": "Prototype",
                "desc": "Gets or sets the id attribute of the first node.",
                "type": "Attributes",
                "example": [
                    "const elementId = Q(selector).id(); // Retrieves the id",
                    "Q(selector).id('new-id'); // Sets the id to 'new-id'",
                    "const oldId = Q('#element').id(); // Get current id",
                    "Q('.element').id('dynamic-id-' + index); // Set dynamic id"
                ],
                "dependencies": [],
                "script": "Q.Ext('id', function (ident) {\n    var node = this.nodes[0];\n    if (ident === undefined) return node.id;\n    node.id = ident;\n    return this;\n});"
            },
            "index": {
                "uuid": "134b2e8a-afd1-4563-87fc-381094e49e04",
                "name": "index",
                "method": "Prototype",
                "desc": "Returns the index of the first node, or moves the node to a specific index within its parent.",
                "type": "Traversal",
                "example": [
                    "const position = Q('.item').index(); // Get position of element",
                    "Q('.moveMe').index(2); // Move element to third position",
                    "Q('.item').index(0); // Move to first position",
                    "Q('.item').index(999); // Move to last position (appends)"
                ],
                "dependencies": [],
                "script": "Q.Ext('index', function (index) {\n    var first = this.nodes[0];\n    if (index === undefined) {\n        return Array.prototype.indexOf.call(first.parentNode.children, first);\n    }\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i],\n            parent = node.parentNode;\n        if (!parent) continue;\n        var children = Array.from(parent.children);\n        parent.removeChild(node);\n        if (index >= children.length) {\n            parent.appendChild(node);\n        } else {\n            parent.insertBefore(node, children[index]);\n        }\n    }\n    return this;\n});"
            },
            "inside": {
                "uuid": "06927d87-a997-4eda-bed1-60ed1f29f185",
                "name": "inside",
                "method": "Prototype",
                "desc": "Checks if the first node is inside another node, determined by a specific selector.",
                "type": "Traversal",
                "example": [
                    "Q(selector).inside(\".parent\");",
                    "if(Q('.child').inside('#container')) { /* do something */ }",
                    "Q('.item').inside('section.content')"
                ],
                "dependencies": [],
                "script": "Q.Ext('inside', function (selector) {\n    var node = this.nodes[0];\n    return node ? node.closest(selector) !== null : false;\n});"
            },
            "is": {
                "uuid": "b9c76194-f5a6-453f-975e-06c57a47abe4",
                "name": "is",
                "method": "Prototype",
                "desc": "Checks if the first node matches a specific selector or condition, allowing for dynamic queries and element comparisons.",
                "type": "Utilities",
                "example": [
                    "Q(selector).is(':visible');",
                    "Q(selector).is('.active');",
                    "Q(selector).is(function() { return this.tagName === 'DIV'; });",
                    "Q(selector).is(anotherElement);",
                    "Q(selector).is(Q('.comparable'));",
                    "if(Q('input').is(':checked')) { /* process checked input */ }"
                ],
                "dependencies": [],
                "script": "Q.Ext('is', function (selector) {\n    var node = this.nodes[0];\n    if (!node) return false;\n    if (typeof selector === 'function') {\n        return selector.call(node, 0, node);\n    }\n    if (typeof selector === 'string') {\n        switch (selector) {\n            case ':visible':\n                return node.offsetWidth > 0 && node.offsetHeight > 0;\n            case ':hidden':\n                return node.offsetWidth === 0 || node.offsetHeight === 0;\n            case ':hover':\n                return node === document.querySelector(':hover');\n            case ':focus':\n                return node === document.activeElement;\n            case ':blur':\n                return node !== document.activeElement;\n            case ':checked':\n                return node.checked;\n            case ':selected':\n                return node.selected;\n            case ':disabled':\n                return node.disabled;\n            case ':enabled':\n                return !node.disabled;\n            default:\n                return node.matches(selector);\n        }\n    }\n    if (selector instanceof HTMLElement || selector instanceof Node) {\n        return node === selector;\n    }\n    if (selector instanceof Q) {\n        return node === selector.nodes[0];\n    }\n    return false;\n});"
            },
            "isExists": {
                "uuid": "2639dd7f-89b7-4dfd-ab8e-8a40f863850a",
                "name": "isExists",
                "method": "Prototype",
                "desc": "Checks if the first node exists in the DOM.",
                "type": "Utilities",
                "example": [
                    "Q(selector).isExists();",
                    "Q.isExists('.ok')",
                    "if(Q('#myElement').isExists()) { /* do something */ }"
                ],
                "dependencies": [],
                "script": "Q.Ext('isExists', function () {\n    var node = this.nodes[0];\n    return node ? document.body.contains(node) : false;\n});\nQ.isExists = function (selector) {\n    return document.querySelector(selector) !== null;\n};"
            },
            "last": {
                "uuid": "b82af382-61fb-478c-828f-069d67465ca5",
                "name": "last",
                "method": "Prototype",
                "desc": "Returns the last node.",
                "type": "Traversal",
                "example": [
                    "Q(selector).last();",
                    "Q('li').last().addClass('last-item');",
                    "const lastParagraph = Q('p').last();",
                    "Q('.section').last().css('margin-bottom', '0');"
                ],
                "dependencies": [],
                "script": "Q.Ext('last', function () {\n    var nodes = this.nodes;\n    return new Q(nodes[nodes.length - 1]);\n});"
            },
            "map": {
                "uuid": "ba313765-4913-4d1d-a51c-ee25bfb74a7a",
                "name": "map",
                "method": "Prototype",
                "desc": "Maps each node to a new array.",
                "type": "Array",
                "example": [
                    "Q(selector).map(el => el.innerHTML);",
                    "const heights = Q('.box').map(el => el.prop('offsetHeight'));",
                    "const texts = Q('p').map(el => el.text());",
                    "const data = Q('[data-value]').map(el => el.attr('data-value'));"
                ],
                "dependencies": [],
                "script": "Q.Ext('map', function (callback) {\n    var result = [],\n        nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        result.push(callback(new Q(nodes[i])));\n    }\n    return result;\n});"
            },
            "next": {
                "uuid": "68976bb4-2f23-413d-b146-74d05c72ab00",
                "name": "next",
                "method": "Prototype",
                "desc": "Gets the next sibling element of each node, optionally filtered by a selector.",
                "type": "Traversal",
                "example": [
                    "const nextElement = Q('#current').next();",
                    "Q('li.active').next().addClass('upcoming');",
                    "Q('.panel').next('div.panel').toggle();",
                    "const nextSlide = Q('.current-slide').next('.slide');"
                ],
                "dependencies": [],
                "script": "Q.Ext('next', function(selector) {\n    const result = [];\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const node = this.nodes[i];\n        let next = node.nextElementSibling;\n        if (next && (!selector || next.matches(selector))) {\n            result.push(next);\n        }\n    }\n    const instance = new Q();\n    instance.nodes = result;\n    return instance;\n});"
            },
            "off": {
                "uuid": "4be7ba9a-053b-41b6-beeb-1449396dc597",
                "name": "off",
                "method": "Prototype",
                "desc": "Removes an event listener from each node.",
                "type": "Event Handling",
                "example": [
                    "Q(selector).off(\"click\", handler);",
                    "Q('button').off('click touchstart', handleInteraction);",
                    "Q('#form').off('submit', validateForm);",
                    "Q('.dropdown').off('mouseenter mouseleave', toggleMenu, { capture: true });"
                ],
                "dependencies": [],
                "script": "Q.Ext('off', function (events, handler, options) {\n    var defaultOptions = { capture: false, once: false, passive: false },\n        opts = Object.assign({}, defaultOptions, options),\n        eventList = events.split(' '),\n        nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        for (var j = 0, elen = eventList.length; j < elen; j++) {\n            nodes[i].removeEventListener(eventList[j], handler, opts);\n        }\n    }\n    return this;\n});"
            },
            "offset": {
                "uuid": "4b95f291-870b-4df1-8f3c-28804e626d57",
                "name": "offset",
                "method": "Prototype",
                "desc": "Gets the position of the first node relative to the document.",
                "type": "Position",
                "example": [
                    "const pos = Q('#element').offset();",
                    "const { top, left } = Q('.tooltip-trigger').offset();",
                    "Q('#popup').css({ top: Q('#reference').offset().top + 10 + 'px' });",
                    "const coords = Q('button').offset(); console.log(`Document position: ${coords.left}, ${coords.top}`);"
                ],
                "dependencies": [],
                "script": "Q.Ext('offset', function () {\n    var node = this.nodes[0],\n        rect = node.getBoundingClientRect();\n    return {\n        top: rect.top + window.scrollY,\n        left: rect.left + window.scrollX\n    };\n});"
            },
            "on": {
                "uuid": "e6c883be-8d9b-4955-a364-41456389dfda",
                "name": "on",
                "method": "Prototype",
                "desc": "Adds an event listener to each node.",
                "type": "Event Handling",
                "example": [
                    "Q(selector).on(\"click\", () => console.log(\"Clicked\"));",
                    "Q('button').on('click keypress', handleInteraction);",
                    "Q('#form').on('submit', function(e) { e.preventDefault(); });",
                    "Q('.draggable').on('mousedown', startDrag, { passive: true });"
                ],
                "dependencies": [],
                "script": "Q.Ext('on', function (events, handler, options) {\n    var defaultOptions = { capture: false, once: false, passive: false },\n        opts = Object.assign({}, defaultOptions, options),\n        eventList = events.split(' '),\n        nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        for (var j = 0, elen = eventList.length; j < elen; j++) {\n            nodes[i].addEventListener(eventList[j], handler, opts);\n        }\n    }\n    return this;\n});"
            },
            "parent": {
                "uuid": "90d90dae-cddd-4a35-9bc1-5e96d84158d7",
                "name": "parent",
                "method": "Prototype",
                "desc": "Gets the parent element of each node, optionally filtered by a selector.",
                "type": "Traversal",
                "example": [
                    "const container = Q('#element').parent();",
                    "Q('li.active').parent().addClass('has-active-item');",
                    "Q('.error-message').parent('form').addClass('has-error');",
                    "const formParent = Q('input[name=\"email\"]').parent('.form-group');"
                ],
                "dependencies": [],
                "script": "Q.Ext('parent', function () {\n    var node = this.nodes[0];\n    return new Q(node ? node.parentNode : null);\n});"
            },
            "position": {
                "uuid": "765f21f5-ef90-4cf4-bffc-95fa6360a0ef",
                "name": "position",
                "method": "Prototype",
                "desc": "Gets the position of the first node relative to its offset parent.",
                "type": "Position",
                "example": [
                    "const pos = Q('#element').position();",
                    "const { top, left } = Q('.item').position();",
                    "Q('#tooltip').css({ top: Q('#target').position().top + 20 + 'px' });",
                    "const buttonPos = Q('button').position(); console.log(`X: ${buttonPos.left}, Y: ${buttonPos.top}`);"
                ],
                "dependencies": [],
                "script": "Q.Ext('position', function () {\n    var node = this.nodes[0];\n    return {\n        top: node.offsetTop,\n        left: node.offsetLeft\n    };\n});"
            },
            "prepend": {
                "uuid": "838f43e4-dae0-4edc-b9ad-3b1e261e5837",
                "name": "prepend",
                "method": "Prototype",
                "desc": "Inserts content at the beginning of each node.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).prepend('<span>New content</span>');",
                    "Q('.list').prepend('<li>First item</li>');",
                    "const newElement = document.createElement('div'); Q('#container').prepend(newElement);",
                    "Q('.message').prepend(`<strong class=\"prefix\">${prefix}:</strong> `);"
                ],
                "dependencies": [],
                "script": "Q.Ext('prepend', function () {\n    var nodes = this.nodes,\n        contents = Array.prototype.slice.call(arguments),\n        i, j, k, parent, child, subNodes;\n    for (i = 0; i < nodes.length; i++) {\n        parent = nodes[i];\n        for (j = 0; j < contents.length; j++) {\n            child = contents[j];\n            if (typeof child === 'string') {\n                parent.insertAdjacentHTML('afterbegin', child);\n            } else if (child instanceof Q) {\n                parent.insertBefore(child.nodes[0], parent.firstChild);\n            } else if (child instanceof HTMLElement || child instanceof Node) {\n                parent.insertBefore(child, parent.firstChild);\n            } else if (Array.isArray(child) || child instanceof NodeList) {\n                subNodes = Array.from(child);\n                for (k = 0; k < subNodes.length; k++) {\n                    parent.insertBefore(subNodes[k], parent.firstChild);\n                }\n            }\n        }\n    }\n    return this;\n});"
            },
            "prev": {
                "uuid": "d88e5c3b-4f34-4fdb-9d2d-1b3d14f1bb3c",
                "name": "prev",
                "method": "Prototype",
                "desc": "Gets the previous sibling element of each node, optionally filtered by a selector.",
                "type": "Traversal",
                "example": [
                    "const previousElement = Q('#current').prev();",
                    "Q('li.active').prev().addClass('completed');",
                    "Q('.step-3').prev('.step').trigger('focus');",
                    "const prevSlide = Q('.current-slide').prev('.slide');"
                ],
                "dependencies": [],
                "script": "Q.Ext('prev', function(selector) {\n    const result = [];\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const node = this.nodes[i];\n        let previous = node.previousElementSibling;\n        if (previous && (!selector || previous.matches(selector))) {\n            result.push(previous);\n        }\n    }\n    const instance = new Q();\n    instance.nodes = result;\n    return instance;\n});"
            },
            "prop": {
                "uuid": "1e9f80c7-d1f0-4616-9ca0-c08a781fef08",
                "name": "prop",
                "method": "Prototype",
                "desc": "Gets or sets a property on the nodes.",
                "type": "Property Manipulation",
                "example": [
                    "Q(selector).prop(property, value);",
                    "Q('input[type=\"checkbox\"]').prop('checked', true);",
                    "const isDisabled = Q('#submit-button').prop('disabled');",
                    "Q('textarea').prop('readOnly', false);"
                ],
                "dependencies": [],
                "script": "Q.Ext('prop', function (property, value) {\n    var nodes = this.nodes;\n    if (value === undefined) {\n        return nodes[0] ? nodes[0][property] : null;\n    }\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i][property] = value;\n    }\n    return this;\n});"
            },
            "remove": {
                "uuid": "8e22634c-323a-450a-99c1-cbe729544ef3",
                "name": "remove",
                "method": "Prototype",
                "desc": "Removes all nodes from the DOM.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).remove();",
                    "Q('.temporary-message').remove();",
                    "Q('#confirm-dialog').fadeOut().remove();",
                    "if (shouldDelete) { Q('.deleted-items').remove(); }"
                ],
                "dependencies": [],
                "script": "Q.Ext('remove', function() {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].remove();\n    }\n    return this;\n});"
            },
            "removeAttr": {
                "uuid": "a23f38a3-15b1-49d9-8e71-daa5b8228b96",
                "name": "removeAttr",
                "method": "Prototype",
                "desc": "Removes an attribute from each node.",
                "type": "Attribute Manipulation",
                "example": [
                    "Q(selector).removeAttr(attribute);",
                    "Q('input').removeAttr('disabled');",
                    "Q('.product').removeAttr('data-id');",
                    "Q('img').removeAttr('src');"
                ],
                "dependencies": [],
                "script": "Q.Ext('removeAttr', function (attribute) {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].removeAttribute(attribute);\n    }\n    return this;\n});"
            },
            "removeClass": {
                "uuid": "5860790c-0100-4f43-83fa-aef0ac542013",
                "name": "removeClass",
                "method": "Prototype",
                "desc": "Removes the specified class from each node.",
                "type": "Class Manipulation",
                "example": [
                    "Q(selector).removeClass('highlight');",
                    "Q('.card').removeClass('active selected');",
                    "const errorClass = 'invalid'; Q('.form-input').removeClass(errorClass);",
                    "Q('.temp-element').removeClass(); // Removes all classes"
                ],
                "dependencies": [],
                "script": "Q.Ext('removeClass', function (classes) {\n    var list = classes.split(' ');\n    for (var i = 0, len = this.nodes.length; i < len; i++) {\n        this.nodes[i].classList.remove.apply(this.nodes[i].classList, list);\n    }\n    return this;\n});"
            },
            "removeData": {
                "uuid": "6719970c-77bd-477b-ac5d-b6a04b81a607",
                "name": "removeData",
                "method": "Prototype",
                "desc": "Removes a data-* attribute from each node.",
                "type": "Data Manipulation",
                "example": [
                    "Q(selector).removeData(key);",
                    "Q('.user-cards').removeData('userId');",
                    "Q('#product').removeData('price');"
                ],
                "dependencies": [],
                "script": "Q.Ext('removeData', function (key) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        delete this.nodes[i].dataset[key];\n    }\n    return this;\n});"
            },
            "removeProp": {
                "uuid": "61d49979-66f2-46f4-b147-d68806618b5c",
                "name": "removeProp",
                "method": "Prototype",
                "desc": "Removes a property from each node.",
                "type": "Property Manipulation",
                "example": [
                    "Q(selector).removeProp(property);",
                    "Q('.elements').removeProp('customProperty');",
                    "Q('#form-elements').removeProp('validated');"
                ],
                "dependencies": [],
                "script": "Q.Ext('removeProp', function (property) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        delete this.nodes[i][property];\n    }\n    return this;\n});"
            },
            "removeTransition": {
                "uuid": "4f1a2fa3-7bac-4a1b-b03a-ce303097ab33",
                "name": "removeTransition",
                "method": "Prototype",
                "desc": "Removes the transition from each node.",
                "type": "Display",
                "example": [
                    "Q(selector).removeTransition();",
                    "Q('.animated-elements').removeTransition();",
                    "Q('#modal').removeTransition().hide();"
                ],
                "dependencies": [],
                "script": "Q.Ext('removeTransition', function () {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].style.transition = '';\n    }\n    return this;\n});"
            },
            "scrollHeight": {
                "uuid": "54171453-6665-44ff-94fe-c1b608307093",
                "name": "scrollHeight",
                "method": "Prototype",
                "desc": "Returns the scroll height of the first node.",
                "type": "Dimensions",
                "example": [
                    "const height = Q('#content').scrollHeight();",
                    "if (Q('.panel').scrollHeight() > Q('.panel').height()) { /* content is overflowing */ }",
                    "const totalHeight = Q('#long-text').scrollHeight();",
                    "const scrollPercentage = Q('#container').scrollTop() / (Q('#container').scrollHeight() - Q('#container').height());"
                ],
                "dependencies": [],
                "script": "Q.Ext('scrollHeight', function () {\n    var node = this.nodes[0];\n    return node.scrollHeight;\n});"
            },
            "scrollLeft": {
                "uuid": "5e67928a-079a-4ddf-b3a5-15d0eea5c8d7",
                "name": "scrollLeft",
                "method": "Prototype",
                "desc": "Gets or sets the horizontal scroll position of the first node, with an option to increment.",
                "type": "Scroll Manipulation",
                "example": [
                    "const position = Q('.scrollable').scrollLeft();",
                    "Q('#horizontal-container').scrollLeft(200);",
                    "Q('.slider').scrollLeft(50, true); // Increment by 50px",
                    "const scrollAmount = 100; Q('.carousel').scrollLeft(scrollAmount, true);"
                ],
                "dependencies": [],
                "script": "Q.Ext('scrollLeft', function (value, increment) {\n    const node = this.nodes[0];\n    if (value === undefined) {\n        return node.scrollLeft;\n    }\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const current = this.nodes[i];\n        const maxScrollLeft = current.scrollWidth - current.clientWidth;\n        current.scrollLeft = increment \n            ? Math.min(current.scrollLeft + value, maxScrollLeft) \n            : Math.min(value, maxScrollLeft);\n    }\n    return this;\n});"
            },
            "scrollTop": {
                "uuid": "4c70bc20-f33a-472a-8e88-d677ddd4c528",
                "name": "scrollTop",
                "method": "Prototype",
                "desc": "Gets or sets the vertical scroll position of the first node, with an option to increment.",
                "type": "Scroll Manipulation",
                "example": [
                    "const position = Q('#container').scrollTop();",
                    "Q('.scroll-area').scrollTop(300);",
                    "Q('#content').scrollTop(100, true); // Increment by 100px",
                    "const scrollAmount = 50; Q('.panel').scrollTop(scrollAmount, true);"
                ],
                "dependencies": [],
                "script": "Q.Ext('scrollTop', function (value, increment) {\n    const node = this.nodes[0];\n    if (value === undefined) {\n        return node.scrollTop;\n    }\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const current = this.nodes[i];\n        const maxScrollTop = current.scrollHeight - current.clientHeight;\n        current.scrollTop = increment \n            ? Math.min(current.scrollTop + value, maxScrollTop) \n            : Math.min(value, maxScrollTop);\n    }\n    return this;\n});"
            },
            "scrollWidth": {
                "uuid": "c0963769-a9f5-4c8b-ac50-1a34d629084a",
                "name": "scrollWidth",
                "method": "Prototype",
                "desc": "Returns the scroll width of the first node.",
                "type": "Dimensions",
                "example": [
                    "const width = Q('#content').scrollWidth();",
                    "if (Q('.panel').scrollWidth() > Q('.panel').width()) { /* content is overflowing */ }",
                    "const scrollableWidth = Q('#scrollable-area').scrollWidth();",
                    "const scrollPercentage = Q('#container').scrollLeft() / (Q('#container').scrollWidth() - Q('#container').width());"
                ],
                "dependencies": [],
                "script": "Q.Ext('scrollWidth', function () {\n    var node = this.nodes[0];\n    return node.scrollWidth;\n});"
            },
            "show": {
                "uuid": "a6acc70b-3fa2-4e08-8ee8-7796aa77c650",
                "name": "show",
                "method": "Prototype",
                "desc": "Shows each node, optionally with a fade-in effect over a specified duration.",
                "type": "Display",
                "example": [
                    "Q(selector).show();",
                    "Q('#modal').show(500);",
                    "Q('.notification').show(300, () => console.log('Animation completed'));",
                    "const fadeTime = 800; Q('.hidden-content').show(fadeTime);"
                ],
                "dependencies": [],
                "script": "Q.Ext('show', function (duration = 0, callback) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const element = this.nodes[i];\n        if (duration === 0) {\n            element.style.display = '';\n            if (callback) callback();\n        } else {\n            element.style.transition = `opacity ${duration}ms`;\n            element.style.opacity = 0;\n            element.style.display = '';\n            setTimeout(() => {\n                element.style.opacity = 1;\n                element.addEventListener('transitionend', () => {\n                    element.style.transition = '';\n                    if (callback) callback();\n                }, { once: true });\n            }, 0);\n        }\n    }\n    return this;\n});"
            },
            "siblings": {
                "uuid": "39e2d3ed-fcd7-4772-8af4-9d05b9ae7d64",
                "name": "siblings",
                "method": "Prototype",
                "desc": "Gets all sibling elements of each node, optionally filtered by a selector.",
                "type": "Traversal",
                "example": [
                    "const allSiblings = Q('#middle').siblings();",
                    "Q('.active').siblings().removeClass('active');",
                    "Q('li.selected').siblings('li.optional').hide();",
                    "const siblingLinks = Q('.current-page').siblings('a');"
                ],
                "dependencies": [],
                "script": "Q.Ext('siblings', function(selector) {\n    const result = [];\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const node = this.nodes[i];\n        const parent = node.parentNode;\n        if (parent) {\n            const children = parent.children;\n            for (let j = 0; j < children.length; j++) {\n                if (children[j] !== node) {\n                    if (!selector || children[j].matches(selector)) {\n                        result.push(children[j]);\n                    }\n                }\n            }\n        }\n    }\n    const instance = new Q();\n    instance.nodes = result;\n    return instance;\n});"
            },
            "size": {
                "uuid": "05f55cfc-beeb-4f28-aefb-ff39be069493",
                "name": "size",
                "method": "Prototype",
                "desc": "Returns the width and height of the first node.",
                "type": "Dimensions",
                "example": [
                    "const dimensions = Q('#box').size();",
                    "const { width, height } = Q('.container').size();",
                    "if (Q('#element').size().width > 500) { /* logic here */ }",
                    "const ratio = Q('.image').size().width / Q('.image').size().height;"
                ],
                "dependencies": [],
                "script": "Q.Ext('size', function () {\n    const node = this.nodes[0];\n\treturn {\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n});"
            },
            "text": {
                "uuid": "8f37c8fc-7b18-412a-ba80-119971e5d963",
                "name": "text",
                "method": "Prototype",
                "desc": "Gets or sets the text content of the nodes.",
                "type": "Content Manipulation",
                "example": [
                    "Q(selector).text(string);",
                    "const message = Q('#notification').text();",
                    "Q('.error').text('An error occurred');",
                    "Q('li').text(function(i) { return `Item ${i+1}`; });"
                ],
                "dependencies": [],
                "script": "Q.Ext('text', function (content) {\n    if (content === undefined) {\n        return this.nodes[0]?.textContent || null;\n    }\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].textContent = content;\n    }\n    return this;\n});"
            },
            "toggle": {
                "uuid": "c52c177c-e19c-4102-8dba-592c1c8e53c3",
                "name": "toggle",
                "method": "Prototype",
                "desc": "Toggles the display of each node.",
                "type": "Display",
                "example": [
                    "Q(selector).toggle();",
                    "Q('#details').toggle();",
                    "Q('.expandable').click(function() { Q(this).next().toggle(); });",
                    "const panels = Q('.panel'); panels.toggle();"
                ],
                "dependencies": [],
                "script": "Q.Ext('toggle', function () {\n    var nodes = this.nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n        nodes[i].style.display = (nodes[i].style.display === 'none' ? '' : 'none');\n    }\n    return this;\n});"
            },
            "toggleClass": {
                "uuid": "5ff1aea0-a9b6-453c-b1b3-64e0ce99028a",
                "name": "toggleClass",
                "method": "Prototype",
                "desc": "Toggles a class on each node.",
                "type": "Class Manipulation",
                "example": [
                    "Q(selector).toggleClass('active');",
                    "Q('#menu-button').toggleClass('open');",
                    "const highlightClass = 'highlight'; Q('.selectable').toggleClass(highlightClass);",
                    "Q(event.target).toggleClass('selected').siblings().toggleClass('dimmed');"
                ],
                "dependencies": [],
                "script": "Q.Ext('toggleClass', function (className) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].classList.toggle(className);\n    }\n    return this;\n});"
            },
            "trigger": {
                "uuid": "51d83b08-cae1-43e2-8b55-e61ae299c64f",
                "name": "trigger",
                "method": "Prototype",
                "desc": "Triggers a specific event on each node.",
                "type": "Event Handling",
                "example": [
                    "Q('#submitButton').trigger('click');",
                    "Q('.accordion-header').trigger('mouseenter');",
                    "const eventName = 'change'; Q('input').trigger(eventName);",
                    "Q('.custom-element').trigger('customEvent');"
                ],
                "dependencies": [],
                "script": "Q.Ext('trigger', function (event) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].dispatchEvent(new Event(event));\n    }\n    return this;\n});"
            },
            "unwrap": {
                "uuid": "68da9ffa-504d-43f3-b546-495dedf22c4d",
                "name": "unwrap",
                "method": "Prototype",
                "desc": "Removes the parent wrapper of each node.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).unwrap();",
                    "Q('span.highlight').unwrap();",
                    "Q('.inner-content').unwrap().addClass('standalone');",
                    "if (shouldRemoveWrapper) { Q('.wrapped-items').unwrap(); }"
                ],
                "dependencies": [],
                "script": "Q.Ext('unwrap', function () {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const el = this.nodes[i];\n        const parent = el.parentNode;\n        if (parent && parent !== document.body) {\n            parent.replaceWith(...parent.childNodes);\n        }\n    }\n    return this;\n});"
            },
            "val": {
                "uuid": "7d261f58-bc62-41d6-951d-a0692838e639",
                "name": "val",
                "method": "Prototype",
                "desc": "Gets or sets the value of form elements in the nodes.",
                "type": "Form Manipulation",
                "example": [
                    "Q('input').val('New text');",
                    "const username = Q('#username').val();",
                    "Q('select').val('option2');",
                    "Q('textarea').val('').val(Q('#template').text());"
                ],
                "dependencies": [],
                "script": "Q.Ext('val', function(input) {\n    if (input === undefined) return this.nodes[0]?.value || null;\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].value = input;\n    }\n    return this;\n});"
            },
            "wait": {
                "uuid": "123c7bcf-c89f-418f-9eab-7d33e8ccdf43",
                "name": "wait",
                "method": "Prototype",
                "desc": "Returns a promise that resolves after a given time. Useful for delaying actions.",
                "type": "Utility",
                "example": [
                    "Q('.text').wait(1000).text('Hello, World!');",
                    "async function animate() { await Q('#element').addClass('start').wait(500).addClass('end'); }",
                    "Q('.notification').show().wait(3000).then(q => q.hide());",
                    "const delay = 800; Q('.message').fadeIn().wait(delay).fadeOut();"
                ],
                "dependencies": [],
                "script": "Q.Ext('wait', function(ms) {\n\treturn new Promise(resolve => setTimeout(() => resolve(this), ms));\n});"
            },
            "walk": {
                "uuid": "5ff5252d-55d0-43c5-a14e-8cb14786682e",
                "name": "walk",
                "method": "Prototype",
                "desc": "Walks through all nodes in the Q object and executes a callback on each node, passing the current node as a Q object or raw element based on the boolean parameter.",
                "type": "Iteration",
                "example": [
                    "Q(selector).walk((node) => console.log(node));",
                    "Q('li').walk((node, index) => node.textContent = `Item ${index + 1}`);",
                    "Q('.items').walk((node) => node.classList.add('processed'), true);",
                    "let total = 0; Q('input').walk((node) => total += parseInt(node.value) || 0);"
                ],
                "dependencies": [],
                "script": "Q.Ext('walk', function (callback, useQObject = false) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const node = useQObject ? Q(this.nodes[i]) : this.nodes[i];\n        callback.call(this.nodes[i], node, i);\n    }\n    return this;\n});"
            },
            "width": {
                "uuid": "c93f0e4e-f6d1-4d21-820c-1c96a327d5a0",
                "name": "width",
                "method": "Prototype",
                "desc": "Gets or sets the width of the first node.",
                "type": "Dimensions",
                "example": [
                    "Q(selector).width();",
                    "Q('#content').width('500px');",
                    "const elemWidth = Q('.box').width();",
                    "Q('.column').width('50%');"
                ],
                "dependencies": [],
                "script": "Q.Ext('width', function (value) {\n    if (typeof value === 'undefined') {\n        return this.nodes[0] ? this.nodes[0].offsetWidth : undefined;\n    }\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].style.width = value;\n    }\n    return this;\n});"
            },
            "wrap": {
                "uuid": "676b1f3f-066d-4d66-ae04-27d0fe7e2758",
                "name": "wrap",
                "method": "Prototype",
                "desc": "Wraps each node with the specified wrapper element.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).wrap(\"<div class='wrapper'></div>\");",
                    "Q('p').wrap('<article class=\"content\"></article>');",
                    "const wrapperDiv = document.createElement('div');",
                    "Q('.list-item').wrap(wrapperDiv);"
                ],
                "dependencies": [],
                "script": "Q.Ext('wrap', function (wrapper) {\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        const node = this.nodes[i];\n        const parent_Node = node.parentNode;\n        let newParentElement;\n        if (typeof wrapper === 'string') {\n            const tempDiv = document.createElement('div');\n            tempDiv.innerHTML = wrapper.trim();\n            newParentElement = tempDiv.firstElementChild.cloneNode(true);\n        } else {\n            newParentElement = wrapper;\n        }\n        parent_Node.insertBefore(newParentElement, node);\n        newParentElement.appendChild(node);\n    }\n    return this;\n});"
            },
            "wrapAll": {
                "uuid": "8a09d2c6-9fc9-48ce-81fd-362304b86bc9",
                "name": "wrapAll",
                "method": "Prototype",
                "desc": "Wraps all nodes together in a single wrapper element.",
                "type": "DOM Manipulation",
                "example": [
                    "Q(selector).wrapAll(\"<div class='wrapper'></div>\");",
                    "Q('.items').wrapAll('<section id=\"container\"></section>');",
                    "const wrapperElement = document.createElement('div');",
                    "Q('.related-posts').wrapAll(wrapperElement);"
                ],
                "dependencies": [],
                "script": "Q.Ext('wrapAll', function (wrapper) {\n    if (!this.nodes.length) return this;\n    const parent = this.nodes[0].parentNode;\n    let newParent = typeof wrapper === 'string'\n        ? ((tempDiv => (tempDiv.innerHTML = wrapper.trim(), tempDiv.firstElementChild))\n           (document.createElement('div')))\n        : wrapper;\n    parent.insertBefore(newParent, this.nodes[0]);\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        newParent.appendChild(this.nodes[i]);\n    }\n    return this;\n});"
            },
            "zIndex": {
                "uuid": "b7303e03-9d96-4903-95c1-8df67d8b3c62",
                "name": "zIndex",
                "method": "Prototype",
                "desc": "Gets or sets the z-index of the first node.",
                "type": "Display",
                "example": [
                    "Q(selector).zIndex();",
                    "Q('.overlay').zIndex(10);",
                    "const currentIndex = Q('#popup').zIndex();",
                    "Q('.modal').zIndex(Q('.header').zIndex() + 5);"
                ],
                "dependencies": [],
                "script": "Q.Ext('zIndex', function (value) {\n    const node = this.nodes[0];\n    if (!node) return;\n    if (value === undefined) {\n        let Index = node.style.zIndex || window.getComputedStyle(node).zIndex;\n        return Index;\n    }\n    for (let i = 0, n = this.nodes.length; i < n; i++) {\n        this.nodes[i].style.zIndex = value;\n    }\n    return this;\n});"
            }
        },
        "plugins": {
            "Form.Button": {
                "uuid": "7345189e-41da-4f55-8e1b-1cbd65a73f00",
                "name": "Form.Button",
                "method": "Component",
                "desc": "Button component for Form plugin",
                "type": "Component",
                "example": [
                    "var btn = Q.Form.Button('Click me');",
                    "var btn = Q.Form.Button('Save').click(function(){ alert('Saved!'); });",
                    "var btn = Q.Form.Button('Disabled'); btn.disabled(true);",
                    "var btn = Q.Form.Button('Text'); btn.setText('New text');"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "text",
                    "click"
                ],
                "script": "Form.prototype.Button = function(text = '') {\n    if (!Form.buttonClassesInitialized) {\n        Form.buttonClasses = Q.style(null, `\n            .button {\n                user-select: none;\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                background-color: var(--form-default-background);\n                color: var(--form-default-text-color);\n                border-radius: var(--form-default-border-radius);\n                padding: var(--form-default-padding);\n            }\n            .button:hover {\n                background-color: var(--form-default-background-hover);\n                color: var(--form-default-text-color-hover);\n            }\n            .button:active {\n                background-color: var(--form-default-background-active);\n                color: var(--form-default-text-color-active);\n            }\n            .button_disabled {\n                opacity: 0.6;\n                cursor: not-allowed;\n            }\n        `, null, {\n            'button_disabled': 'button_disabled',\n            'button': 'button'\n        });\n        Form.buttonClassesInitialized = true;\n    }\n    const button = Q(`<div class=\"${Form.buttonClasses.button}\">${text}</div>`);\n    button.click = function(callback) {\n        button.on('click', callback);\n        return button;\n    };\n    button.disabled = function(state) {\n        if (state) {\n            button.addClass(Form.buttonClasses.button_disabled);\n        } else {\n            button.removeClass(Form.buttonClasses.button_disabled);\n        }\n        return button;\n    };\n    button.setText = function(newText) {\n        button.text(newText);\n        return button;\n    };\n    button.remove = function() {\n        button.remove();\n        return button;\n    };\n    this.elements.push(button);\n    this.FX_Ripple(button);\n    return button;\n};"
            },
            "Form.CheckBox": {
                "uuid": "eac2f102-b8b3-4a6e-ae97-92237327a90d",
                "name": "Form.CheckBox",
                "method": "Component",
                "desc": "CheckBox component for Form plugin",
                "type": "Component",
                "example": [
                    "var cb = Q.Form.CheckBox();",
                    "var cb = Q.Form.CheckBox(true, 'I accept the terms');",
                    "var cb = Q.Form.CheckBox(false, 'Newsletter').change(function(checked){ console.log('State:', checked); });",
                    "var cb = Q.Form.CheckBox(); cb.checked(true);",
                    "var cb = Q.Form.CheckBox(); cb.disabled(true);",
                    "var cb = Q.Form.CheckBox(); cb.text('New label');"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "append",
                    "prop",
                    "trigger",
                    "text"
                ],
                "script": "Form.prototype.CheckBox = function(checked = false, text = '') {\n    if (!Form.checkBoxClassesInitialized) {\n        Form.checkBoxClasses = Q.style('', `\n            .form_checkbox {\n                display: flex;\n                width: fit-content;\n                align-items: center;\n            }\n            .form_checkbox .form_label:empty {\n                display: none;\n            }\n            .form_checkbox .form_label {\n                padding-left: 5px;\n                user-select: none;\n            }\n            .form_checkbox_element {\n                position: relative;\n                width: 20px;\n                height: 20px;\n                background-color: var(--form-default-background);\n                border-radius: var(--form-default-border-radius);\n                cursor: pointer;\n            }\n            .form_checkbox_element.checked:before {\n                content: \"\";\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background-color: var(--form-default-accent-color);\n                border-radius: var(--form-default-border-radius);\n            }\n            .form_label {\n                padding-left: 5px;\n                color: var(--form-default-text-color);\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n            }\n            .form_checkbox_element.disabled {\n                opacity: 0.5;\n                pointer-events: none;\n            }\n        `, null, {\n            'form_checkbox': 'form_checkbox',\n            'form_checkbox_element': 'form_checkbox_element',\n            'form_label': 'form_label',\n            'disabled': 'disabled',\n            'checked': 'checked'\n        });\n        Form.checkBoxClassesInitialized = true;\n    }\n    let ID = '_' + Q.ID();\n    const container = Q('<div class=\"' + Form.checkBoxClasses.form_checkbox + '\">');\n    const checkbox_container = Q('<div class=\"' + Form.checkBoxClasses.form_checkbox_element + '\">');\n    const labeltext = Q('<div class=\"' + Form.checkBoxClasses.form_label + '\">' + text + '</div>');\n    if (checked) {\n        checkbox_container.addClass(Form.checkBoxClasses['checked']);\n    }\n    checkbox_container.on('click', function(){\n        if (!checkbox_container.hasClass(Form.checkBoxClasses['disabled'])) {\n            const newState = !checkbox_container.hasClass(Form.checkBoxClasses['checked']);\n            checkbox_container.toggleClass(Form.checkBoxClasses['checked'], newState);\n            if (container._changeCallback) {\n                container._changeCallback(newState);\n            }\n        }\n    });\n    container.append(checkbox_container, labeltext);\n    container.checked = function(state) {\n        checkbox_container.toggleClass(Form.checkBoxClasses['checked'], state);\n        if (state && container._changeCallback) {\n            container._changeCallback(state);\n        }\n    };\n    container.change = function(callback) {\n        container._changeCallback = callback;\n    };\n    container.disabled = function(state) {\n        if (state) {\n            checkbox_container.addClass(Form.checkBoxClasses['disabled']);\n            container.addClass(Form.classes.form_disabled);\n        } else {\n            checkbox_container.removeClass(Form.checkBoxClasses['disabled']);\n            container.removeClass(Form.classes.form_disabled);\n        }\n    };\n    container.text = function(newText) {\n        labeltext.text(newText);\n    };\n    this.elements.push(container);\n    return container;\n};"
            },
            "Form.ColorPicker": {
                "uuid": "28e75b02-e8d5-4dba-8fda-1508efaeaabf",
                "name": "Form.ColorPicker",
                "method": "Component",
                "desc": "Photoshop-like Color Picker component for Form plugin. Renders a canvas with an outer detail (24\u2013color) ring, a full\u2013rainbow middle ring, and an inner triangle for selecting saturation and brightness by mixing the selected hue with white and black.",
                "type": "Component",
                "example": [
                    "var cp = Q.Form.ColorPicker();",
                    "var cp = Q.Form.ColorPicker({ color: '#00FF00' });",
                    "var cp = Q.Form.ColorPicker({ width: 400, height: 400 });",
                    "var cp = Q.Form.ColorPicker().change(function(color){ console.log('Color changed:', color); });",
                    "var cp = Q.Form.ColorPicker(); cp.val('#123456');"
                ],
                "dependencies": [
                    "Form",
                    "canvas",
                    "on",
                    "attr",
                    "val",
                    "Debounce"
                ],
                "script": "Form.prototype.ColorPicker = function (options = {}) {\n    if (!Form.ColorPickerClassesInitialized) {\n        Form.colorPickerClasses = Q.style('', `\n            .q_form_color_picker_wrapper {\n                display: flex;\n                width: 100%;\n                height: 100%;\n                align-items: stretch;\n                justify-content: space-between;\n            }\n            .left_wrapper {\n                flex: 1;\n                width: 100%;\n                height: 100%;\n                display: flex;\n            }\n            .right_wrapper {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                padding: 5px;\n            }\n            .section_snatches, .section_second, .section_third, .section_fourth {\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n            }\n            .sections {\n                display: grid;\n                grid-template-columns: repeat(2, 1fr);\n                gap: 2px;\n                flex: 1;\n            }\n            .color_picker_input {\n                background-color: var(--form-default-background);\n                border-radius: var(--form-default-border-radius);\n                padding: 2px;\n                margin: 2px;\n                color: var(--form-default-text-color);\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                outline: var(--form-default-outline);\n                border: 0;\n                width: 45px;\n                text-align: center;\n            }\n            .input_rgb888, .input_rgb565, .input_hsl\n            {\n            width: 100%;\n            }\n            .color_picker_input:focus {\n                outline: none;\n                background-color: var(--form-default-background-focus);\n                outline: var(--form-default-outline-focus);\n            }\n            /* Hide spinner buttons for number inputs */\n            .color_picker_input[type=\"number\"]::-webkit-inner-spin-button,\n            .color_picker_input[type=\"number\"]::-webkit-outer-spin-button {\n                -webkit-appearance: none;\n                margin: 0;\n            }\n            /* Firefox */\n            .color_picker_input[type=\"number\"] {\n                -moz-appearance: textfield;\n            }\n            .input_wrapper {\n                display: flex;\n                align-items: center;\n            }\n            .half_snatch {\n                height: 50%;\n                width: 100%;\n        }\n        .picker_blocks {\n        background: rgba(0, 0, 0, 0.1);\n        border-radius: var(--form-default-border-radius);\n        padding: 5px;\n        margin: 2px;\n        }\n            .input_snatches {\n            width:40px;\n            height:40px;\n            border-radius: 10px;\n            background-color: var(--form-default-background);\n            color: var(--form-default-text-color);\n            font-family: var(--form-default-font-family);\n            font-size: var(--form-default-font-size);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .snatches_wrapper {\n    display: grid;\n    grid-template-columns: repeat(6, 1fr);\n    justify-items: center;\n        }\n        .input_snatch_wrapper {\n            display: flex;\n            flex-direction: column;\n            width: 40px;\n            height: 40px;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n            .input_prefix {\n            user-select: none;\n                width: 20px;\n                font-size: var(--form-default-font-size);\n                color: var(--form-default-text-color);\n                display:block;\n            }\n            .input_suffix {\n            user-select: none;\n                margin-left: 5px;\n                font-size: var(--form-default-font-size);\n                color: var(--form-default-text-color);\n                display:block;\n            }\n            .block_header {\n            user-select: none;\n                font-weight: bold;\n                color: var(--form-default-text-color);\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                text-align: center;\n                grid-column: 1 / -1;\n            }\n            .snatches_add {\n            cursor: pointer;\n            user-select: none;\n            }\n            `, null, {\n            'sections': 'sections',\n            'q_form_color_picker_wrapper': 'q_form_color_picker_wrapper',\n            'left_wrapper': 'left_wrapper',\n            'right_wrapper': 'right_wrapper',\n            'color_picker_input': 'color_picker_input',\n            'input_wrapper': 'input_wrapper',\n            'input_prefix': 'input_prefix',\n            'input_suffix': 'input_suffix',\n            'section_snatches': 'section_snatches',\n            'section_first': 'section_first',\n            'section_second': 'section_second',\n            'section_third': 'section_third',\n            'section_fourth': 'section_fourth',\n            'input_snatches': 'input_snatches',\n            'input_snatch_wrapper': 'input_snatch_wrapper',\n            'half_snatch': 'half_snatch',\n            'block_hsb': 'block_hsb',\n            'block_rgb': 'block_rgb',\n            'block_lab': 'block_lab',\n            'block_cmyk': 'block_cmyk',\n            'block_rgb888': 'block_rgb888',\n            'block_rgb565': 'block_rgb565',\n            'block_rgb': 'block_rgb',\n            'block_hex': 'block_hex',\n            'block_hsl': 'block_hsl',\n            'input_h': 'input_h',\n            'input_s': 'input_s',\n            'input_b': 'input_b',\n            'input_r': 'input_r',\n            'input_g': 'input_g',\n            'input_b2': 'input_b2',\n            'input_l': 'input_l',\n            'input_a': 'input_a',\n            'input_b3': 'input_b3',\n            'input_c': 'input_c',\n            'input_m': 'input_m',\n            'input_y': 'input_y',\n            'input_k': 'input_k',\n            'input_rgb888': 'input_rgb888',\n            'input_rgb565': 'input_rgb565',\n            'input_rgb': 'input_rgb',\n            'input_hex': 'input_hex',\n            'input_hsl': 'input_hsl',\n            'input_lab': 'input_lab',\n            'input_cmyk': 'input_cmyk',\n            'block_header': 'block_header',\n            'snatches_wrapper': 'snatches_wrapper',\n            'picker_blocks': 'picker_blocks',\n            'snatches_add': 'snatches_add'\n        }, false);\n        Form.ColorPickerClassesInitialized = true;\n    }\n    const width = options.width || 300;\n    const height = options.height || 300;\n    const showDetails = options.showDetails !== undefined ? options.showDetails : true;\n    const initialColor = options.color || '#FF0000';\n    const wrapper = Q('<div>');\n    const canvas = Q(`<canvas width=\"${width}\" height=\"${height}\"></canvas>`);\n    let current_color, previous_color, input_h, input_s, input_b, input_r, input_g, input_b2, input_l, input_a, input_b3, input_c, input_m, input_y, input_k, input_rgb888, input_rgb565, input_rgb, input_hex, input_hsl, input_lab, input_cmyk;\n    let snatches = [];\n    if (showDetails) {\n        canvas.css({\n            'width': '100%',\n            'height': '100%',\n        });\n        wrapper.addClass(Form.colorPickerClasses.q_form_color_picker_wrapper);\n        const left_wrapper = Q('<div>', { class: Form.colorPickerClasses.left_wrapper });\n        const right_wrapper = Q('<div>', { class: Form.colorPickerClasses.right_wrapper });\n        const snatches_wrapper = Q('<div>', { class: Form.colorPickerClasses.snatches_wrapper + ' ' + Form.colorPickerClasses.picker_blocks });\n        const section_snatches = Q('<div>', { class: Form.colorPickerClasses.section_snatches });\n        const section_first = Q('<div>', { class: Form.colorPickerClasses.section_first });\n        const section_second = Q('<div>', { class: Form.colorPickerClasses.section_second + ' ' + Form.colorPickerClasses.sections });\n        const section_third = Q('<div>', { class: Form.colorPickerClasses.section_third + ' ' + Form.colorPickerClasses.sections });\n        const section_fourth = Q('<div>', { class: Form.colorPickerClasses.section_fourth + ' ' + Form.colorPickerClasses.sections });\n        const block_hsb = Q('<div>', { class: Form.colorPickerClasses.block_hsb + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_rgb = Q('<div>', { class: Form.colorPickerClasses.block_rgb + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_lab = Q('<div>', { class: Form.colorPickerClasses.block_lab + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_cmyk = Q('<div>', { class: Form.colorPickerClasses.block_cmyk + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_rgb888 = Q('<div>', { class: Form.colorPickerClasses.block_rgb888 + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_rgb565 = Q('<div>', { class: Form.colorPickerClasses.block_rgb565 + ' ' + Form.colorPickerClasses.picker_blocks });\n        const block_hsl = Q('<div>', { class: Form.colorPickerClasses.block_hsl + ' ' + Form.colorPickerClasses.picker_blocks });\n        const header_hsb = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'HSB Color'\n        });\n        const header_rgb = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'RGB Color'\n        });\n        const header_lab = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'LAB Color'\n        });\n        const header_cmyk = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'CMYK Color'\n        });\n        const header_rgb888 = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'RGB888'\n        });\n        const header_rgb565 = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'RGB565'\n        });\n        const header_hsl = Q('<div>', {\n            class: Form.colorPickerClasses.block_header,\n            text: 'HSL Color'\n        });\n        const createInputWithLabel = (type, className, value, min, max, prefix, suffix) => {\n            const wrapper = Q('<div>', { class: Form.colorPickerClasses.input_wrapper });\n            const prefixElement = Q('<span>', { class: Form.colorPickerClasses.input_prefix, text: prefix });\n            const input = Q('<input>', {\n                type: type,\n                class: Form.colorPickerClasses.color_picker_input + ' ' + className,\n                value: value\n            });\n            if (type === 'number') {\n                input.attr('min', min);\n                input.attr('max', max);\n            } else if (type === 'text') {\n                input.attr('maxlength', max || 20);\n            }\n            wrapper.append(prefixElement, input);\n            if (suffix) {\n                const suffixElement = Q('<span>', { class: Form.colorPickerClasses.input_suffix, text: suffix });\n                wrapper.append(suffixElement);\n            }\n            return { wrapper, input };\n        };\n        const snatch_add = Q('<div>', { class: Form.colorPickerClasses.input_snatches + ' ' + Form.colorPickerClasses.snatches_add, text: '+' });\n        const snatch_1 = Q('<div>', { class: Form.colorPickerClasses.input_snatches});\n        const snatch_2 = Q('<div>', { class: Form.colorPickerClasses.input_snatches});\n        const snatch_3 = Q('<div>', { class: Form.colorPickerClasses.input_snatches});\n        const snatch_4 = Q('<div>', { class: Form.colorPickerClasses.input_snatches});\n        const snatch_prev_current_wrapper = Q('<div>', { class: Form.colorPickerClasses.input_snatch_wrapper });\n        current_color = Q('<div>', { class: Form.colorPickerClasses.half_snatch });\n        previous_color = Q('<div>', { class: Form.colorPickerClasses.half_snatch });\n        snatch_prev_current_wrapper.append(current_color,previous_color);\n        snatches = [snatch_1, snatch_2, snatch_3, snatch_4];\n        snatches.forEach(slot => slot.on('click', () => {\n            const col = slot.css('background-color');\n            if (col) wrapper.val(col);\n        }));\n        snatch_add.on('click', () => {\n            for (let i = snatches.length - 1; i > 0; i--) {\n                snatches[i].css('background-color', snatches[i - 1].css('background-color'));\n            }\n            snatches[0].css('background-color', current_color.css('background-color'));\n        });\n        const input_h_obj = createInputWithLabel('number', Form.colorPickerClasses.input_h, 0, 0, 360, 'H:', '\u00b0');\n        const input_s_obj = createInputWithLabel('number', Form.colorPickerClasses.input_s, 0, 0, 100, 'S:', '%');\n        const input_b_obj = createInputWithLabel('number', Form.colorPickerClasses.input_b, 0, 0, 100, 'B:', '%');\n        const input_r_obj = createInputWithLabel('number', Form.colorPickerClasses.input_r, 0, 0, 255, 'R:');\n        const input_g_obj = createInputWithLabel('number', Form.colorPickerClasses.input_g, 0, 0, 255, 'G:');\n        const input_b2_obj = createInputWithLabel('number', Form.colorPickerClasses.input_b2, 0, 0, 255, 'B:');\n        const input_l_obj = createInputWithLabel('number', Form.colorPickerClasses.input_l, 0, 0, 100, 'L:');\n        const input_a_obj = createInputWithLabel('number', Form.colorPickerClasses.input_a, 0, -128, 127, 'a:');\n        const input_b3_obj = createInputWithLabel('number', Form.colorPickerClasses.input_b3, 0, -128, 127, 'b:');\n        const input_c_obj = createInputWithLabel('number', Form.colorPickerClasses.input_c, 0, 0, 100, 'C:', '%');\n        const input_m_obj = createInputWithLabel('number', Form.colorPickerClasses.input_m, 0, 0, 100, 'M:', '%');\n        const input_y_obj = createInputWithLabel('number', Form.colorPickerClasses.input_y, 0, 0, 100, 'Y:', '%');\n        const input_k_obj = createInputWithLabel('number', Form.colorPickerClasses.input_k, 0, 0, 100, 'K:', '%');\n        const input_rgb888_obj = createInputWithLabel('text', Form.colorPickerClasses.input_rgb888, '0x000000', null, 8, '888:');\n        const input_rgb565_obj = createInputWithLabel('text', Form.colorPickerClasses.input_rgb565, '0x0000', null, 6, '565:');\n        const input_rgb_obj = createInputWithLabel('text', Form.colorPickerClasses.input_rgb, 'rgb(0,0,0)', null, 20, 'RGB:');\n        const input_hex_obj = createInputWithLabel('text', Form.colorPickerClasses.input_hex, '#000000', null, 7, 'Hex:');\n        const input_hsl_obj = createInputWithLabel('text', Form.colorPickerClasses.input_hsl, 'hsl(0,0%,0%)', null, 20, 'HSL:');\n        const input_lab_obj = createInputWithLabel('text', Form.colorPickerClasses.input_lab, 'lab(0,0,0)', null, 20, 'LAB:');\n        const input_cmyk_obj = createInputWithLabel('text', Form.colorPickerClasses.input_cmyk, 'cmyk(0%,0%,0%,0%)', null, 20, 'CMYK:');\n        input_h = input_h_obj.input;\n        input_s = input_s_obj.input;\n        input_b = input_b_obj.input;\n        input_r = input_r_obj.input;\n        input_g = input_g_obj.input;\n        input_b2 = input_b2_obj.input;\n        input_l = input_l_obj.input;\n        input_a = input_a_obj.input;\n        input_b3 = input_b3_obj.input;\n        input_c = input_c_obj.input;\n        input_m = input_m_obj.input;\n        input_y = input_y_obj.input;\n        input_k = input_k_obj.input;\n        input_rgb888 = input_rgb888_obj.input;\n        input_rgb565 = input_rgb565_obj.input;\n        input_rgb = input_rgb_obj.input;\n        input_hex = input_hex_obj.input;\n        input_hsl = input_hsl_obj.input;\n        input_lab = input_lab_obj.input;\n        input_cmyk = input_cmyk_obj.input;\n        function setupInputListeners() {\n            input_h.on('input', updateFromHSB);\n            input_s.on('input', updateFromHSB);\n            input_b.on('input', updateFromHSB);\n            input_r.on('input', updateFromRGB);\n            input_g.on('input', updateFromRGB);\n            input_b2.on('input', updateFromRGB);\n            input_l.on('input', updateFromLAB);\n            input_a.on('input', updateFromLAB);\n            input_b3.on('input', updateFromLAB);\n            input_c.on('input', updateFromCMYK);\n            input_m.on('input', updateFromCMYK);\n            input_y.on('input', updateFromCMYK);\n            input_k.on('input', updateFromCMYK);\n            input_hex.on('input', updateFromHex);\n            input_rgb.on('input', updateFromRGBString);\n            input_hsl.on('input', updateFromHSLString);\n        }\n        function updateFromHSB() {\n            const h = parseInt(input_h.val()) / 360;\n            const s = parseInt(input_s.val()) / 100;\n            const b = parseInt(input_b.val()) / 100;\n            const [r, g, b2] = Q.HSL2RGB(h, s, (2 * b - b * s) / 2); // Convert HSB to RGB\n            updatePickerFromRGB(Math.round(r), Math.round(g), Math.round(b2));\n        }\n        function updateFromRGB() {\n            const r = parseInt(input_r.val());\n            const g = parseInt(input_g.val());\n            const b = parseInt(input_b2.val());\n            updatePickerFromRGB(r, g, b);\n        }\n        function updateFromLAB() {\n            const l = parseFloat(input_l.val());\n            const a = parseFloat(input_a.val());\n            const b = parseFloat(input_b3.val());\n            const [r, g, b2] = labToRGB(l, a, b);\n            updatePickerFromRGB(r, g, b2);\n        }\n        function updateFromCMYK() {\n            const c = parseInt(input_c.val()) / 100;\n            const m = parseInt(input_m.val()) / 100;\n            const y = parseInt(input_y.val()) / 100;\n            const k = parseInt(input_k.val()) / 100;\n            const r = Math.round(255 * (1 - c) * (1 - k));\n            const g = Math.round(255 * (1 - m) * (1 - k));\n            const b = Math.round(255 * (1 - y) * (1 - k));\n            updatePickerFromRGB(r, g, b);\n        }\n        function updateFromHex() {\n            const hex = input_hex.val();\n            if (hex.match(/^#[0-9A-Fa-f]{6}$/)) {\n                const r = parseInt(hex.slice(1, 3), 16);\n                const g = parseInt(hex.slice(3, 5), 16);\n                const b = parseInt(hex.slice(5, 7), 16);\n                updatePickerFromRGB(r, g, b);\n            }\n        }\n        function updateFromRGBString() {\n            const rgbStr = input_rgb.val();\n            const match = rgbStr.match(/rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/);\n            if (match) {\n                const r = parseInt(match[1]);\n                const g = parseInt(match[2]);\n                const b = parseInt(match[3]);\n                updatePickerFromRGB(r, g, b);\n            }\n        }\n        function updateFromHSLString() {\n            const hslStr = input_hsl.val();\n            const match = hslStr.match(/hsl\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)/);\n            if (match) {\n                const h = parseInt(match[1]) / 360;\n                const s = parseInt(match[2]) / 100;\n                const l = parseInt(match[3]) / 100;\n                const [r, g, b] = Q.HSL2RGB(h, s, l);\n                updatePickerFromRGB(Math.round(r), Math.round(g), Math.round(b));\n            }\n        }\n        function updatePickerFromRGB(r, g, b) {\n            const [h, s, l] = Q.RGB2HSL(r, g, b);\n            selectedHue = h; // Store just the hue\n            positionHueMarker(h);\n            positionTriangleMarker(s, l);\n            drawPicker();\n            return `rgb(${r},${g},${b})`;\n        }\n        function positionHueMarker(hue) {\n            const angle = hue * 2 * Math.PI;\n            const innerRingMiddleRadius = innerRadius - innerRingThickness / 2;\n            markers.outer = {\n                x: centerX + innerRingMiddleRadius * Math.cos(angle),\n                y: ringCenterY + innerRingMiddleRadius * Math.sin(angle)\n            };\n            if (outerSegments > 0) {\n                const segmentIndex = Math.floor(hue * outerSegments) % outerSegments;\n                selectedOuterSegment = (angle >= 0) ? segmentIndex : null;\n            }\n        }\n        function positionTriangleMarker(s, l) {\n            const totalHeight = bottomLeftVertex.y - topVertex.y;\n            const relativeY = 1 - s;\n            const y = topVertex.y + relativeY * totalHeight;\n            const triangleWidthAtY = (bottomRightVertex.x - bottomLeftVertex.x) * relativeY;\n            let relativeX;\n            if (relativeY === 0) {\n                relativeX = 0.5;\n            } else {\n                if (l <= 0.5) {\n                    relativeX = 1 - (l / 0.5);\n                } else {\n                    relativeX = (1 - l) / 0.5;\n                }\n            }\n            const leftX = centerX - triangleWidthAtY / 2;\n            const x = leftX + relativeX * triangleWidthAtY;\n            markers.triangle = { x, y };\n        }\n        function updateInputsFromColor(color) {\n            if (!color) return;\n            let r, g, b;\n            if (color.startsWith('rgb')) {\n                const match = color.match(/rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/);\n                if (match) {\n                    r = parseInt(match[1]);\n                    g = parseInt(match[2]);\n                    b = parseInt(match[3]);\n                }\n            } else if (color.startsWith('#')) {\n                r = parseInt(color.slice(1, 3), 16);\n                g = parseInt(color.slice(3, 5), 16);\n                b = parseInt(color.slice(5, 7), 16);\n            }\n            if (r === undefined || g === undefined || b === undefined) return;\n            input_r.val(r);\n            input_g.val(g);\n            input_b2.val(b);\n            const hex = '#' +\n                r.toString(16).padStart(2, '0') +\n                g.toString(16).padStart(2, '0') +\n                b.toString(16).padStart(2, '0');\n            input_hex.val(hex);\n            input_rgb.val(`rgb(${r},${g},${b})`);\n            const [h, s, l] = Q.RGB2HSL(r, g, b);\n            input_h.val(Math.round(h * 360));\n            input_s.val(Math.round(s * 100));\n            input_b.val(Math.round((l * 2 / (2 - s)) * 100)); // Convert L to B (brightness)\n            input_hsl.val(`hsl(${Math.round(h * 360)},${Math.round(s * 100)}%,${Math.round(l * 100)}%)`);\n            const [l_val, a_val, b_val] = rgbToLab(r, g, b);\n            input_l.val(Math.round(l_val));\n            input_a.val(Math.round(a_val));\n            input_b3.val(Math.round(b_val));\n            input_lab.val(`lab(${Math.round(l_val)},${Math.round(a_val)},${Math.round(b_val)})`);\n            const [c, m, y, k] = rgbToCmyk(r, g, b);\n            input_c.val(Math.round(c * 100));\n            input_m.val(Math.round(m * 100));\n            input_y.val(Math.round(y * 100));\n            input_k.val(Math.round(k * 100));\n            input_cmyk.val(`cmyk(${Math.round(c * 100)}%,${Math.round(m * 100)}%,${Math.round(y * 100)}%,${Math.round(k * 100)}%)`);\n            input_rgb888.val('0x' +\n                r.toString(16).padStart(2, '0') +\n                g.toString(16).padStart(2, '0') +\n                b.toString(16).padStart(2, '0'));\n            const r5 = Math.round(r * 31 / 255) & 0x1F;\n            const g6 = Math.round(g * 63 / 255) & 0x3F;\n            const b5 = Math.round(b * 31 / 255) & 0x1F;\n            const rgb565 = (r5 << 11) | (g6 << 5) | b5;\n            input_rgb565.val('0x' + rgb565.toString(16).padStart(4, '0'));\n        }\n        function rgbToCmyk(r, g, b) {\n            return Q.RGB2CMYK(r, g, b);\n        }\n        function rgbToLab(r, g, b) {\n            return Q.RGB2LAB(r, g, b);\n        }\n        function labToRGB(l, a, b) {\n            return Q.LAB2RGB(l, a, b);\n        }\n        setupInputListeners();\n        block_hsb.append(header_hsb, input_h_obj.wrapper, input_s_obj.wrapper, input_b_obj.wrapper);\n        block_rgb.append(header_rgb, input_r_obj.wrapper, input_g_obj.wrapper, input_b2_obj.wrapper);\n        block_lab.append(header_lab, input_l_obj.wrapper, input_a_obj.wrapper, input_b3_obj.wrapper);\n        block_cmyk.append(header_cmyk, input_c_obj.wrapper, input_m_obj.wrapper, input_y_obj.wrapper, input_k_obj.wrapper);\n        block_rgb888.append(header_rgb888, input_rgb888_obj.wrapper);\n        block_rgb565.append(header_rgb565, input_rgb565_obj.wrapper);\n        block_hsl.append(header_hsl, input_hsl_obj.wrapper);\n        snatches_wrapper.append(snatch_prev_current_wrapper, snatch_1, snatch_2, snatch_3, snatch_4, snatch_add);\n        section_first.append(snatches_wrapper);\n        section_second.append(block_hsb, block_rgb, block_lab, block_cmyk);\n        section_third.append(block_rgb888, block_rgb565, block_hsl);\n        left_wrapper.append(canvas);\n        right_wrapper.append(section_snatches, section_first, section_second, section_third, section_fourth);\n        wrapper.append(left_wrapper, right_wrapper);\n    }\n    else {\n        canvas.css({\n            'width': width + 'px',\n            'height': height + 'px',\n        });\n        wrapper.append(canvas);\n    }\n    const ctx = canvas.nodes[0].getContext('2d');\n    const centerX = width / 2;\n    const ringCenterY = height / 2;\n    const minDimension = Math.min(width, height);\n    const globalRadius = options.globalRadius || (minDimension * 0.46);\n    const outerRingThickness = options.outerRingThickness || (globalRadius * 0.05);\n    const innerRingThickness = options.innerRingThickness || (globalRadius * 0.15);\n    const ringPadding = options.ringPadding || (globalRadius * 0.02);\n    const outerRadius = globalRadius;\n    const innerRadius = outerRadius - outerRingThickness - ringPadding;\n    const innerMostRadius = innerRadius - innerRingThickness - ringPadding;\n    const triangleVertexRadius = innerMostRadius - (globalRadius * 0.07);\n    const topVertex = {\n        x: centerX,\n        y: ringCenterY - triangleVertexRadius\n    };\n    const bottomLeftVertex = {\n        x: centerX - triangleVertexRadius * Math.sin(Math.PI / 3),\n        y: ringCenterY + triangleVertexRadius * Math.cos(Math.PI / 3)\n    };\n    const bottomRightVertex = {\n        x: centerX + triangleVertexRadius * Math.sin(Math.PI / 3),\n        y: ringCenterY + triangleVertexRadius * Math.cos(Math.PI / 3)\n    };\n    let selectedHue = 0; // Store hue as a number (0-1) instead of a color string\n    let selectedOuterSegment = null;\n    let activeArea = 'inner';\n    let markers = {\n        outer: { x: centerX, y: ringCenterY },\n        triangle: { x: centerX, y: ringCenterY }\n    };\n    const outerSegments = options.outerSegments || 18;\n    const outerColors = Array.from({ length: outerSegments }, (_, i) => {\n        const hue = i * (1 / outerSegments);\n        const [r, g, b] = Q.HSL2RGB(hue, 1, 0.5);\n        return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;\n    });\n    const defaultHue = 0;\n    const defaultSaturation = 1;\n    const defaultLightness = 0.5;\n    const middleRingAngle = (defaultHue / 360) * 2 * Math.PI;\n    const middleRingRadius = innerRadius - innerRingThickness / 2;\n    markers.outer = {\n        x: centerX + middleRingRadius * Math.cos(middleRingAngle),\n        y: ringCenterY + middleRingRadius * Math.sin(middleRingAngle)\n    };\n    markers.triangle = {\n        x: topVertex.x,\n        y: topVertex.y\n    };\n    function drawPicker() {\n        current_color.css({\n            'background-color': `rgb(${input_r.val()},${input_g.val()},${input_b2.val()})`\n        });\n        ctx.clearRect(0, 0, width, height);\n        drawOuterRing();\n        drawMiddleRing();\n        drawTriangle();\n        drawMarkers();\n    }\n    function drawOuterRing() {\n        const segAngle = (2 * Math.PI) / outerSegments;\n        for (let i = 0; i < outerSegments; i++) {\n            const startAngle = i * segAngle;\n            const endAngle = startAngle + segAngle;\n            ctx.beginPath();\n            ctx.arc(centerX, ringCenterY, outerRadius, startAngle, endAngle);\n            ctx.arc(centerX, ringCenterY, outerRadius - outerRingThickness, endAngle, startAngle, true);\n            ctx.closePath();\n            ctx.fillStyle = outerColors[i];\n            ctx.fill();\n        }\n    }\n    function drawMiddleRing() {\n        ctx.save();\n        ctx.beginPath();\n        ctx.arc(centerX, ringCenterY, innerRadius, 0, 2 * Math.PI);\n        ctx.closePath();\n        if (ctx.createConicGradient) {\n            const grad = ctx.createConicGradient(0, centerX, ringCenterY);\n            grad.addColorStop(0, \"hsl(0, 100%, 50%)\");\n            grad.addColorStop(0.17, \"hsl(60, 100%, 50%)\");\n            grad.addColorStop(0.33, \"hsl(120, 100%, 50%)\");\n            grad.addColorStop(0.5, \"hsl(180, 100%, 50%)\");\n            grad.addColorStop(0.67, \"hsl(240, 100%, 50%)\");\n            grad.addColorStop(0.83, \"hsl(300, 100%, 50%)\");\n            grad.addColorStop(1, \"hsl(360, 100%, 50%)\");\n            ctx.fillStyle = grad;\n        } else {\n            const grad = ctx.createLinearGradient(0, 0, width, 0);\n            grad.addColorStop(0, \"#FF0000\");\n            grad.addColorStop(0.17, \"#FFFF00\");\n            grad.addColorStop(0.33, \"#00FF00\");\n            grad.addColorStop(0.5, \"#00FFFF\");\n            grad.addColorStop(0.67, \"#0000FF\");\n            grad.addColorStop(0.83, \"#FF00FF\");\n            grad.addColorStop(1, \"#FF0000\");\n            ctx.fillStyle = grad;\n        }\n        ctx.fill();\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.beginPath();\n        ctx.arc(centerX, ringCenterY, innerRadius - innerRingThickness, 0, 2 * Math.PI);\n        ctx.closePath();\n        ctx.fill();\n        ctx.restore();\n    }\n    function drawTriangle() {\n        ctx.save();\n        ctx.beginPath();\n        ctx.arc(centerX, ringCenterY, innerMostRadius * 0.8, 0, 2 * Math.PI);\n        ctx.closePath();\n        ctx.fillStyle = \"rgba(0,0,0,0.2)\";\n        ctx.fill();\n        ctx.restore();\n        ctx.save();\n        ctx.shadowColor = \"rgba(0, 0, 0, 0.6)\";\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 5;\n        ctx.shadowBlur = 10;\n        ctx.beginPath();\n        ctx.moveTo(topVertex.x, topVertex.y);\n        ctx.lineTo(bottomLeftVertex.x, bottomLeftVertex.y);\n        ctx.lineTo(bottomRightVertex.x, bottomRightVertex.y);\n        ctx.closePath();\n        ctx.fillStyle = \"#000\";\n        ctx.fill();\n        ctx.shadowColor = \"rgba(0, 0, 0, 0)\";\n        ctx.shadowBlur = 0;\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        ctx.beginPath();\n        ctx.moveTo(topVertex.x, topVertex.y);\n        ctx.lineTo(bottomLeftVertex.x, bottomLeftVertex.y);\n        ctx.lineTo(bottomRightVertex.x, bottomRightVertex.y);\n        ctx.closePath();\n        ctx.clip();\n        const gradHoriz = ctx.createLinearGradient(bottomLeftVertex.x, bottomLeftVertex.y, bottomRightVertex.x, bottomRightVertex.y);\n        gradHoriz.addColorStop(0, \"rgba(255,255,255,1)\");\n        gradHoriz.addColorStop(1, \"rgba(255,255,255,0)\");\n        ctx.fillStyle = gradHoriz;\n        ctx.globalCompositeOperation = 'normal';\n        ctx.fillRect(bottomLeftVertex.x, topVertex.y, bottomRightVertex.x - bottomLeftVertex.x, bottomLeftVertex.y - topVertex.y);\n        const [r, g, b] = Q.HSL2RGB(selectedHue, 1, 0.5);\n        const pureHueColor = `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;\n        const gradVert = ctx.createLinearGradient(topVertex.x, topVertex.y, topVertex.x, bottomLeftVertex.y);\n        gradVert.addColorStop(0, pureHueColor); // Use pure hue color instead of selectedHue\n        gradVert.addColorStop(1, \"#000\");\n        ctx.fillStyle = gradVert;\n        ctx.globalCompositeOperation = 'color';\n        ctx.fill();\n        ctx.restore();\n    }\n    function drawMarkers() {\n        ctx.save();\n        ctx.strokeStyle = \"#FFF\";\n        ctx.lineWidth = 4;\n        ctx.shadowColor = \"rgba(0, 0, 0, 0.5)\";\n        ctx.shadowBlur = 5;\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 2;\n        if (activeArea === 'inner') {\n            const markerSize = innerRingThickness / 3; // Half the thickness for better visibility\n            ctx.beginPath();\n            ctx.arc(markers.outer.x, markers.outer.y, markerSize, 0, 2 * Math.PI);\n            ctx.stroke();\n        } else if (activeArea === 'outer' && selectedOuterSegment !== null) {\n            const segAngle = (2 * Math.PI) / outerSegments;\n            const startAngle = selectedOuterSegment * segAngle;\n            const endAngle = startAngle + segAngle;\n            ctx.strokeStyle = \"#FFFFFF\";\n            ctx.lineWidth = 5;\n            ctx.beginPath();\n            ctx.arc(centerX, ringCenterY, outerRadius, startAngle, endAngle);\n            ctx.arc(centerX, ringCenterY, outerRadius - outerRingThickness, endAngle, startAngle, true);\n            ctx.closePath();\n            ctx.stroke();\n        }\n        ctx.strokeStyle = \"#FFF\";\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.arc(markers.triangle.x, markers.triangle.y, 5, 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.shadowColor = \"rgba(0, 0, 0, 0)\";\n        ctx.shadowBlur = 0;\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        ctx.restore();\n    }\n    function computeColor() {\n        let hue = 0;\n        if (typeof selectedHue === 'string') {\n            if (selectedHue.startsWith('rgb')) {\n                const rgbMatch = selectedHue.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n                if (rgbMatch) {\n                    const [r, g, b] = [parseInt(rgbMatch[1]), parseInt(rgbMatch[2]), parseInt(rgbMatch[3])];\n                    const [h] = Q.RGB2HSL(r, g, b);\n                    hue = h;\n                }\n            } else if (selectedHue.startsWith('#')) {\n                hue = 0;\n            }\n        }\n        const triangleMarker = markers.triangle;\n        const totalHeight = bottomLeftVertex.y - topVertex.y;\n        const totalWidth = bottomRightVertex.x - bottomLeftVertex.x;\n        const relativeY = (triangleMarker.y - topVertex.y) / totalHeight;\n        const triangleWidthAtY = totalWidth * relativeY;\n        const leftBoundAtY = centerX - (triangleWidthAtY / 2);\n        const relativeX = triangleWidthAtY === 0 ? 0.5 :\n            (triangleMarker.x - leftBoundAtY) / triangleWidthAtY;\n        let saturation = 1 - (1 - relativeX) * relativeY;\n        let lightness = 1 - relativeY * relativeX;\n        saturation = Math.max(0, Math.min(1, saturation));\n        lightness = Math.max(0, Math.min(1, lightness));\n        return `hsl(${Math.round(hue * 360)}, ${Math.round(saturation * 100)}%, ${Math.round(lightness * 100)}%)`;\n    }\n    let dragging = null;\n    function handleEvent(e) {\n        const rect = canvas.nodes[0].getBoundingClientRect();\n        const scaleX = width / rect.width;\n        const scaleY = height / rect.height;\n        const canvasX = (e.clientX - rect.left) * scaleX;\n        const canvasY = (e.clientY - rect.top) * scaleY;\n        if (dragging === 'triangle') {\n            const constrained = constrainToTriangle(canvasX, canvasY, topVertex, bottomLeftVertex, bottomRightVertex);\n            markers.triangle = constrained;\n            const triangleColor = computeTriangleColor(constrained.x, constrained.y);\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(triangleColor);\n            }\n            drawPicker();\n            return; // Exit early as we've handled the drag event\n        }\n        if (dragging === 'inner_ring') {\n            const constrained = constrainToHueRing(canvasX, canvasY);\n            markers.outer = constrained;\n            const angle = Math.atan2(constrained.y - ringCenterY, constrained.x - centerX);\n            const hue = (angle >= 0 ? angle : angle + 2 * Math.PI) / (2 * Math.PI);\n            selectedHue = hue;\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(computeTriangleColor(markers.triangle.x, markers.triangle.y));\n            }\n            drawPicker();\n            return; // Exit early as we've handled the drag event\n        }\n        const distFromCenter = Math.sqrt(Math.pow(canvasX - centerX, 2) + Math.pow(canvasY - ringCenterY, 2));\n        if (distFromCenter <= outerRadius && distFromCenter >= outerRadius - outerRingThickness) {\n            const angle = Math.atan2(canvasY - ringCenterY, canvasX - centerX);\n            const normalizedAngle = angle < 0 ? angle + 2 * Math.PI : angle;\n            const segmentIndex = Math.floor(normalizedAngle / ((2 * Math.PI) / outerSegments));\n            selectedOuterSegment = segmentIndex;\n            selectedHue = segmentIndex / outerSegments;\n            activeArea = 'outer';\n            if (e.type === 'mousedown') {\n                dragging = false;\n            }\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(computeTriangleColor(markers.triangle.x, markers.triangle.y));\n            }\n        }\n        else if (distFromCenter <= innerRadius && distFromCenter >= innerRadius - innerRingThickness) {\n            const angle = Math.atan2(canvasY - ringCenterY, canvasX - centerX);\n            const innerRingMiddleRadius = innerRadius - innerRingThickness / 2;\n            markers.outer = {\n                x: centerX + innerRingMiddleRadius * Math.cos(angle),\n                y: ringCenterY + innerRingMiddleRadius * Math.sin(angle)\n            };\n            const hue = (angle >= 0 ? angle : angle + 2 * Math.PI) / (2 * Math.PI);\n            selectedHue = hue;\n            selectedOuterSegment = null;\n            activeArea = 'inner';\n            if (e.type === 'mousedown') {\n                dragging = 'inner_ring';\n            }\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(computeTriangleColor(markers.triangle.x, markers.triangle.y));\n            }\n        }\n        else if (isPointInTriangle(canvasX, canvasY, topVertex, bottomLeftVertex, bottomRightVertex)) {\n            markers.triangle = { x: canvasX, y: canvasY };\n            const triangleColor = computeTriangleColor(canvasX, canvasY);\n            if (e.type === 'mousedown') {\n                dragging = 'triangle';\n            }\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(triangleColor);\n            }\n        }\n        drawPicker();\n    }\n    function constrainToHueRing(x, y) {\n        const angle = Math.atan2(y - ringCenterY, x - centerX);\n        const innerRingMiddleRadius = innerRadius - innerRingThickness / 2;\n        return {\n            x: centerX + innerRingMiddleRadius * Math.cos(angle),\n            y: ringCenterY + innerRingMiddleRadius * Math.sin(angle)\n        };\n    }\n    function computeTriangleColor(x, y) {\n        const totalHeight = bottomLeftVertex.y - topVertex.y;\n        const relativeY = Math.max(0, Math.min(1, (y - topVertex.y) / totalHeight));\n        const triangleWidthAtY = (bottomRightVertex.x - bottomLeftVertex.x) * relativeY;\n        const leftX = centerX - triangleWidthAtY / 2;\n        const rightX = centerX + triangleWidthAtY / 2;\n        const relativeX = Math.max(0, Math.min(1, (x - leftX) / (rightX - leftX)));\n        const saturation = 1 - relativeY;\n        let lightness = 0.5;\n        if (relativeY > 0) {\n            lightness = 0.5 * (1 - relativeY) + relativeY * (1 - relativeX);\n        }\n        const clampedSaturation = Math.max(0, Math.min(1, saturation));\n        const clampedLightness = Math.max(0, Math.min(1, lightness));\n        const [r, g, b] = Q.HSL2RGB(selectedHue, clampedSaturation, clampedLightness);\n        return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;\n    }\n    function isPointInTriangle(px, py, v1, v2, v3) {\n        const d1 = sign(px, py, v1.x, v1.y, v2.x, v2.y);\n        const d2 = sign(px, py, v2.x, v2.y, v3.x, v3.y);\n        const d3 = sign(px, py, v3.x, v3.y, v1.x, v1.y);\n        const has_neg = (d1 < 0) || (d2 < 0) || (d3 < 0);\n        const has_pos = (d1 > 0) || (d2 > 0) || (d3 > 0);\n        return !(has_neg && has_pos);\n    }\n    function sign(p1x, p1y, p2x, p2y, p3x, p3y) {\n        return (p1x - p3x) * (p2y - p3y) - (p2x - p3x) * (p1y - p3y);\n    }\n    let onMouseMoveHandler, onMouseUpHandler;\n    function attachGlobalListeners() {\n        onMouseMoveHandler = handleMouseMove.bind(this);\n        onMouseUpHandler = handleMouseUp.bind(this);\n        Q(document).on('mousemove', onMouseMoveHandler);\n        Q(document).on('mouseup', onMouseUpHandler);\n    }\n    function removeGlobalListeners() {\n        Q(document).off('mousemove', onMouseMoveHandler);\n        Q(document).off('mouseup', onMouseUpHandler);\n    }\n    function handleMouseDown(e) {\n        handleEvent(e);\n        if (dragging) {\n            previous_color.css({\n                'background-color': `rgb(${input_r.val()},${input_g.val()},${input_b2.val()})`\n            });\n            attachGlobalListeners();\n        }\n    }\n    function handleMouseMove(e) {\n        if (dragging === 'inner_ring' || dragging === 'hue_stripe' || dragging === 'triangle') {\n            handleEvent(e);\n        }\n    }\n    function handleMouseUp(e) {\n        dragging = false;\n        removeGlobalListeners();\n    }\n    canvas.on('mousedown', handleMouseDown);\n    function constrainToTriangle(x, y, v1, v2, v3) {\n        if (isPointInTriangle(x, y, v1, v2, v3)) {\n            return { x, y };\n        }\n        const denominator = ((v2.y - v3.y) * (v1.x - v3.x) + (v3.x - v2.x) * (v1.y - v3.y));\n        let a = ((v2.y - v3.y) * (x - v3.x) + (v3.x - v2.x) * (y - v3.y)) / denominator;\n        let b = ((v3.y - v1.y) * (x - v3.x) + (v1.x - v3.x) * (y - v3.y)) / denominator;\n        let c = 1 - a - b;\n        if (a < 0) a = 0;\n        if (b < 0) b = 0;\n        if (c < 0) c = 0;\n        const sum = a + b + c;\n        if (sum > 0) {\n            a /= sum;\n            b /= sum;\n            c /= sum;\n        } else {\n            a = b = c = 1 / 3;\n        }\n        return {\n            x: a * v1.x + b * v2.x + c * v3.x,\n            y: a * v1.y + b * v2.y + c * v3.y\n        };\n    }\n    wrapper.change = function (callback) {\n        const originalCallback = callback;\n        wrapper.changeCallback = function (color) {\n            Q.Debounce('colorpicker_change', 10, function () {\n                if (showDetails && input_h) {\n                    updateInputsFromColor(color);\n                }\n                originalCallback(color);\n            });\n        };\n        return this;\n    };\n    wrapper.val = function (color) {\n        if (!color) {\n            return computeColor();\n        }\n        if (color.startsWith('#') || color.startsWith('rgb')) {\n            let r, g, b;\n            if (color.startsWith('rgb')) {\n                const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n                if (rgbMatch) {\n                    r = parseInt(rgbMatch[1]);\n                    g = parseInt(rgbMatch[2]);\n                    b = parseInt(rgbMatch[3]);\n                }\n            } else if (color.startsWith('#')) {\n                const hex = color.slice(1);\n                if (hex.length === 3) {\n                    r = parseInt(hex[0] + hex[0], 16);\n                    g = parseInt(hex[1] + hex[1], 16);\n                    b = parseInt(hex[2] + hex[2], 16);\n                } else if (hex.length === 6) {\n                    r = parseInt(hex.slice(0, 2), 16);\n                    g = parseInt(hex.slice(2, 4), 16);\n                    b = parseInt(hex.slice(4, 6), 16);\n                }\n            }\n            const [h, s, l] = Q.RGB2HSL(r, g, b);\n            selectedHue = h;\n            positionHueMarker(h);\n            positionTriangleMarker(s, l);\n            drawPicker();\n            current_color.css('background-color', color);\n            previous_color.css('background-color', color);\n            if (typeof wrapper.changeCallback === 'function') {\n                wrapper.changeCallback(color);\n            }\n        }\n        return this;\n    };\n    wrapper.destroy = function () {\n        canvas.off('mousedown', handleMouseDown);\n        removeGlobalListeners();\n        dragging = false;\n        return this;\n    };\n    wrapper.Snatch = function (index) {\n        return snatches[index]\n            ? snatches[index].css('background-color')\n            : null;\n    };\n    drawPicker();\n    console.log('ColorPicker drawn on canvas');\n    if (showDetails) {\n        updateInputsFromColor(initialColor);\n        current_color.css('background-color', initialColor);\n        previous_color.css('background-color', initialColor);\n    }\n    this.elements.push(wrapper);\n    return wrapper;\n};"
            },
            "Form.Dropdown": {
                "uuid": "16a03df1-e2d9-4fc5-ae87-c5193b7a3dd6",
                "name": "Form.Dropdown",
                "method": "Component",
                "desc": "A customizable dropdown list component for selecting options from a list.",
                "type": "Component",
                "example": [
                    "var dd = Q.Form.Dropdown({ values: [ { value: 1, text: 'One' }, { value: 2, text: 'Two' } ] });",
                    "var dd = Q.Form.Dropdown(); dd.val([ { value: 'a', text: 'A' }, { value: 'b', text: 'B' } ]);",
                    "var dd = Q.Form.Dropdown(); dd.add('c', 'C'); dd.select(0);",
                    "var dd = Q.Form.Dropdown({ disabled: true });"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "css",
                    "append",
                    "find",
                    "text"
                ],
                "script": "Form.prototype.Dropdown = function(options = {}) {\n    if (!Form.dropdownStyles) {\n        Form.dropdownStyles = Q.style('', `\n            .form_dropdown {\n                position: relative;\n                width: 100%;\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                cursor: pointer;\n                user-select: none;\n                outline: var(--form-default-outline);\n                border-radius: var(--form-default-border-radius);\n                background-color: var(--form-default-background);\n                color: var(--form-default-text-color);\n            }\n            .selected_text {\n            padding-right: 10px;\n        }\n            .form_dropdown.disabled {\n                opacity: 0.6;\n                cursor: not-allowed;\n                pointer-events: none;\n            }\n            .form_dropdown_selected {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                padding: var(--form-default-padding);\n                line-height: normal;\n                cursor: pointer;\n                user-select: none;\n                width: 100%;\n                box-sizing: border-box;\n            }\n            .form_dropdown_items {\n                position: absolute;\n                top: 100%;\n                left: 0;\n                right: 0;\n                margin-top: 3px;\n                z-index: 1000;\n                max-height: 200px;\n                overflow-y: auto;\n                background-color: var(--form-default-background);\n                outline: var(--form-default-outline);\n                border-radius: var(--form-default-border-radius);\n                box-shadow: var(--form-default-shadow);\n                display: none;\n                color: var(--form-default-text-color);\n                font-family: var(--form-default-font-family);\n            }\n            .form_dropdown_item {\n                padding: var(--form-default-padding);\n                cursor: pointer;\n            }\n            .form_dropdown_item:hover {\n                background-color: var(--form-default-accent-color);\n                color: var(--form-default-accent-text-color);\n            }\n            .form_dropdown_item.selected {\n                background-color: var(--form-default-selected-background-color);\n                color: var(--form-default-selected-text-color);\n                font-weight: 500;\n            }\n            .form_dropdown_items {\n                display: none;\n            }\n            .form_dropdown_arrow {\n                transition: transform 0.2s ease-in-out;\n                transform: scale(2.0);\n            }\n            .form_dropdown.open .form_dropdown_arrow {\n                transform: rotate(180deg) scale(2.0);\n            }\n            .form_dropdown.open .form_dropdown_items {\n                display: block;\n                position: absolute;\n                width: 100%;\n                z-index: 1000;\n                overflow-y: auto;\n                top: 100%;\n            }\n            .form_dropdown.up .form_dropdown_items {\n                top: auto;\n                bottom: 100%;\n                margin-top: 0;\n                margin-bottom: 3px;\n            }\n        `, null, {\n            'selected_text': 'selected_text',\n            'form_dropdown': 'form_dropdown',\n            'open': 'open',\n            'disabled': 'disabled',\n            'selected': 'selected',\n            'form_dropdown_selected': 'form_dropdown_selected', \n            'form_dropdown_items': 'form_dropdown_items',\n            'form_dropdown_item': 'form_dropdown_item',\n            'form_dropdown_arrow': 'form_dropdown_arrow',\n            'up': 'up'\n        },true);\n    }\n    const container = Q('<div>').addClass(Form.dropdownStyles['form_dropdown']);\n    const header = Q('<div>').addClass(Form.dropdownStyles['form_dropdown_selected']);\n    const label = Q('<div>').text('Select an option').addClass(Form.dropdownStyles['selected_text']);\n    const arrow = Q('<div>').addClass(Form.dropdownStyles['form_dropdown_arrow']).html('&#9662;');\n    header.append(label, arrow);\n    const listContainer = Q('<div>')\n        .addClass(Form.dropdownStyles['form_dropdown_items'])\n        .addClass(Form.classes['scrollbar']);\n    container.append(header, listContainer);\n    if (!Form.dropdownCloseListenerInitialized) {\n        Q(document).on('click', () => {\n            Q('.' + Form.dropdownStyles['form_dropdown'])\n              .removeClass(Form.dropdownStyles['open']);\n        });\n        Form.dropdownCloseListenerInitialized = true;\n    }\n    if (options['max-height']) {\n        listContainer.css('maxHeight', options['max-height'] + 'px');\n    }\n    let selectedValue = null;\n    let selectedText = '';\n    let selectedIndex = -1;\n    let isDisabled = options.disabled || false;\n    let changeCallback = options.change || null;\n    if (isDisabled) { container.addClass(Form.dropdownStyles['disabled']); }\n    header.on('click', function(e) {\n        e.stopPropagation();\n        if (isDisabled) return;\n        const openCl = Form.dropdownStyles['open'];\n        const upCl = Form.dropdownStyles['up'];\n        if (container.hasClass(openCl)) {\n            container.removeClass(upCl);\n        } else {\n            const rect = container.nodes[0].getBoundingClientRect();\n            const itemsH = listContainer.nodes[0].scrollHeight;\n            if (rect.bottom + itemsH > window.innerHeight) {\n                container.addClass(upCl);\n            } else {\n                container.removeClass(upCl);\n            }\n        }\n        container.toggleClass(openCl);\n    });\n    function selectItem(index) {\n        const items = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n        if (!items) return;\n        items.removeClass(Form.dropdownStyles['selected']);\n        const item = items.eq(index);\n        if (item.hasClass(Form.dropdownStyles['disabled'])) return;\n        item.addClass(Form.dropdownStyles['selected']);\n        selectedValue = item.attr('data-value');\n        selectedText  = item.text();\n        selectedIndex = index;\n        label.text(selectedText);\n        container.removeClass(Form.dropdownStyles['open']);\n        if (typeof changeCallback === 'function') {\n            changeCallback(selectedValue, selectedText, selectedIndex);\n        }\n    }\n    if (options.values && Array.isArray(options.values)) {\n        setValues(options.values);\n    }\n    function setValues(values) {\n        listContainer.html('');\n        let defaultIndex = -1;\n        if (!Array.isArray(values) || values.length === 0) { return; }\n        values.forEach((item, index) => {\n            if (!item || typeof item !== 'object' || item.value === undefined || item.text === undefined) { return; }\n            const dropdownItem = Q('<div>')\n                .addClass(Form.dropdownStyles['form_dropdown_item'])\n                .attr('data-value', item.value)\n                .text(item.text);\n            if (item.disabled) { dropdownItem.addClass(Form.dropdownStyles['disabled']); }\n            if (item.default) { defaultIndex = index; }\n            dropdownItem.on('click', function(e) {\n                e.stopPropagation();\n                if (!dropdownItem.hasClass(Form.dropdownStyles['disabled'])) {\n                    selectItem(index);\n                }\n            });\n            listContainer.append(dropdownItem);\n        });\n        if (defaultIndex < 0) defaultIndex = 0;\n        selectItem(defaultIndex);\n    }\n    const dropdownAPI = {\n        val: function(values) {\n            if (values === undefined) {\n                return { value: selectedValue, text: selectedText, index: selectedIndex };\n            }\n            setValues(values);\n            return this;\n        },\n        change: function(callback) {\n            changeCallback = callback;\n            return this;\n        },\n        disabled: function(state) {\n            isDisabled = !!state;\n            if (isDisabled) { container.addClass(Form.dropdownStyles['disabled']); }\n            else { container.removeClass(Form.dropdownStyles['disabled']); }\n            return this;\n        },\n        select: function(index) {\n            selectItem(index);\n            return this;\n        },\n        index: function(index) {\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            if (index >= 0 && index < items.length) {\n                const item = Q(items[index]);\n                return { value: item.attr('data-value'), text: item.text() };\n            }\n            return null;\n        },\n        disable: function(indexes) {\n            if (!Array.isArray(indexes)) return this;\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            indexes.forEach(idx => {\n                if (idx >= 0 && idx < items.length) {\n                    Q(items[idx]).addClass(Form.dropdownStyles['disabled']);\n                }\n            });\n            return this;\n        },\n        enable: function(indexes) {\n            if (!Array.isArray(indexes)) return this;\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            indexes.forEach(idx => {\n                if (idx >= 0 && idx < items.length) {\n                    Q(items[idx]).removeClass(Form.dropdownStyles['disabled']);\n                }\n            });\n            return this;\n        },\n        text: function(index, newText) {\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            if (index >= 0 && index < items.length) {\n                const item = Q(items[index]);\n                item.text(newText);\n                if (index === selectedIndex) {\n                    selectedText = newText;\n                    label.text(newText);\n                }\n            }\n            return this;\n        },\n        add: function(value, text) {\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            const newIndex = items.length;\n            const dropdownItem = Q('<div>')\n                .addClass(Form.dropdownStyles['form_dropdown_item'])\n                .attr('data-value', value)\n                .text(text);\n            dropdownItem.on('click', function(e) {\n                e.stopPropagation();\n                if (!dropdownItem.hasClass(Form.dropdownStyles['disabled'])) {\n                    selectItem(newIndex);\n                }\n            });\n            listContainer.append(dropdownItem);\n            return newIndex;\n        },\n        remove: function(index) {\n            if (index !== undefined) {\n                const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n                const items = found ? found.nodes : [];\n                if (index >= 0 && index < items.length) {\n                    Q(items[index]).remove();\n                    if (index === selectedIndex) {\n                        selectedValue = null;\n                        selectedText = '';\n                        selectedIndex = -1;\n                        label.text('Select an option');\n                    }\n                }\n                return this;\n            } else {\n                container.remove();\n                return null;\n            }\n        },\n        getCount: function() {\n            const found = listContainer.find('.' + Form.dropdownStyles['form_dropdown_item']);\n            const items = found ? found.nodes : [];\n            return items.length;\n        }\n    };\n    for (const key in dropdownAPI) {\n        if (dropdownAPI.hasOwnProperty(key)) {\n            container[key] = dropdownAPI[key];\n        }\n    }\n    this.elements.push(container);\n    return container;\n};"
            },
            "Form": {
                "uuid": "a90da708-b348-48a2-9bb5-9088368b7f8a",
                "name": "Form",
                "method": "Plugin",
                "desc": "Form is a simple library for creating forms and windows in the browser. It provides a set of methods for creating form elements, windows, and other UI components.",
                "type": "Plugin",
                "example": "var containers = Q.Form()",
                "dependencies": [
                    "Style",
                    "addClass",
                    "removeClass",
                    "on",
                    "append",
                    "each",
                    "find",
                    "scrollTop",
                    "scrollLeft",
                    "hasClass",
                    "text",
                    "html",
                    "val",
                    "click",
                    "closest",
                    "empty",
                    "show",
                    "hide",
                    "css",
                    "attr",
                    "prop",
                    "remove",
                    "add"
                ],
                "script": "function Form(options = {}) {\n    if (!(this instanceof Form)) {\n        return new Form(options);\n    }\n    this.elements = [];\n    this.options = options;\n    if (!Form.initialized) {\n        Form.classes = Q.style(`\n            --form-default-accent-color: rgb(100, 60, 240);\n            --form-default-accent-text-color: #fff;\n            --form-default-font-size: 12px;\n            --form-default-font-family: Arial, sans-serif;\n            --form-default-dataset-header-font-weight: 600;\n            --form-default-dataset-header-font-size: 12px;\n            --form-default-dataset-header-data-font-size: 12px;\n            --form-default-dataset-header-background: rgba(127, 127, 127, 0.10);\n            --form-default-dataset-header-text-color: #fff;\n            --form-default-dataset-border: 1px solid rgba(127, 127, 127, 0.24);\n            --form-default-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);\n            --form-default-shadow-active: 0px 0px 5px rgba(100, 60, 240, 0.5);\n            --form-default-shadow-focus: 0px 0px 5px rgba(100, 60, 240, 0.5);\n            --form-default-shadow-hover: 0px 0px 5px rgba(100, 60, 240, 0.5);\n            --form-default-background-active: rgb(46, 46, 46);\n            --form-default-background-focus: rgb(46, 46, 46);\n            --form-default-background-hover: rgb(46, 46, 46);\n            --form-default-background-disabled: rgb(46, 46, 46);\n            --form-default-background: rgb(46, 46, 46);\n            --form-default-border-active: 1px solid var(--form-default-accent-color);\n            --form-default-border-focus: 1px solid var(--form-default-accent-color);\n            --form-default-border-hover: 1px solid var(--form-default-accent-color);\n            --form-default-border: 1px solid rgba(255, 255, 255, 0.03);\n            --form-default-outline-active: var(--form-default-border-active);\n            --form-default-outline-focus: var(--form-default-border-focus);\n            --form-default-outline-hover: var(--form-default-border-hover);\n            --form-default-outline: var(--form-default-border);\n            --form-default-border-radius: 5px;\n            --form-default-margin: 0px 0px 0px 0px;\n            --form-default-padding: 5px 10px 5px 10px;\n            --form-default-text-color-active: #fff;\n            --form-default-text-color-focus: #fff;\n            --form-default-text-color-hover: #fff;\n            --form-default-text-color-disabled: #999;\n            --form-default-text-color: #999;\n            --form-default-text-active: normal var(--form-default-font-size) var(--form-default-font-family);\n            --form-default-text-focus: normal var(--form-default-font-size) var(--form-default-font-family);\n            --form-default-text-hover: normal var(--form-default-font-size) var(--form-default-font-family);\n            --form-default-text: normal var(--form-default-font-size) var(--form-default-font-family);\n            --form-default-width: 100%;\n        `, `\n            .form_icon {\n                width: 100%;\n                height: 100%;\n                color: #fff;\n                pointer-events: none;\n            }\n            .form_close_button {\n                user-select: none;\n                -webkit-user-select: none;\n                position: absolute;\n                top: 0px;\n                right: 0px;\n                width: 18px;\n                height: 18px;\n                background-color: rgba(0, 0, 0, 0.5);\n                color: #fff;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 12px;\n                cursor: pointer;\n            }\n            .form_close_button:hover {\n                background-color: rgba(220, 53, 69, 0.8);\n            }\n            /* New scrollbar customization class */\n            .scrollbar::-webkit-scrollbar {\n                width: 12px;\n            }\n            .scrollbar::-webkit-scrollbar-track {\n                background:transparent;\n            }\n            .scrollbar::-webkit-scrollbar-thumb {\n                background-color: #888;\n                border-radius: 10px;\n                border: 3px solid rgb(37, 37, 37);\n            }\n            .scrollbar {\n                scrollbar-color: #888 rgb(48, 48, 48);\n            }\n            /* ripple effect container */\n            .form_ripple_container {\n                position: relative;\n                overflow: hidden;\n            }\n            .form_ripple_container::after {\n                content: '';\n                position: absolute;\n                border-radius: 50%;\n                background: rgba(255,255,255,0.2);\n                width: var(--ripple-size);\n                height: var(--ripple-size);\n                top: var(--ripple-y);\n                left: var(--ripple-x);\n                transform: scale(0);\n            }\n            .form_ripple_container.rippleing::after {\n                animation: form_ripple 0.4s linear;\n            }\n            @keyframes form_ripple {\n                to {\n                    transform: scale(4);\n                    opacity: 0;\n                }\n            }\n        `, null, {\n            'form_icon': 'form_icon',\n            'form_close_button': 'form_close_button',\n            'scrollbar': 'scrollbar',\n            'form_ripple_container': 'form_ripple_container',\n            'rippleing': 'rippleing'\n        });\n        Form.initialized = true;\n        console.log('Form core initialized');\n    }\n}\nForm.prototype.Icon = function (icon) {\n    let iconElement = Q('<div>');\n    iconElement.addClass('svg_' + icon + ' form_icon');\n    return iconElement;\n};\n/* FX_Ripple: pseudo\u2011element approach */\nForm.prototype.FX_Ripple = function(el) {\n    const element = el instanceof Q ? el.nodes[0] : el;\n    if (!element) return this;\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    element.classList.add(Form.classes.form_ripple_container);\n    element.addEventListener('click', function(e) {\n        const rect = element.getBoundingClientRect();\n        const size = Math.max(rect.width, rect.height);\n        element.style.setProperty('--ripple-size', size + 'px');\n        element.style.setProperty(\n            '--ripple-x',\n            (e.clientX - rect.left - size/2) + 'px'\n        );\n        element.style.setProperty(\n            '--ripple-y',\n            (e.clientY - rect.top  - size/2) + 'px'\n        );\n        element.classList.add(Form.classes.rippleing);\n        setTimeout(() => {\n            element.classList.remove(Form.classes.rippleing);\n        }, 400);\n    });\n    return this;\n};\nQ.Form = Form;"
            },
            "Form.ProgressBar": {
                "uuid": "47984f54-1c77-44ba-ba0d-a4154878de20",
                "name": "Form.ProgressBar",
                "method": "Component",
                "desc": "Progress bar component with min, max, val methods",
                "type": "Component",
                "example": [
                    "var pb = Q.Form.ProgressBar(0, 100, 30);",
                    "pb.max(200).min(10).val(50);"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "find",
                    "css"
                ],
                "script": "Form.prototype.ProgressBar = function(min = 0, max = 100, value = 0) {\n    if (!Form.progressClassesInitialized) {\n        Form.progressClasses = Q.style(null, `\n            .progress_bar {\n                width: 100%;\n                background-color: var(--form-default-background);\n                border-radius: var(--form-default-border-radius);\n                overflow: hidden;\n            }\n            .progress_fill {\n            position: relative;\n                height: var(--form-default-font-size);\n                background-color: var(--form-default-accent-color);\n                width: 0%;\n                border-radius: var(--form-default-border-radius);\n            }\n            .progress_fill:before {\n                content: \"\";\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg,rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.10) 95%, rgba(255, 255, 255, 0.20) 100%);\n                background-size: 200% 100%;\n                animation: gradient 2s linear infinite;\n            }\n            @keyframes gradient {\n                0% { background-position: 100% 100%; }\n                100% { background-position: -100% 100%; }\n            }\n        `, null, {\n            'progress_bar': 'progress_bar',\n            'progress_fill': 'progress_fill'\n        });\n        Form.progressClassesInitialized = true;\n    }\n    const bar = Q(\n        `<div class=\"${Form.progressClasses.progress_bar}\">\n            <div class=\"${Form.progressClasses.progress_fill}\"></div>\n        </div>`\n    );\n    let _min = min, _max = max, _val = value;\n    const fill = bar.find(`.${Form.progressClasses.progress_fill}`);\n    const update = () => {\n        const pct = _max > _min\n            ? ((_val - _min) / (_max - _min)) * 100\n            : 0;\n        fill.css('width', Math.min(Math.max(pct, 0), 100) + '%');\n    };\n    bar.min = function(v) { _min = v; update(); return bar; };\n    bar.max = function(v) { _max = v; update(); return bar; };\n    bar.val = function(v) {\n        if (v === undefined) return _val;\n        _val = v; update(); return bar;\n    };\n    update();\n    this.elements.push(bar);\n    return bar;\n};"
            },
            "Form.Radio": {
                "uuid": "a4c6c188-d5a9-44f9-9c28-e57c47972476",
                "name": "Form.Radio",
                "method": "Component",
                "desc": "Radio component using only HTML elements with val, selected, disable, select methods",
                "type": "Component",
                "example": [
                    "var rg = Q.Form.Radio([{value:'a',text:'A'}]); rg.change((i,v,t)=>{}); rg.disable(0); rg.select(0);"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "empty",
                    "append",
                    "on",
                    "addClass",
                    "removeClass"
                ],
                "script": "Form.prototype.Radio = function(options = []) {\n    if (!Form.radioClassesInitialized) {\n        Form.radioClasses = Q.style(null, `\n            .form_radio { display: flex; flex-direction: column; gap: 5px; }\n            .form_radio_item { display: flex; align-items: center; cursor: pointer;\n            color: var(--form-default-text-color);\n            font: var(--form-default-text); font-size: var(--form-default-font-size);\n            }\n            .form_radio_item::before {\n                content: \"\";\n                display: inline-block;\n                width: 16px;\n                height: 16px;\n                margin-right: 8px;\n                background-color: var(--form-default-background);\n                border-radius: 50%;\n            }\n            .form_radio_item:hover::before {\n                outline: 2px solid var(--form-default-accent-color);\n            }\n            .form_radio_item.selected::before {\n                background-color: var(--form-default-accent-color);\n            }\n            .form_radio_item.disabled {\n                opacity: 0.5;\n                pointer-events: none;\n            }\n        `, null, {\n            'form_radio': 'form_radio',\n            'form_radio_item': 'form_radio_item',\n            'selected': 'selected',\n            'disabled': 'disabled'\n        },false);\n        Form.radioClassesInitialized = true;\n    }\n    const container = Q(`<div class=\"${Form.radioClasses.form_radio}\"></div>`);\n    let _options = options.map(o => ({\n        value: o.value,\n        text: o.text,\n        enabled: o.enabled !== false,\n        selected: !!o.selected,\n        disabled: !!o.disabled\n    }));\n    let _changeCallback;\n    function render() {\n        container.empty();\n        _options.forEach((opt, idx) => {\n            const item = Q(`<div class=\"${Form.radioClasses.form_radio_item}\">${opt.text}</div>`);\n            if (opt.selected) item.addClass(Form.radioClasses.selected);\n            if (opt.disabled) item.addClass(Form.radioClasses.disabled);\n            item.on('click', () => {\n                if (opt.disabled) return;\n                select(idx);\n            });\n            opt._el = item;\n            container.append(item);\n        });\n    }\n    function select(idx) {\n        _options.forEach((o, i) => {\n            const sel = i === idx;\n            o.selected = sel;\n            if (sel) {\n                o._el.addClass(Form.radioClasses.selected);\n            } else {\n                o._el.removeClass(Form.radioClasses.selected);\n            }\n        });\n        if (_changeCallback) {\n            const o = _options[idx];\n            _changeCallback(idx, o.value, o.text);\n        }\n    }\n    container.val = function(vals) {\n        if (vals === undefined) {\n            return _options.map(({_el,...o}) => o);\n        }\n        _options = vals.map(o => ({\n            value: o.value,\n            text: o.text,\n            enabled: o.enabled !== false,\n            selected: !!o.selected,\n            disabled: !!o.disabled\n        }));\n        render();\n        return container;\n    };\n    container.selected = function() {\n        const idx = _options.findIndex(o => o.selected);\n        const o = _options[idx] || {};\n        return { index: idx, value: o.value, text: o.text };\n    };\n    container.disable = function(idx) {\n        const o = _options[idx];\n        if (o) { o.disabled = true; o._el.addClass(Form.radioClasses.disabled); }\n        return container;\n    };\n    container.select = function(idx) {\n        select(idx);\n        return container;\n    };\n    container.change = function(cb) { _changeCallback = cb; return container; };\n    render();\n    this.elements.push(container);\n    return container;\n};"
            },
            "Form.Slider": {
                "uuid": "7a2ab358-1158-432f-a048-abe753a98ea9",
                "name": "Form.Slider",
                "method": "Component",
                "desc": "Slider input component implemented with divs (no native <input>)",
                "type": "Component",
                "example": [
                    "var slider = Q.Form.Slider(10, {min:0, max:100}); slider.change(v=>console.log(v));"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "on",
                    "css"
                ],
                "script": "Form.prototype.Slider = function(initial = 0, options = {}) {\n    if (!Form.sliderClassesInitialized) {\n        Form.sliderClasses = Q.style(null, `\n            .slider { position: relative; width: 100%; height: 8px; background: var(--form-default-background); border-radius: 4px; cursor: pointer; }\n            .slider_track { position: absolute; height:100%; background: var(--form-default-accent-color); border-radius: 4px; }\n            .slider_thumb { position: absolute; top:50%; transform:translate(-50%,-50%); width:5px; height:100%; background: var('--form-default-accent-color'); border-radius: 4px; cursor: pointer; }\n        `, null, {\n            'slider': 'slider',\n            'slider_track': 'slider_track',\n            'slider_thumb': 'slider_thumb'\n        });\n        Form.sliderClassesInitialized = true;\n    }\n    const min = options.min ?? 0, max = options.max ?? 100;\n    let val = Math.min(max, Math.max(min, initial)), callbacks = [];\n    const slider = Q(`<div class=\"${Form.sliderClasses.slider}\">\n        <div class=\"${Form.sliderClasses.slider_track}\"></div>\n        <div class=\"${Form.sliderClasses.slider_thumb}\"></div>\n    </div>`);\n    const containerEl = slider.nodes[0],\n          trackEl     = containerEl.children[0],\n          thumbEl     = containerEl.children[1];\n    function updateThumb() {\n        const pct = (val-min)/(max-min)*100;\n        trackEl.style.width = pct+'%';\n        thumbEl.style.left = pct+'%';\n    }\n    updateThumb();\n    slider.on('mousedown', e => {\n        const rect = containerEl.getBoundingClientRect();\n        const setFromX = x => {\n            let rel = (x - rect.left)/rect.width;\n            rel = Math.max(0,Math.min(1,rel));\n            val = min + rel*(max-min);\n            updateThumb();\n            callbacks.forEach(cb=>cb(val));\n        };\n        setFromX(e.clientX);\n        const move = me=> setFromX(me.clientX),\n              up   = ()=>{ document.removeEventListener('mousemove', move); document.removeEventListener('mouseup', up); };\n        document.addEventListener('mousemove', move);\n        document.addEventListener('mouseup', up);\n    });\n    slider.min = v => v===undefined ? min : (null, slider);\n    slider.max = v => v===undefined ? max : (null, slider);\n    slider.val = v => {\n        if (v===undefined) return val;\n        val = Math.min(max, Math.max(min, v));\n        updateThumb();\n        callbacks.forEach(cb=>cb(val));\n        return slider;\n    };\n    slider.change = cb => { callbacks.push(cb); return slider; };\n    this.elements.push(slider);\n    return slider;\n};"
            },
            "Form.Switch": {
                "uuid": "f2194235-271f-4470-9b04-a52c5e37b381",
                "name": "Form.Switch",
                "method": "Component",
                "desc": "Switch component for Form plugin",
                "type": "Component",
                "example": [
                    "var sw = Q.Form.Switch(3, 0); sw.change(function(pos) { console.log('Switch position:', pos); }); sw.disabled(true);"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "css",
                    "append"
                ],
                "script": "Form.prototype.Switch = function (positions = 2, initial = 0) {\n    if (!Form.switchClassesInitialized) {\n        Form.switchClasses = Q.style(null, `\n            .switch {\n                display: inline-block;\n                position: relative;\n                width: 48px;\n                height: 24px;\n                background: var(--form-default-background, #333);\n                border-radius: 12px;\n                box-shadow: var(--form-default-shadow, 0 0 4px #0004);\n                transition: background 0.2s;\n                cursor: pointer;\n                user-select: none;\n            }\n            .switch_disabled {\n                opacity: 0.5;\n                cursor: not-allowed;\n            }\n            .switch_track {\n                position: absolute;\n                top: 50%;\n                left: 8px;\n                right: 8px;\n                height: 4px;\n                background: #666;\n                border-radius: 2px;\n                transform: translateY(-50%);\n            }\n            .switch_knob {\n                position: absolute;\n                top: 2px;\n                width: 20px;\n                height: 20px;\n                background: var(--form-default-accent-color, #643cf0);\n                border-radius: 50%;\n                box-shadow: 0 1px 4px #0004;\n                transition: left 0.2s;\n                left: 2px;\n                z-index: 2;\n            }\n            .switch_active .switch_knob {\n                background: var(--form-default-accent-color, #643cf0);\n            }\n        `, null, {\n            'switch': 'switch',\n            'switch_disabled': 'switch_disabled',\n            'switch_track': 'switch_track',\n            'switch_knob': 'switch_knob',\n            'switch_active': 'switch_active'\n        });\n        Form.switchClassesInitialized = true;\n    }\n    function clamp(val, min, max) {\n        return Math.max(min, Math.min(max, val));\n    }\n    const sw = Q(`<div class=\"${Form.switchClasses.switch}\"></div>`);\n    const knob = Q(`<div class=\"${Form.switchClasses.switch_knob}\"></div>`);\n    sw.append(knob);\n    let _positions = clamp(parseInt(positions) || 2, 2, 10);\n    let _val = clamp(parseInt(initial) || 0, 0, _positions - 1);\n    let _disabled = false;\n    let _changeHandler = null;\n    function updateKnob() {\n        const percent = _positions === 1 ? 0 : _val / (_positions - 1);\n        const minLeft = 2, maxLeft = 24;\n        const left = minLeft + percent * (maxLeft - minLeft);\n        knob.css('left', `${left}px`);\n        if (_val > 0) sw.addClass(Form.switchClasses.switch_active);\n        else sw.removeClass(Form.switchClasses.switch_active);\n    }\n    function setVal(val, fire = true) {\n        const newVal = clamp(parseInt(val) || 0, 0, _positions - 1);\n        if (_val !== newVal) {\n            _val = newVal;\n            updateKnob();\n            if (fire && typeof _changeHandler === 'function') {\n                _changeHandler(_val);\n            }\n        } else {\n            updateKnob();\n        }\n    }\n    sw.on('click', function (e) {\n        if (_disabled) return;\n        let next = _val + 1;\n        if (next >= _positions) next = 0;\n        setVal(next, true);\n    });\n    sw.attr('tabindex', 0);\n    sw.change = function (cb) {\n        _changeHandler = cb;\n        return sw;\n    };\n    sw.positions = function (n) {\n        if (n === undefined) return _positions;\n        _positions = clamp(parseInt(n) || 2, 2, 10);\n        if (_val >= _positions) _val = 0;\n        updateKnob();\n        return sw;\n    };\n    sw.val = function (v) {\n        if (v === undefined) return _val;\n        setVal(v, true);\n        return sw;\n    };\n    sw.disabled = function (state) {\n        if (typeof state === 'undefined') return _disabled;\n        _disabled = !!state;\n        if (_disabled) sw.addClass(Form.switchClasses.switch_disabled);\n        else sw.removeClass(Form.switchClasses.switch_disabled);\n        return sw;\n    };\n    sw.remove = function () {\n        sw.remove();\n        return null;\n    };\n    updateKnob();\n    this.elements.push(sw);\n    return sw;\n};"
            },
            "Form.Tags": {
                "uuid": "3c6d53cc-49da-49cf-9643-c0b309eff17d",
                "name": "Form.Tags",
                "method": "Component",
                "desc": "Tags component for Form plugin",
                "type": "Component",
                "example": [
                    "var tags = Q.Form.Tags('tag1,tag2,tag3', 'Add tags...'); tags.change(function(value) { console.log(value); });"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "val",
                    "prop",
                    "html",
                    "before",
                    "after",
                    "css",
                    "find",
                    "focus",
                    "children"
                ],
                "script": "Form.prototype.Tags = function(value = '', placeholder = '', options = {}) {\n    const defaultOptions = {\n        separator: ',',\n        maxTags: null,\n        minChars: 1\n    };\n    options = Object.assign({}, defaultOptions, options);\n    if (!Form.tagsClassesInitialized) {\n        Form.tagsClasses = Q.style('', `\n            .form_tags_container {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 5px;\n                width: 100%;\n                min-height: 36px;\n                padding: 3px;\n                outline: var(--form-default-outline);\n                border-radius: var(--form-default-border-radius);\n                background-color: var(--form-default-input-background-color);\n                cursor: text;\n            }\n            .form_tags_container:focus-within {\n                border-color: var(--form-default-outline-focus);\n                outline: none;\n            }\n            .form_tag {\n            position:relative;\n            overflow: hidden;\n                display: inline-flex;\n                align-items: center;\n                padding: 0 30px 0 5px;\n                background: var(--form-default-background);\n                color: var(--form-default-text-color);\n                border-radius: var(--form-default-border-radius);\n                font-size: var(--form-default-font-size);\n                font-family: var(--form-default-font-family);\n                user-select: none;\n            }\n            .form_tag_editable {\n                background-color: var(--form-default-background-hover);\n            }\n            .form_tag_remove {\n                display: flex;\n                position: absolute;\n                right: 0;\n                cursor: pointer;\n                width: 20px;\n                height: 100%;\n                align-items: center;\n                justify-content: center;\n                font-size: 12px;\n            }\n            .form_tag_input {\n                flex-grow: 1;\n                min-width: 60px;\n                border: none;\n                outline: none;\n                padding: 5px;\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                background: transparent;\n                color: var(--form-default-text-color);\n            }\n            .form_tag.dragging {\n                opacity: 0.2;\n            }\n            .form_tag[draggable=true] {\n                cursor: move;\n            }\n        `, null, {\n            'form_tags_container': 'form_tags_container',\n            'form_tag': 'form_tag',\n            'form_tag_editable': 'form_tag_editable',\n            'form_tag_remove': 'form_tag_remove',\n            'form_tag_input': 'form_tag_input'\n        });\n        Form.tagsClassesInitialized = true;\n    }\n    const container = Q(`<div class=\"${Form.tagsClasses.form_tags_container}\"></div>`);\n    const input = Q(`<input class=\"${Form.tagsClasses.form_tag_input}\" placeholder=\"${placeholder}\" type=\"text\">`);\n    const state = {\n        tags: [],\n        draggedTag: null,\n        currentEditTag: null\n    };\n    container.append(input);\n    if (value && typeof value === 'string' && value.trim() !== '') {\n        const initialTags = value.split(options.separator)\n                               .map(tag => tag.trim())\n                               .filter(Boolean);\n        initialTags.forEach(tag => addTag(tag));\n    }\n    function addTag(text) {\n        if (!text || text.length < options.minChars) return;\n        if (options.maxTags !== null && state.tags.length >= options.maxTags) return;\n        if (state.tags.includes(text)) return;\n        const tag = Q(`<div class=\"${Form.tagsClasses.form_tag}\" draggable=\"true\"></div>`);\n        const tagText = Q(`<span>${text}</span>`);\n        const removeBtn = Q(`<span class=\"${Form.tagsClasses.form_tag_remove}\">\u00d7</span>`);\n        tag.append(tagText, removeBtn);\n        state.tags.push(text);\n        input.before(tag);\n        setupDragAndDrop(tag);\n        tag.on('click', function(e) {\n            if (e.target.classList.contains(Form.tagsClasses.form_tag_remove.split(' ')[0])) return;\n            tag.html('');\n            tag.addClass(Form.tagsClasses.form_tag_editable);\n            const editInput = Q(`<input type=\"text\" value=\"${text}\" style=\"border:none; background:transparent; color:inherit; outline:none; width:auto;\">`);\n            tag.append(editInput);\n            editInput.focus();\n            state.currentEditTag = { tag, originalText: text };\n            editInput.on('blur', function() {\n                finishEditing(editInput.val());\n            });\n            editInput.on('keydown', function(e) {\n                if (e.key === 'Enter') {\n                    finishEditing(editInput.val());\n                    e.preventDefault();\n                } else if (e.key === 'Escape') {\n                    finishEditing(text); \n                    e.preventDefault();\n                }\n            });\n        });\n        removeBtn.on('click', function() {\n            removeTag(tag, text);\n        });\n        if (typeof container.changeCallback === 'function') {\n            container.changeCallback(state.tags.join(options.separator));\n        }\n    }\n    function finishEditing(newText) {\n        if (!state.currentEditTag) return;\n        const { tag, originalText } = state.currentEditTag;\n        const index = state.tags.indexOf(originalText);\n        if (index !== -1) {\n            state.tags.splice(index, 1);\n        }\n        if (newText && newText.trim() && newText.length >= options.minChars) {\n            tag.removeClass(Form.tagsClasses.form_tag_editable);\n            tag.html(`<span>${newText}</span><span class=\"${Form.tagsClasses.form_tag_remove}\">\u00d7</span>`);\n            tag.find(`.${Form.tagsClasses.form_tag_remove.split(' ')[0]}`).on('click', function() {\n                removeTag(tag, newText);\n            });\n            state.tags.push(newText);\n        } else {\n            tag.remove();\n        }\n        state.currentEditTag = null;\n        if (typeof container.changeCallback === 'function') {\n            container.changeCallback(state.tags.join(options.separator));\n        }\n    }\n    function removeTag(tagElement, text) {\n        tagElement.remove();\n        const index = state.tags.indexOf(text);\n        if (index !== -1) {\n            state.tags.splice(index, 1);\n        }\n        if (typeof container.changeCallback === 'function') {\n            container.changeCallback(state.tags.join(options.separator));\n        }\n    }\n    function setupDragAndDrop(tag) {\n        tag.on('dragstart', function(e) {\n            state.draggedTag = tag;\n            tag.addClass('dragging');\n            if (e.dataTransfer) {\n                e.dataTransfer.setData('text/plain', '');\n                e.dataTransfer.effectAllowed = 'move';\n            }\n        });\n        tag.on('dragend', function() {\n            state.draggedTag = null;\n            tag.removeClass('dragging');\n        });\n        tag.on('dragover', function(e) {\n            if (e.preventDefault) {\n                e.preventDefault(); \n            }\n            return false;\n        });\n        tag.on('dragenter', function(e) {\n            e.preventDefault();\n        });\n        tag.on('drop', function(e) {\n            e.stopPropagation();\n            if (!state.draggedTag || state.draggedTag === tag) {\n                return;\n            }\n            const allTags = Array.from(container.children()).filter(\n                el => el.classList.contains(Form.tagsClasses.form_tag.split(' ')[0])\n            );\n            const fromIndex = allTags.indexOf(state.draggedTag);\n            const toIndex = allTags.indexOf(tag);\n            if (fromIndex < toIndex) {\n                tag.after(state.draggedTag);\n            } else {\n                tag.before(state.draggedTag);\n            }\n            const movedTag = state.tags.splice(fromIndex, 1)[0];\n            state.tags.splice(toIndex, 0, movedTag);\n            if (typeof container.changeCallback === 'function') {\n                container.changeCallback(state.tags.join(options.separator));\n            }\n            return false;\n        });\n    }\n    container.on('click', function(e) {\n        if (e.target === container.element) {\n            input.focus();\n        }\n    });\n    input.on('keydown', function(e) {\n        if (e.key === 'Enter' || e.key === ',' || e.key === ';' || (options.separator === ' ' && e.key === ' ')) {\n            const value = input.val().trim();\n            if (value) {\n                addTag(value);\n                input.val('');\n                e.preventDefault();\n            }\n        }\n        else if (e.key === 'Backspace' && input.val() === '' && state.tags.length > 0) {\n            const tagElements = container.nodes[0].querySelectorAll(`.${Form.tagsClasses.form_tag.split(' ')[0]}`);\n            if (tagElements.length > 0) {\n                const lastTag = Q(tagElements[tagElements.length - 1]);\n                lastTag.click(); \n            }\n        }\n    });\n    input.on('paste', function(e) {\n        let pastedText;\n        if (window.clipboardData && window.clipboardData.getData) {\n            pastedText = window.clipboardData.getData('Text');\n        } else if (e.clipboardData && e.clipboardData.getData) {\n            pastedText = e.clipboardData.getData('text/plain');\n        }\n        if (pastedText) {\n            e.preventDefault();\n            const tags = pastedText.split(options.separator).map(tag => tag.trim()).filter(Boolean);\n            tags.forEach(tag => addTag(tag));\n            input.val('');\n        }\n    });\n    input.on('blur', function() {\n        const inputValue = input.val();\n        const value = inputValue ? inputValue.trim() : '';\n        if (value) {\n            addTag(value);\n            input.val('');\n        }\n    });\n    container.val = function(value) {\n        if (value === undefined) {\n            return state.tags.join(options.separator);\n        }\n        if (value === '') {\n            if (container.nodes && container.nodes.length > 0) {\n                const tagElements = container.nodes[0].querySelectorAll(`.${Form.tagsClasses.form_tag.split(' ')[0]}`);\n                for (let i = 0; i < tagElements.length; i++) {\n                    if (tagElements[i].parentNode) {\n                        tagElements[i].parentNode.removeChild(tagElements[i]);\n                    }\n                }\n            }\n            state.tags = [];\n        } else {\n            if (container.nodes && container.nodes.length > 0) {\n                const tagElements = container.nodes[0].querySelectorAll(`.${Form.tagsClasses.form_tag.split(' ')[0]}`);\n                for (let i = 0; i < tagElements.length; i++) {\n                    if (tagElements[i].parentNode) {\n                        tagElements[i].parentNode.removeChild(tagElements[i]);\n                    }\n                }\n            }\n            state.tags = [];\n            const newTags = value.split(options.separator).map(tag => tag.trim()).filter(Boolean);\n            newTags.forEach(tag => addTag(tag));\n        }\n        if (typeof container.changeCallback === 'function') {\n            container.changeCallback(state.tags.join(options.separator));\n        }\n        return container;\n    };\n    container.placeholder = function(text) {\n        input.attr('placeholder', text);\n        return container;\n    };\n    container.disabled = function(state) {\n        input.prop('disabled', state);\n        container.css('pointer-events', state ? 'none' : 'auto');\n        if (state) {\n            container.addClass(Form.classes.q_form_disabled);\n        } else {\n            container.removeClass(Form.classes.q_form_disabled);\n        }\n        return container;\n    };\n    container.setSeparator = function(separator) {\n        options.separator = separator;\n        return container;\n    };\n    container.reset = function() {\n        return container.val('');\n    };\n    container.change = function(callback) {\n        container.changeCallback = callback;\n        return container;\n    };\n    this.elements.push(container);\n    return container;\n};"
            },
            "Form.TextArea": {
                "uuid": "aeced973-9185-4772-8cab-61706534c7fc",
                "name": "Form.TextArea",
                "method": "Component",
                "desc": "TextArea component for Form plugin",
                "type": "Component",
                "example": [
                    "var textarea = Q.Form.TextArea('Initial content', 'Enter text...'); textarea.change(function(value) { console.log(value); });"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "val",
                    "prop"
                ],
                "script": "Form.prototype.TextArea = function(value = '', placeholder = '') {\n    if (!Form.textAreaClassesInitialized) {\n        Form.textAreaClasses = Q.style('', `\n            .form_textarea {\n                width: 100%;\n                padding: var(--form-default-padding);\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n                border-radius: var(--form-default-border-radius);\n                background-color: var(--form-default-background);\n                color: var(--form-default-text-color);\n                outline: var(--form-default-outline);\n                border: 0;\n                resize: none;\n                min-height: 100px;\n            }\n            .form_textarea:focus {\n                outline: var(--form-default-outline-focus);\n            }\n        `, null, {\n            'form_textarea': 'form_textarea'\n        });\n        Form.textAreaClassesInitialized = true;\n    }\n    const textarea = Q('<textarea>')\n        .addClass(Form.textAreaClasses.form_textarea)\n        .attr('placeholder', placeholder)\n        .val(value);\n    textarea.disabled = function(state) {\n        textarea.prop('disabled', state);\n        return textarea;\n    };\n    textarea.reset = function() {\n        textarea.val('');\n        return textarea;\n    };\n    textarea.resizeable = function(x = true, y = true) {\n        textarea.css('resize', (x ? 'horizontal' : 'none') + ' ' + (y ? 'vertical' : 'none'));\n        return textarea;\n    }\n    textarea.change = function(callback) {\n        textarea.on('input', function() {\n            callback(this.value);\n        });\n        return textarea;\n    };\n    this.elements.push(textarea);\n    return textarea;\n};"
            },
            "Form.TextBox": {
                "uuid": "7b02080d-acef-42ff-a518-5dda6b025252",
                "name": "Form.TextBox",
                "method": "Component",
                "desc": "TextBox component for Form plugin",
                "type": "Component",
                "example": [
                    "var textbox = Q.Form.TextBox('text', 'Initial value', 'Enter text...'); textbox.change(function(value) { console.log(value); });"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "val",
                    "prop"
                ],
                "script": "Form.prototype.TextBox = function(type = 'text', value = '', placeholder = '') {\n    if (!Form.textBoxClassesInitialized) {\n        Form.textBoxClasses = Q.style('', `\n            .q_form_input {\n                width: 100%;\n                font-family: var(--form-default-font-family);\n                padding: var(--form-default-padding);\n                font-size: var(--form-default-font-size);\n                border-radius: var(--form-default-border-radius);\n                background-color: var(--form-default-background);\n                color: var(--form-default-text-color);\n                border: 0;\n                resize: none;\n                transition: background-color 0s ease, color 0s ease, outline 0s ease;\n            }\n            /* Fix for autofill background color */\n            .q_form_input:-webkit-autofill,\n            .q_form_input:-webkit-autofill:hover,\n            .q_form_input:-webkit-autofill:focus,\n            .q_form_input:-webkit-autofill:active {\n                -webkit-box-shadow: 0 0 0 30px var(--form-default-background) inset !important;\n                -webkit-text-fill-color: var(--form-default-text-color) !important;\n                transition: background-color 5000s ease-in-out 0s;\n                background-color: var(--form-default-background) !important;\n            }\n            .q_form_input:hover {\n                outline: var(--form-default-outline-hover);\n                background-color: var(--form-default-background-hover);\n            }\n            .q_form_input:hover:-webkit-autofill {\n                -webkit-box-shadow: 0 0 0 30px var(--form-default-background-hover) inset !important;\n                background-color: var(--form-default-background-hover) !important;\n            }\n            .q_form_input:focus {\n                outline: var(--form-default-outline-focus);\n                background-color: var(--form-default-background-focus);\n            }\n            .q_form_input:focus:-webkit-autofill {\n                -webkit-box-shadow: 0 0 0 30px var(--form-default-background-focus) inset !important;\n                background-color: var(--form-default-background-focus) !important;\n            }\n            .q_form_input:active {\n                outline: var(--form-default-outline-active);\n                background-color: var(--form-default-background-active);\n            }\n            .q_form_input:disabled {\n                background-color: var(--form-default-background-disabled);\n                color: var(--form-default-text-color-disabled);\n                cursor: not-allowed;\n            }\n        `, null, {\n            'q_form_input': 'q_form_input'\n        });\n        Form.textBoxClassesInitialized = true;\n    }\n    const input = Q(`<input class=\"${Form.textBoxClasses.q_form_input}\" type=\"${type}\" placeholder=\"${placeholder}\" value=\"${value}\">`);\n    input.placeholder = function(text) {\n        input.attr('placeholder', text);\n    };\n    input.disabled = function(state) {\n        input.prop('disabled', state);\n        if (state) {\n            input.addClass(Form.classes.q_form_disabled);\n        } else {\n            input.removeClass(Form.classes.q_form_disabled);\n        }\n    };\n    input.reset = function() {\n        input.val('');\n    };\n    input.change = function(callback) {\n        input.on('change input', function() {\n            callback(this.value);\n        });\n    };\n    this.elements.push(input);\n    return input;\n};"
            },
            "Form.Uploader": {
                "uuid": "fc054522-1105-4543-b636-d7ead36a1b23",
                "name": "Form.Uploader",
                "method": "Component",
                "desc": "File upload component with drag and drop functionality",
                "type": "Component",
                "example": [
                    "var uploader = Q.Form.Uploader({ fileTypes: '.jpg,.png', preview: true }); uploader.change(function(files) { console.log(files); });"
                ],
                "dependencies": [
                    "Form",
                    "style",
                    "addClass",
                    "removeClass",
                    "on",
                    "attr",
                    "val",
                    "prop",
                    "html",
                    "append",
                    "css",
                    "text",
                    "remove"
                ],
                "script": "Form.prototype.Uploader = function (options = {}) {\n    const defaultOptions = {\n        fileTypes: '*', // Accepted file types: 'image/jpeg,image/png' or '.jpg,.png'\n        preview: true,  // Show previews for images/videos\n        thumbSize: 100, // Thumbnail size (px)\n        allowDrop: true, // Allow drag and drop\n        multiple: false, // Allow multiple file selection\n        placeholder: 'Drop files here or click to select'\n    };\n    options = Object.assign({}, defaultOptions, options);\n    if (!Form.uploaderClassesInitialized) {\n        Form.uploaderClasses = Q.style('', `\n            .form_uploader_container {\n            user-select: none;\n                -webkit-user-select: none;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                outline: var(--form-default-outline);\n                border-radius: var(--form-default-border-radius);\n                background-color: var(--form-default-background);\n                padding: 10px;\n                color: var(--form-default-text-color);\n            }\n            .form_uploader_container.drag_over {\n                outline: var(--form-default-outline-active);\n                background-color: var(--form-default-background-hover);\n            }\n            .form_uploader_drop_area {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                padding: 20px;\n                text-align: center;\n                cursor: pointer;\n                color: var(--form-default-text-color);\n                min-height: 120px;\n            }\n            .form_uploader_icon {\n                font-size: 32px;\n                margin-bottom: 10px;\n                opacity: 0.7;\n            }\n            .form_uploader_text {\n                margin-bottom: 10px;\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n            }\n            .form_uploader_button {\n                padding: var(--form-default-padding);\n                background-color: var(--form-default-button-background-color);\n                color: var(--form-default-button-text-color);\n                border: none;\n                border-radius: var(--form-default-border-radius);\n                cursor: pointer;\n                font-family: var(--form-default-font-family);\n                font-size: var(--form-default-font-size);\n            }\n            .form_uploader_button:hover {\n                background-color: var(--form-default-background-hover);\n                color: var(--form-default-text-color-hover);\n            }\n            .form_uploader_input {\n                display: none;\n            }\n            .form_uploader_preview_container {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 5px;\n                margin-top: 5px;\n            }\n            .form_uploader_preview_item {\n                position: relative;\n                border-radius: var(--form-default-border-radius);\n                overflow: hidden;\n                outline: var(--form-default-outline);\n            }\n            .form_uploader_preview_image {\n                object-fit: cover;\n                display: block;\n            }\n            .form_uploader_preview_video {\n                object-fit: cover;\n                display: block;\n            }\n            .form_uploader_preview_icon {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: var(--form-default-input-text-color);\n                background-color: rgba(37, 37, 37, 0.8);\n                font-size: 24px;\n            }\n            .form_uploader_preview_info {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                padding: 4px 6px;\n                background: rgba(0, 0, 0, 0.7);\n                color: #fff;\n                font-size: 10px;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                overflow: hidden;\n            }\n        `, null, {\n            'form_uploader_container': 'form_uploader_container',\n            'drag_over': 'drag_over',\n            'form_uploader_drop_area': 'form_uploader_drop_area',\n            'form_uploader_icon': 'form_uploader_icon',\n            'form_uploader_text': 'form_uploader_text',\n            'form_uploader_button': 'form_uploader_button',\n            'form_uploader_input': 'form_uploader_input',\n            'form_uploader_preview_container': 'form_uploader_preview_container',\n            'form_uploader_preview_item': 'form_uploader_preview_item',\n            'form_uploader_preview_image': 'form_uploader_preview_image',\n            'form_uploader_preview_video': 'form_uploader_preview_video',\n            'form_uploader_preview_icon': 'form_uploader_preview_icon',\n            'form_uploader_preview_info': 'form_uploader_preview_info'\n        });\n        Form.uploaderClassesInitialized = true;\n    }\n    const container = Q(`<div class=\"${Form.classes.q_form} ${Form.uploaderClasses.form_uploader_container}\"></div>`);\n    const dropArea = Q(`<div class=\"${Form.uploaderClasses.form_uploader_drop_area}\"></div>`);\n    const uploadIcon = Q(`<div class=\"${Form.uploaderClasses.form_uploader_icon}\">\ud83d\udcc2</div>`);\n    const text = Q(`<div class=\"${Form.uploaderClasses.form_uploader_text}\">${options.placeholder}</div>`);\n    const browseButton = Q(`<button type=\"button\" class=\"${Form.uploaderClasses.form_uploader_button}\">Browse Files</button>`);\n    const fileInput = Q(`<input type=\"file\" class=\"${Form.uploaderClasses.form_uploader_input}\">`);\n    if (options.multiple) {\n        fileInput.attr('multiple', true);\n    }\n    if (options.fileTypes && options.fileTypes !== '*') {\n        fileInput.attr('accept', options.fileTypes);\n    }\n    dropArea.append(uploadIcon, text, browseButton);\n    container.append(dropArea, fileInput);\n    let previewContainer = null;\n    if (options.preview) {\n        previewContainer = Q(`<div class=\"${Form.uploaderClasses.form_uploader_preview_container}\"></div>`);\n        container.append(previewContainer);\n    }\n    const state = {\n        files: [],\n        fileObjects: []\n    };\n    function formatFileSize(bytes) {\n        if (bytes === 0) return '0 B';\n        const k = 1024;\n        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n    function getFileExtension(filename) {\n        return filename.split('.').pop().toUpperCase();\n    }\n    function handleFiles(files) {\n        if (!files || files.length === 0) return;\n        Array.from(files).forEach(file => {\n            const fileInfo = {\n                name: file.name,\n                size: file.size,\n                formattedSize: formatFileSize(file.size),\n                type: file.type,\n                extension: getFileExtension(file.name)\n            };\n            state.files.push(fileInfo);\n            state.fileObjects.push(file);\n            if (options.preview) {\n                generatePreview(file, fileInfo);\n            }\n        });\n        if (typeof container.changeCallback === 'function') {\n            container.changeCallback(state.files);\n        }\n    }\n    function generatePreview(file, fileInfo) {\n        const previewItem = Q(`<div class=\"${Form.uploaderClasses.form_uploader_preview_item}\"></div>`);\n        const fileInfoElement = Q(`<div class=\"${Form.uploaderClasses.form_uploader_preview_info}\">${file.name} (${fileInfo.formattedSize})</div>`);\n        const removeButton = Q(`<div class=\"${Form.classes.form_close_button}\">\u00d7</div>`);\n        previewItem.css({\n            width: options.thumbSize + 'px',\n            height: options.thumbSize + 'px'\n        });\n        const titleInfo = `Name: ${file.name}\\nSize: ${fileInfo.formattedSize}\\nType: ${file.type}`;\n        previewItem.attr('title', titleInfo);\n        if (file.type.startsWith('image/')) {\n            const img = Q(`<img class=\"${Form.uploaderClasses.form_uploader_preview_image}\" alt=\"${file.name}\">`);\n            img.css({\n                width: '100%',\n                height: '100%'\n            });\n            img.attr('title', titleInfo);\n            const reader = new FileReader();\n            reader.onload = function (e) {\n                img.attr('src', e.target.result);\n                fileInfo.preview = e.target.result;\n            };\n            reader.readAsDataURL(file);\n            previewItem.append(img);\n        }\n        else if (file.type.startsWith('video/')) {\n            const video = Q(`<video class=\"${Form.uploaderClasses.form_uploader_preview_video}\" controls muted>`);\n            video.css({\n                width: '100%',\n                height: '100%'\n            });\n            video.attr('title', titleInfo);\n            const reader = new FileReader();\n            reader.onload = function (e) {\n                video.attr('src', e.target.result);\n                fileInfo.preview = e.target.result;\n            };\n            reader.readAsDataURL(file);\n            previewItem.append(video);\n        }\n        else {\n            const fileIcon = Q(`<div class=\"${Form.uploaderClasses.form_uploader_preview_icon}\"></div>`);\n            fileIcon.css({\n                width: '100%',\n                height: '100%'\n            });\n            fileIcon.attr('title', titleInfo);\n            fileIcon.text(fileInfo.extension);\n            previewItem.append(fileIcon);\n        }\n        previewItem.append(fileInfoElement, removeButton);\n        fileInfo.element = previewItem;\n        if (previewContainer) {\n            previewContainer.append(previewItem);\n        }\n        removeButton.on('click', () => {\n            removeFile(fileInfo);\n        });\n    }\n    function removeFile(fileInfo) {\n        const index = state.files.indexOf(fileInfo);\n        if (index !== -1) {\n            state.files.splice(index, 1);\n            state.fileObjects.splice(index, 1);\n            if (fileInfo.element) {\n                fileInfo.element.remove();\n            }\n            if (typeof container.changeCallback === 'function') {\n                container.changeCallback(state.files);\n            }\n        }\n    }\n    function resetUploader() {\n        state.files = [];\n        state.fileObjects = [];\n        if (previewContainer) {\n            previewContainer.html('');\n        }\n        fileInput.val('');\n    }\n    if (options.allowDrop) {\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            dropArea.on(eventName, (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n            });\n        });\n        ['dragenter', 'dragover'].forEach(eventName => {\n            dropArea.on(eventName, () => {\n                container.addClass(Form.uploaderClasses.drag_over);\n            });\n        });\n        ['dragleave', 'drop'].forEach(eventName => {\n            dropArea.on(eventName, () => {\n                container.removeClass(Form.uploaderClasses.drag_over);\n            });\n        });\n        dropArea.on('drop', (e) => {\n            const files = e.dataTransfer.files;\n            if (!options.multiple && files.length > 1) {\n                handleFiles([files[0]]);\n            } else {\n                handleFiles(files);\n            }\n        });\n    }\n    browseButton.on('click', function () {\n        fileInput.nodes[0].click();\n    });\n    dropArea.on('click', function (e) {\n        if (e.target !== browseButton.nodes[0]) {\n            fileInput.nodes[0].click();\n        }\n    });\n    fileInput.on('change', function () {\n        if (!options.multiple) {\n            resetUploader(); // Clear previous files if not multiple\n        }\n        handleFiles(this.files);\n    });\n    container.val = function (value) {\n        if (value === undefined) {\n            return {\n                files: state.files,\n                fileObjects: state.fileObjects\n            };\n        }\n        if (value === '' || value === null) {\n            resetUploader();\n            return container;\n        }\n        return container;\n    };\n    container.reset = function () {\n        resetUploader();\n        return container;\n    };\n    container.disabled = function (state) {\n        if (state) {\n            container.css('opacity', '0.5');\n            container.css('pointer-events', 'none');\n            fileInput.prop('disabled', true);\n        } else {\n            container.css('opacity', '1');\n            container.css('pointer-events', 'auto');\n            fileInput.prop('disabled', false);\n        }\n        return container;\n    };\n    container.change = function (callback) {\n        container.changeCallback = callback;\n        return container;\n    };\n    this.elements.push(container);\n    return container;\n};"
            },
            "Media": {
                "uuid": "663ae1c0-f9d7-4896-b71a-e4637f805c75",
                "name": "Media",
                "method": "Constructor",
                "desc": "Core media functionality provider for VulpiniQ",
                "type": "Constructor",
                "example": [
                    "var media = new Media();",
                    "var media = Media();",
                    "Q.Media();"
                ],
                "dependencies": [
                    "style"
                ],
                "script": "function Media(options = {}) {\n    if (!(this instanceof Media)) {\n        return new Media(options);\n    }\n    if (!Media.initialized) {\n        Q.style(`\n            --media-timeline-bg: #232323;\n            --media-timeline-track-border: #3338;\n            --media-timeline-segment-normal: #4caf50;\n            --media-timeline-segment-alert: #ff9800;\n            --media-timeline-segment-warning: #f44336;\n            --media-timeline-handle-bg:rgba(255, 255, 255, 0.21);\n        `);\n        Media.initialized = true;\n        console.log('Media core initialized');\n    }\n    return this;\n};\nQ.Media = Media;"
            },
            "Media.Selector": {
                "uuid": "93cebfc4-f311-4851-8caa-f1a99c4b180a",
                "name": "Media.Selector",
                "method": "Component",
                "desc": "Region selection tool for images and videos",
                "type": "Component",
                "example": [
                    "var selector = Media.Selector(document.getElementById('video-container'));",
                    "var selector = Media.Selector('#image-container', {default: {x: 10, y: 10, w: 30, h: 30}});",
                    "var selector = Media.Selector('#media').add(20, 20, 40, 40);",
                    "var selector = Media.Selector('#media').aspectRatio('16:9');",
                    "var selector = Media.Selector('#media').set(10, 10, 50, 50);",
                    "var coords = Media.Selector('#media').get();"
                ],
                "dependencies": [
                    "style"
                ],
                "script": "Media.prototype.Selector = function(container, options = {}) {\n    if (!Media.selectorClassesInitialized) {\n        Media.selectorClasses = Q.style(`\n            --media-selector-bg: rgba(0,0,0,0.15);\n            --media-selector-rect: #4caf50;\n            --media-selector-rect-active: #ff9800;\n            --media-selector-dot: #fff;\n            --media-selector-dot-border: #333;\n        `, `\n            .media-selector-canvas {\n                position: absolute;\n                left: 0; top: 0; width: 100%; height: 100%;\n                pointer-events: auto;\n                z-index: 20;\n                background: var(--media-selector-bg, rgba(0,0,0,0.15));\n                cursor: crosshair;\n                user-select: none;\n            }\n            .media-selector-rect {\n                position: absolute;\n                border: 2px solid var(--media-selector-rect, #4caf50);\n                background: rgba(76,175,80,0.08);\n                box-sizing: border-box;\n                pointer-events: auto;\n            }\n            .media-selector-rect.active {\n                border-color: var(--media-selector-rect-active, #ff9800);\n                background: rgba(255,152,0,0.08);\n            }\n            .media-selector-dot {\n                position: absolute;\n                width: 12px; height: 12px;\n                border-radius: 50%;\n                background: var(--media-selector-dot, #fff);\n                border: 2px solid var(--media-selector-dot-border, #333);\n                right: -8px; bottom: -8px;\n                cursor: nwse-resize;\n                z-index: 2;\n            }\n        `, null, {\n            'media-selector-canvas': 'media-selector-canvas',\n            'media-selector-rect': 'media-selector-rect',\n            'media-selector-dot': 'media-selector-dot'\n        }, false);\n        Media.selectorClassesInitialized = true;\n    }\n    const classes = Media.selectorClasses;\n    const wrapper = Q(container);\n    if (window.getComputedStyle(wrapper.nodes[0]).position === 'static') {\n        wrapper.css('position', 'relative');\n    }\n    const canvas = Q('<canvas class=\"' + classes['media-selector-canvas'] + '\"></canvas>');\n    wrapper.append(canvas);\n    let selection = null;\n    let defaultDims = { x: 10, y: 10, w: 30, h: 30 }; // percent\n    function getMediaRect() {\n        const media = wrapper.find('video') || wrapper.find('img');\n        if (!media || !media.nodes[0]) {\n            const rect = wrapper.nodes[0].getBoundingClientRect();\n            return { left: 0, top: 0, width: rect.width, height: rect.height };\n        }\n        const mediaRect = media.nodes[0].getBoundingClientRect();\n        const wrapperRect = wrapper.nodes[0].getBoundingClientRect();\n        return {\n            left: mediaRect.left - wrapperRect.left,\n            top: mediaRect.top - wrapperRect.top,\n            width: mediaRect.width,\n            height: mediaRect.height\n        };\n    }\n    function percentToPx({x, y, w, h}) {\n        const mediaRect = getMediaRect();\n        return {\n            x: mediaRect.left + mediaRect.width * x / 100,\n            y: mediaRect.top + mediaRect.height * y / 100,\n            w: mediaRect.width * w / 100,\n            h: mediaRect.height * h / 100\n        };\n    }\n    function pxToPercent({x, y, w, h}) {\n        const mediaRect = getMediaRect();\n        return {\n            x: mediaRect.width ? ((x - mediaRect.left) / mediaRect.width * 100) : 0,\n            y: mediaRect.height ? ((y - mediaRect.top) / mediaRect.height * 100) : 0,\n            w: mediaRect.width ? (w / mediaRect.width * 100) : 0,\n            h: mediaRect.height ? (h / mediaRect.height * 100) : 0\n        };\n    }\n    function renderSelections() {\n        const el = canvas.nodes[0];\n        const rect = wrapper.nodes[0].getBoundingClientRect();\n        el.width = rect.width;\n        el.height = rect.height;\n        el.style.width = rect.width + \"px\";\n        el.style.height = rect.height + \"px\";\n        const ctx = el.getContext('2d');\n        ctx.clearRect(0, 0, el.width, el.height);\n        if (!selection) {\n            return;\n        }\n        const dimsPx = percentToPx(selection);\n        ctx.save();\n        ctx.fillStyle = 'rgba(0,0,0,0.7)';\n        ctx.fillRect(0, 0, el.width, el.height);\n        ctx.clearRect(dimsPx.x, dimsPx.y, dimsPx.w, dimsPx.h);\n        ctx.restore();\n        ctx.save();\n        ctx.strokeStyle = 'rgba(255,255,255,0.1)';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(dimsPx.x, dimsPx.y, dimsPx.w, dimsPx.h);\n        ctx.restore();\n        ctx.save();\n        ctx.clearRect(dimsPx.x + dimsPx.w - 3, dimsPx.y + dimsPx.h - 3, 6, 6);\n        ctx.strokeStyle = '#333';\n        ctx.lineWidth = 0.8;\n        ctx.fillStyle = 'rgba(255,255,255,0.1)';\n        ctx.beginPath();\n        ctx.rect(dimsPx.x + dimsPx.w - 3, dimsPx.y + dimsPx.h - 3, 6, 6);\n        ctx.fill();\n        ctx.stroke();\n        ctx.restore();\n    }\n    let drawing = null;\n    let drag = null;\n    canvas.on('mousedown', function(e) {\n        const rect = wrapper.nodes[0].getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        if (selection) {\n            const dimsPx = percentToPx(selection);\n            const dx = x - (dimsPx.x + dimsPx.w);\n            const dy = y - (dimsPx.y + dimsPx.h);\n            if (dx*dx + dy*dy <= 64) {\n                drag = {\n                    type: 'resize',\n                    startX: e.clientX,\n                    startY: e.clientY,\n                    orig: {...selection}\n                };\n                document.body.style.userSelect = 'none';\n                e.stopPropagation();\n                return;\n            }\n            if (\n                x >= dimsPx.x && x <= dimsPx.x + dimsPx.w &&\n                y >= dimsPx.y && y <= dimsPx.y + dimsPx.h\n            ) {\n                drag = {\n                    type: 'move',\n                    startX: e.clientX,\n                    startY: e.clientY,\n                    orig: {...selection}\n                };\n                document.body.style.userSelect = 'none';\n                e.stopPropagation();\n                return;\n            }\n        }\n        drawing = { startX: x, startY: y, endX: x, endY: y };\n    });\n    document.addEventListener('mousemove', function(e) {\n        if (drawing) {\n            const rect = wrapper.nodes[0].getBoundingClientRect();\n            drawing.endX = Math.max(0, Math.min(e.clientX - rect.left, rect.width));\n            drawing.endY = Math.max(0, Math.min(e.clientY - rect.top, rect.height));\n            renderSelections();\n            const x = Math.min(drawing.startX, drawing.endX);\n            const y = Math.min(drawing.startY, drawing.endY);\n            const w = Math.abs(drawing.endX - drawing.startX);\n            const h = Math.abs(drawing.endY - drawing.startY);\n            const el = canvas.nodes[0];\n            const ctx = el.getContext('2d');\n            ctx.save();\n            ctx.strokeStyle = '#ff9800';\n            ctx.lineWidth = 1;\n            ctx.strokeRect(x, y, w, h);\n            ctx.restore();\n        }\n        if (drag && selection) {\n            const sel = selection;\n            const mediaRect = getMediaRect();\n            if (drag.type === 'resize') {\n                let dx = (e.clientX - drag.startX) / mediaRect.width * 100;\n                let dy = (e.clientY - drag.startY) / mediaRect.height * 100;\n                let newW = Math.max(2, drag.orig.w + dx);\n                let newH = Math.max(2, drag.orig.h + dy);\n                newW = Math.min(newW, 100 - drag.orig.x);\n                newH = Math.min(newH, 100 - drag.orig.y);\n                selection = {\n                    x: drag.orig.x,\n                    y: drag.orig.y,\n                    w: newW,\n                    h: newH\n                };\n                renderSelections();\n            } else if (drag.type === 'move') {\n                let dx = (e.clientX - drag.startX) / mediaRect.width * 100;\n                let dy = (e.clientY - drag.startY) / mediaRect.height * 100;\n                selection = {\n                    x: Math.max(0, Math.min(100 - sel.w, drag.orig.x + dx)),\n                    y: Math.max(0, Math.min(100 - sel.h, drag.orig.y + dy)),\n                    w: sel.w,\n                    h: sel.h\n                };\n                renderSelections();\n            }\n        }\n    });\n    document.addEventListener('mouseup', function(e) {\n        if (drawing) {\n            const rect = wrapper.nodes[0].getBoundingClientRect();\n            const x = Math.min(drawing.startX, drawing.endX);\n            const y = Math.min(drawing.startY, drawing.endY);\n            const w = Math.abs(drawing.endX - drawing.startX);\n            const h = Math.abs(drawing.endY - drawing.startY);\n            if (w > 10 && h > 10) {\n                const perc = pxToPercent({x, y, w, h});\n                add(perc.x, perc.y, perc.w, perc.h);\n            }\n            drawing = null;\n            renderSelections();\n        }\n        if (drag) {\n            drag = null;\n        }\n        document.body.style.userSelect = '';\n    });\n    function handleResize() {\n        renderSelections();\n    }\n    window.addEventListener('resize', handleResize);\n    if (window.ResizeObserver) {\n        const ro = new ResizeObserver(handleResize);\n        ro.observe(wrapper.nodes[0]);\n        const media = wrapper.find('video') || wrapper.find('img');\n        if (media && media.nodes[0]) {\n            ro.observe(media.nodes[0]);\n        }\n    }\n    function add(x, y, w, h) {\n        selection = {\n            x: Math.max(0, Math.min(100, x)),\n            y: Math.max(0, Math.min(100, y)),\n            w: Math.max(2, Math.min(100, w)),\n            h: Math.max(2, Math.min(100, h))\n        };\n        renderSelections();\n        return true;\n    }\n    function remove() {\n        if (selection) {\n            selection = null;\n            renderSelections();\n        }\n    }\n    function get() {\n        if (!selection) return null;\n        return {...selection};\n    }\n    function dimensions(x, y, w, h) {\n        if (x === undefined) return {...defaultDims};\n        defaultDims = {\n            x: Math.max(0, Math.min(100, x)),\n            y: Math.max(0, Math.min(100, y)),\n            w: Math.max(2, Math.min(100, w)),\n            h: Math.max(2, Math.min(100, h))\n        };\n        renderSelections();\n        return instance;\n    }\n    function set(x, y, w, h) {\n        selection = {\n            x: Math.max(0, Math.min(100, x)),\n            y: Math.max(0, Math.min(100, y)),\n            w: Math.max(2, Math.min(100, w)),\n            h: Math.max(2, Math.min(100, h))\n        };\n        renderSelections();\n        return instance;\n    }\n    function aspectRatio(ratio) {\n        if (!ratio) {\n            if (!selection) return null;\n            return (selection.w / selection.h).toFixed(4);\n        }\n        let [rw, rh] = ratio.split(':').map(Number);\n        if (!rw || !rh) return instance;\n        const mediaRect = getMediaRect();\n        const mediaW = mediaRect.width;\n        const mediaH = mediaRect.height;\n        if (!mediaW || !mediaH) return instance;\n        let targetW = mediaW, targetH = mediaW * rh / rw;\n        if (targetH > mediaH) {\n            targetH = mediaH;\n            targetW = mediaH * rw / rh;\n        }\n        const wPerc = (targetW / mediaW) * 100;\n        const hPerc = (targetH / mediaH) * 100;\n        const xPerc = (100 - wPerc) / 2;\n        const yPerc = (100 - hPerc) / 2;\n        set(xPerc, yPerc, wPerc, hPerc);\n        return instance;\n    }\n    const instance = canvas;\n    instance.add = add;\n    instance.remove = remove;\n    instance.get = get;\n    instance.dimensions = dimensions;\n    instance.set = set; // <-- new method\n    instance.aspectRatio = aspectRatio; // <-- new method\n    if (options.default) {\n        dimensions(options.default.x, options.default.y, options.default.w, options.default.h);\n    }\n    if (options.init) {\n        add(options.init.x, options.init.y, options.init.w, options.init.h);\n    }\n    renderSelections();\n    return instance;\n};"
            },
            "Media.Timeline": {
                "uuid": "75b16af1-2f2b-4959-8e7c-e361975270d3",
                "name": "Media.Timeline",
                "method": "Component",
                "desc": "Interactive timeline component for media annotation and navigation",
                "type": "Component",
                "example": [
                    "var timeline = Media.Timeline(document.getElementById('container'));",
                    "var timeline = Media.Timeline('#timeline-container').length(60000);",
                    "var timeline = Media.Timeline('#timeline-container').add(1000, 5000, 'normal');",
                    "var timeline = Media.Timeline('#timeline-container').track(3);",
                    "var timeline = Media.Timeline('#timeline-container').select(function(id, from, to, type){ console.log('Selected segment:', id); });",
                    "var timeline = Media.Timeline('#timeline-container').seek(15000);"
                ],
                "dependencies": [
                    "style"
                ],
                "script": "Media.prototype.Timeline = function (container, options = {}) {\n    if (!Media.timelineClassesInitialized) {\n        Media.timelineClasses = Q.style(`\n            --media-timeline-segment-height: 8px;\n            --media-timeline-segment-margin: 2px;\n            --media-timeline-track-gap: 0px;\n        `, `\n            .media-timeline-wrapper {\n                width: 100%;\n                background: var(--media-timeline-bg, #232323);\n                position: relative;\n                user-select: none;\n                display: block;\n            }\n            .media-timeline-bar {\n                width: 100%; height: 100%; position: relative; z-index: 2;\n            }\n            .media-timeline-tracks {\n                position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 1;\n                pointer-events: none;\n            }\n            .media-timeline-track-row {\n                position: absolute; left: 0; width: 100%;\n                border-bottom: 1px solid var(--media-timeline-track-border, #3338);\n                box-sizing: border-box;\n            }\n            .media-timeline-track-label {\n                position: absolute; left: 4px; top: 0; font-size: 10px; color: #888; z-index: 3;\n                pointer-events: none;\n            }\n            .media-timeline-segment {\n                position: absolute;\n                border-radius: 5px;\n                min-width: 1px;\n                cursor: pointer;\n                box-sizing: border-box;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                transition: box-shadow 0.1s;\n                margin-top: var(--media-timeline-segment-margin, 2px);\n                margin-bottom: var(--media-timeline-segment-margin, 2px);\n                background: var(--media-timeline-segment-normal, #4caf50);\n                overflow: hidden;\n                height: var(--media-timeline-segment-height, 8px);\n                opacity: 0.5;\n            }\n            .media-timeline-segment.normal { background: var(--media-timeline-segment-normal, #4caf50); }\n            .media-timeline-segment.alert { background: var(--media-timeline-segment-alert, #ff9800); }\n            .media-timeline-segment.warning { background: var(--media-timeline-segment-warning, #f44336); }\n            .media-timeline-segment.selected {z-index: 2; opacity: 1; }\n            .media-timeline-handle {\n                width: 5px; height: 100%; background: var(--media-timeline-handle-bg, #fff4); cursor: ew-resize; z-index: 3;\n            }\n            /* Seek line style */\n            .media-timeline-seek-line {\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                width: 2px;\n                background: #fff;\n                opacity: 0.3;\n                z-index: 10;\n                pointer-events: none;\n            }\n        `, null, {\n            'media-timeline-wrapper': 'media-timeline-wrapper',\n            'media-timeline-bar': 'media-timeline-bar',\n            'media-timeline-tracks': 'media-timeline-tracks',\n            'media-timeline-track-row': 'media-timeline-track-row',\n            'media-timeline-track-label': 'media-timeline-track-label',\n            'media-timeline-segment': 'media-timeline-segment',\n            'media-timeline-handle': 'media-timeline-handle',\n            'selected': 'selected',\n            'normal': 'normal',\n            'alert': 'alert',\n            'warning': 'warning',\n            'left': 'left',\n            'right': 'right',\n            'media-timeline-seek-line': 'media-timeline-seek-line'\n        });\n        Media.timelineClassesInitialized = true;\n    }\n    const classes = Media.timelineClasses;\n    const timeline = Q(`<div class=\"${classes['media-timeline-wrapper']}\"></div>`);\n    const bar = Q(`<div class=\"${classes['media-timeline-bar']}\"></div>`);\n    const tracksBar = Q(`<div class=\"${classes['media-timeline-tracks']}\"></div>`);\n    const seekLine = Q(`<div class=\"${classes['media-timeline-seek-line']}\" style=\"display:none;height:100%;\"></div>`);\n    bar.append(seekLine);\n    timeline.append(bar, tracksBar);\n    timeline._length = 10000;\n    timeline._segments = [];\n    timeline._selected = null;\n    timeline._changeCb = null;\n    timeline._idCounter = 1;\n    timeline._maxTracks = null;\n    timeline._seekPos = null; // ms value or null\n    timeline.seek = function (ms) {\n        if (typeof ms !== \"number\" || isNaN(ms)) {\n            this._seekPos = null;\n        } else {\n            this._seekPos = Math.max(0, Math.min(ms, this._length));\n        }\n        this._render();\n        return this;\n    };\n    timeline.length = function (ms) {\n        if (typeof ms === 'undefined') return this._length;\n        this._length = Math.max(1, ms);\n        this._render();\n        return this;\n    };\n    timeline.add = function (from, to, type = 'normal', trackIndex) {\n        from = Math.max(0, Math.min(from, this._length));\n        to = Math.max(from, Math.min(to, this._length));\n        const id = 'seg_' + (this._idCounter++);\n        const seg = { id, from, to, type };\n        if (typeof trackIndex === 'number' && trackIndex >= 0) {\n            seg._forceTrack = trackIndex;\n        }\n        this._segments.push(seg);\n        this._render();\n        this._triggerChange();\n        return id;\n    };\n    timeline.modify = function (id, from, to, direction) {\n        const seg = this._segments.find(s => s.id === id);\n        if (!seg) return false;\n        seg.from = Math.max(0, Math.min(from, this._length));\n        seg.to = Math.max(seg.from, Math.min(to, this._length));\n        this._render();\n        this._triggerChange(direction);\n        return true;\n    };\n    timeline.remove = function (id) {\n        this._segments = this._segments.filter(s => s.id !== id);\n        if (this._selected === id) this._selected = null;\n        this._render();\n        this._triggerChange();\n        return this;\n    };\n    timeline.clear = function () {\n        this._segments = [];\n        this._selected = null;\n        this._render();\n        this._triggerChange();\n        return this;\n    };\n    timeline.clone = function (id, from) {\n        const seg = this._segments.find(s => s.id === id);\n        if (!seg) return null;\n        const len = seg.to - seg.from;\n        let newFrom = Math.max(0, Math.min(from, this._length - len));\n        let newTo = newFrom + len;\n        return this.add(newFrom, newTo, seg.type);\n    };\n    timeline.change = function (cb) {\n        this._changeCb = cb;\n        return this;\n    };\n    timeline._selectCb = null;\n    timeline._deselectCb = null;\n    timeline.select = function (arg) {\n        if (typeof arg === \"function\") {\n            this._selectCb = arg;\n            const seg = this._segments.find(s => s.id === this._selected);\n            if (seg) arg(seg.id, seg.from, seg.to, seg.type);\n            return this;\n        }\n        this._selected = arg;\n        this._render();\n        this._triggerChange(\"select\");\n        if (typeof this._selectCb === \"function\") {\n            const seg = this._segments.find(s => s.id === this._selected);\n            if (seg) this._selectCb(seg.id, seg.from, seg.to, seg.type);\n        }\n        return this;\n    };\n    timeline.deselect = function (arg) {\n        if (typeof arg === \"function\") {\n            this._deselectCb = arg;\n            return this;\n        }\n        const wasSelected = this._selected;\n        this._selected = null;\n        this._render();\n        this._triggerChange(\"deselect\");\n        if (wasSelected && typeof this._deselectCb === \"function\") {\n            this._deselectCb();\n        }\n        return this;\n    };\n    timeline.selected = function (cb) {\n        const seg = this._segments.find(s => s.id === this._selected);\n        if (seg && typeof cb === 'function') {\n            cb(seg.id, seg.from, seg.to, seg.type);\n        }\n        return seg;\n    };\n    timeline.track = function (number) {\n        if (typeof number === 'undefined') return this._maxTracks;\n        this._maxTracks = Math.max(1, parseInt(number, 10));\n        this._render();\n        return this;\n    };\n    timeline._triggerChange = function (event) {\n        if (typeof this._changeCb === 'function') {\n            const seg = this._segments.find(s => s.id === this._selected);\n            this._changeCb({\n                event: event,\n                segment: seg ? { id: seg.id, from: seg.from, to: seg.to, type: seg.type } : null\n            });\n        }\n    };\n    function assignTracks(segments, maxTracks, movingId = null, movingFrom = null, movingTo = null) {\n        let tracks = [];\n        segments.forEach(seg => { seg._track = undefined; });\n        let movingSeg = null;\n        if (movingId && movingFrom !== null && movingTo !== null) {\n            movingSeg = segments.find(s => s.id === movingId);\n            if (movingSeg) {\n                movingSeg._pendingFrom = movingFrom;\n                movingSeg._pendingTo = movingTo;\n            }\n        }\n        segments.forEach(seg => {\n            if (movingSeg && seg.id === movingSeg.id) return;\n            let placed = false;\n            if (typeof seg._forceTrack === 'number' && seg._forceTrack >= 0 && maxTracks) {\n                let t = seg._forceTrack;\n                if (t < maxTracks) {\n                    if (!tracks[t]) tracks[t] = [];\n                    let overlap = tracks[t].some(other =>\n                        !(seg.to <= other.from || seg.from >= other.to)\n                    );\n                    if (!overlap) {\n                        seg._track = t;\n                        tracks[t].push(seg);\n                        placed = true;\n                    }\n                }\n            }\n            if (!placed) {\n                let limit = maxTracks || (tracks.length + 1);\n                for (let t = 0; t < limit; t++) {\n                    if (!tracks[t]) tracks[t] = [];\n                    let overlap = tracks[t].some(other =>\n                        !(seg.to <= other.from || seg.from >= other.to)\n                    );\n                    if (!overlap) {\n                        seg._track = t;\n                        tracks[t].push(seg);\n                        placed = true;\n                        break;\n                    }\n                }\n            }\n            if (!placed) {\n                seg._track = -1;\n            }\n        });\n        if (movingSeg) {\n            let placed = false;\n            let limit = maxTracks || (tracks.length + 1);\n            for (let t = 0; t < limit; t++) {\n                if (!tracks[t]) tracks[t] = [];\n                let overlap = tracks[t].some(other =>\n                    !(\n                        (movingTo <= (other._pendingFrom ?? other.from)) ||\n                        (movingFrom >= (other._pendingTo ?? other.to))\n                    )\n                );\n                if (!overlap) {\n                    movingSeg._track = t;\n                    tracks[t].push(movingSeg);\n                    placed = true;\n                    break;\n                }\n            }\n            if (!placed) {\n                movingSeg._track = -1;\n            }\n            delete movingSeg._pendingFrom;\n            delete movingSeg._pendingTo;\n        }\n        return tracks.length;\n    }\n    let globalMouseMove = null, globalMouseUp = null;\n    function cleanupListeners() {\n        if (globalMouseMove) {\n            document.removeEventListener('mousemove', globalMouseMove, true);\n            globalMouseMove = null;\n        }\n        if (globalMouseUp) {\n            document.removeEventListener('mouseup', globalMouseUp, true);\n            globalMouseUp = null;\n        }\n        document.body.style.userSelect = '';\n    }\n    timeline._render = function () {\n        bar.children().each(function (i, el) {\n            if (el !== seekLine.nodes[0] && el.classList && el.classList.contains(classes['media-timeline-seek-line'])) {\n                el.parentNode && el.parentNode.removeChild(el);\n            }\n        });\n        bar.html('');\n        bar.append(seekLine); // always keep only one seekLine\n        tracksBar.html('');\n        this._segments.sort((a, b) => a.from - b.from);\n        const tempDiv = document.createElement('div');\n        tempDiv.className = classes['media-timeline-segment'];\n        document.body.appendChild(tempDiv);\n        const segHeight = parseFloat(getComputedStyle(tempDiv).height) || 8;\n        const segMargin = parseFloat(getComputedStyle(tempDiv).marginTop) || 2;\n        document.body.removeChild(tempDiv);\n        let movingId = null, movingFrom = null, movingTo = null;\n        if (timeline._movingSeg) {\n            movingId = timeline._movingSeg.id;\n            movingFrom = timeline._movingSeg.from;\n            movingTo = timeline._movingSeg.to;\n        }\n        const trackCount = assignTracks(\n            this._segments,\n            this._maxTracks,\n            movingId,\n            movingFrom,\n            movingTo\n        );\n        const maxTracks = this._maxTracks || trackCount || 1;\n        const trackHeight = segHeight + 2 * segMargin + (parseFloat(getComputedStyle(document.body).getPropertyValue('--media-timeline-track-gap')) || 0);\n        const wrapperHeight = maxTracks * trackHeight;\n        timeline.css('height', wrapperHeight + 'px');\n        for (let t = 0; t < maxTracks; t++) {\n            const top = (t * trackHeight) + 'px';\n            const height = trackHeight + 'px';\n            const row = Q(`<div class=\"${classes['media-timeline-track-row']}\" style=\"top:${top};height:${height};\"></div>`);\n            const label = Q(`<div class=\"${classes['media-timeline-track-label']}\" style=\"top:${top};\">${t + 1}</div>`);\n            tracksBar.append(row);\n            tracksBar.append(label);\n        }\n        bar.off('mousedown', bar._timelineDeselectHandler);\n        bar._timelineDeselectHandler = function (e) {\n            if (\n                !e.target.classList.contains(classes['media-timeline-segment']) &&\n                !e.target.classList.contains(classes['media-timeline-handle'])\n            ) {\n                timeline.deselect();\n            }\n        };\n        bar.on('mousedown', bar._timelineDeselectHandler);\n        const barChildren = bar.children();\n        const segNodeMap = {};\n        if (barChildren && barChildren.nodes) {\n            for (let i = 0; i < barChildren.nodes.length; i++) {\n                const n = barChildren.nodes[i];\n                if (n.dataset && n.dataset.segId) segNodeMap[n.dataset.segId] = n;\n            }\n        }\n        const used = {};\n        for (const seg of this._segments) {\n            if (seg._track === -1 || typeof seg._track !== 'number') continue;\n            const left = (seg.from / this._length * 100).toFixed(2) + '%';\n            const width = ((seg.to - seg.from) / this._length * 100).toFixed(2) + '%';\n            const top = (seg._track * trackHeight) + 'px';\n            const height = segHeight + 'px';\n            const typeClass = classes[seg.type] || '';\n            const selectedClass = this._selected === seg.id ? classes['selected'] : '';\n            const segClass = [\n                classes['media-timeline-segment'],\n                typeClass,\n                selectedClass\n            ].filter(Boolean).join(' ');\n            let segDiv = segNodeMap && segNodeMap[seg.id];\n            if (segDiv) {\n                Q(segDiv).css({ left, width, top, height });\n                segDiv.className = segClass;\n                used[seg.id] = true;\n            } else {\n                segDiv = Q(`<div class=\"${segClass}\" style=\"left:${left};width:${width};top:${top};height:${height};\"></div>`);\n                const handleL = Q(`<div class=\"${classes['media-timeline-handle']} ${classes['left']}\"></div>`);\n                const handleR = Q(`<div class=\"${classes['media-timeline-handle']} ${classes['right']}\"></div>`);\n                segDiv.append(handleL, handleR);\n                handleL.on('mousedown', e => {\n                    e.preventDefault(); e.stopPropagation();\n                    cleanupListeners();\n                    timeline.select(seg.id);\n                    let startX = e.clientX, startFrom = seg.from;\n                    document.body.style.userSelect = 'none';\n                    globalMouseMove = ev => {\n                        let dx = ev.clientX - startX;\n                        let percent = dx / bar.nodes[0].offsetWidth;\n                        let ms = Math.round(startFrom + percent * this._length);\n                        ms = Math.max(0, Math.min(ms, seg.to - 1));\n                        timeline.modify(seg.id, ms, seg.to, \"left\");\n                    };\n                    globalMouseUp = () => {\n                        cleanupListeners();\n                        timeline._render();\n                    };\n                    document.addEventListener('mousemove', globalMouseMove, true);\n                    document.addEventListener('mouseup', globalMouseUp, true);\n                });\n                handleR.on('mousedown', e => {\n                    e.preventDefault(); e.stopPropagation();\n                    cleanupListeners();\n                    timeline.select(seg.id);\n                    let startX = e.clientX, startTo = seg.to;\n                    document.body.style.userSelect = 'none';\n                    globalMouseMove = ev => {\n                        let dx = ev.clientX - startX;\n                        let percent = dx / bar.nodes[0].offsetWidth;\n                        let ms = Math.round(startTo + percent * this._length);\n                        ms = Math.max(seg.from + 1, Math.min(ms, this._length));\n                        timeline.modify(seg.id, seg.from, ms, \"right\");\n                    };\n                    globalMouseUp = () => {\n                        cleanupListeners();\n                        timeline._render();\n                    };\n                    document.addEventListener('mousemove', globalMouseMove, true);\n                    document.addEventListener('mouseup', globalMouseUp, true);\n                });\n                segDiv.on('mousedown', e => {\n                    if (e.target.classList.contains(classes['media-timeline-handle'])) return;\n                    cleanupListeners();\n                    timeline.select(seg.id);\n                    let dragStartX = e.clientX;\n                    let origFrom = seg.from, origTo = seg.to;\n                    let newFrom = origFrom, newTo = origTo;\n                    document.body.style.userSelect = 'none';\n                    timeline._movingSeg = seg;\n                    globalMouseMove = ev => {\n                        let dx = ev.clientX - dragStartX;\n                        let percent = dx / bar.nodes[0].offsetWidth;\n                        let deltaMs = Math.round(percent * this._length);\n                        newFrom = origFrom + deltaMs;\n                        newTo = origTo + deltaMs;\n                        if (newFrom < 0) {\n                            newTo += -newFrom;\n                            newFrom = 0;\n                        }\n                        if (newTo > this._length) {\n                            newFrom -= (newTo - this._length);\n                            newTo = this._length;\n                        }\n                        if (newTo - newFrom < 1) return;\n                        if (seg.from !== newFrom || seg.to !== newTo) {\n                            seg.from = newFrom;\n                            seg.to = newTo;\n                            timeline._render();\n                            timeline._triggerChange(\"move\");\n                        }\n                    };\n                    globalMouseUp = () => {\n                        cleanupListeners();\n                        delete timeline._movingSeg;\n                        if (seg.from !== newFrom || seg.to !== newTo) {\n                            timeline.modify(seg.id, seg.from, seg.to, \"move\");\n                        }\n                    };\n                    document.addEventListener('mousemove', globalMouseMove, true);\n                    document.addEventListener('mouseup', globalMouseUp, true);\n                });\n                bar.append(segDiv);\n                used[seg.id] = true;\n                segDiv._segId = seg.id;\n            }\n        }\n        for (const segId in segNodeMap) {\n            if (!used[segId]) {\n                Q(segNodeMap[segId]).remove();\n            }\n        }\n        if (this._seekPos !== null && this._length > 0) {\n            const left = (this._seekPos / this._length * 100).toFixed(2) + '%';\n            seekLine.css({\n                left: left,\n                display: ''\n            });\n        } else {\n            seekLine.css('display', 'none');\n        }\n    };\n    return timeline;\n};"
            },
            "Media.Video": {
                "uuid": "b6606ee2-13e1-4e6e-bb96-4ce216c08539",
                "name": "Media.Video",
                "method": "Component",
                "desc": "Video player with advanced controls and timeline support",
                "type": "Component",
                "example": [
                    "var player = Media.Video();",
                    "var player = Media.Video().load('video.mp4');",
                    "var player = Media.Video().load('video.mp4').autostart(true);",
                    "var player = Media.Video().load('video.mp4').play();",
                    "var player = Media.Video().load('video.mp4').play(5000, 10000);",
                    "var player = Media.Video().load('video.mp4').volume(0.5).loop(true);",
                    "var player = Media.Video().load('video.mp4').status(function(status){ console.log('Video status:', status); });"
                ],
                "dependencies": [
                    "style",
                    "Debounce"
                ],
                "script": "Media.prototype.Video = function(options = {}) {\n    if (!Media.videoClassesInitialized) {\n        Media.videoClasses = Q.style(`\n            --media-video-bg: #000;\n            --media-video-seekbar-bg: #222;\n            --media-video-seekbar-tr-color: #5af;\n            --media-video-seekbar-th-color: #fff;\n            --media-video-seekbar-group-bg: rgba(0,0,0,0.1);\n        `, `\n            .media-video-wrapper {\n                width: 100%;\n                height: 100%;\n                background: var(--media-video-bg, #000);\n                position: relative;\n                display: block;\n                overflow: hidden;\n            }\n            .media-video-element {\n                width: 100%;\n                height: 100%;\n                display: block;\n                background: var(--media-video-bg, #000);\n                object-fit: contain;\n            }\n            .media-video-controls {\n                display: flex;\n                gap: 8px;\n                align-items: center;\n            }\n            .media-video-seek-group {\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n                gap: 0;\n                margin-bottom: 6px;\n                background: var(--media-video-seekbar-group-bg, #000);\n            }\n            .media-video-seek-scale {\n                width: 100%;\n                position: relative;\n                height: 8px;\n            }\n            .media-video-seekbar {\n                width: 100%;\n                height: 10px;\n                position: relative;\n                cursor: pointer;\n                background: var(--media-video-seekbar-bg, #222);\n                overflow: hidden;\n            }\n            .media-video-seekbar-track {\n                position: absolute;\n                left: 0; top: 0;\n                height: 100%;\n                background: var(--media-video-seekbar-tr-color, #5af);\n                width: 0;\n            }\n            .media-video-seekbar-thumb {\n                position: absolute;\n                top: 50%;\n                width: 1px;\n                height: 20px;\n                background: var(--media-video-seekbar-th-color, #fff);\n                border-radius: 4px;\n                box-shadow: 0 2px 8px #0008;\n                transform: translate(-50%,-50%);\n            }\n            .media-video-seek-info {\n                width: 100%;\n                display: flex;\n                justify-content: space-between;\n                font-size: 11px;\n                font-family: monospace;\n                color: #ccc;\n                margin-top: 2px;\n            }\n            .media-video-loader-overlay {\n                position: absolute;\n                left: 0; top: 0; width: 100%; height: 100%;\n                background: rgba(0,0,0,0.5);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 10;\n                flex-direction: column;\n                pointer-events: none;\n                opacity: 0;\n                transition: opacity 0.25s;                                                                                                               \n            }\n            .media-video-loader-overlay.visible {\n                opacity: 1;\n                pointer-events: auto;\n            }\n            .media-video-loader {\n                --c:no-repeat linear-gradient(white 0 0);\n                opacity: 0.5;\n                background: \n                    var(--c),var(--c),var(--c),\n                    var(--c),var(--c),var(--c),\n                    var(--c),var(--c),var(--c);\n                background-size: 16px 16px;\n                animation: \n                    l32-1 1s infinite,\n                    l32-2 1s infinite;\n                margin-bottom: 12px;\n            }\n            @keyframes l32-1 {\n                0%,100% {width:45px;height: 45px}\n                35%,65% {width:65px;height: 65px}\n            }\n            @keyframes l32-2 {\n                0%,40%  {background-position: 0 0,0 50%, 0 100%,50% 100%,100% 100%,100% 50%,100% 0,50% 0,0 0,  50% 50% }\n                60%,100%{background-position: 0 50%, 0 100%,50% 100%,100% 100%,100% 50%,100% 0,50% 0,0 0,  50% 50% }\n            }\n        `, null, {\n            'media-video-wrapper': 'media-video-wrapper',\n            'media-video-element': 'media-video-element',\n            'media-video-controls': 'media-video-controls',\n            'media-video-seek-scale': 'media-video-seek-scale',\n            'media-video-seekbar-track': 'media-video-seekbar-track',\n            'media-video-seekbar-thumb': 'media-video-seekbar-thumb',\n            'media-video-seekbar': 'media-video-seekbar',\n            'media-video-seek-info': 'media-video-seek-info',\n            'media-video-loader-overlay': 'media-video-loader-overlay',\n            'media-video-loader': 'media-video-loader',\n            'media-video-seek-group': 'media-video-seek-group',\n        },false);\n        Media.videoClassesInitialized = true;\n    }\n    const classes = Media.videoClasses;\n    const wrapper = Q(`<div class=\"${classes['media-video-wrapper']}\"></div>`);\n    const video = Q(`<video class=\"${classes['media-video-element']}\" preload=\"auto\"></video>`);\n    wrapper.append(video);\n    const loaderOverlay = Q(`<div class=\"${classes['media-video-loader-overlay']}\" style=\"display:none\"></div>`);\n    const loaderAnim = Q(`<div class=\"${classes['media-video-loader']}\"></div>`);\n    loaderOverlay.append(loaderAnim);\n    wrapper.append(loaderOverlay);\n    let _customOverlay = null;\n    let _status = \"idle\";\n    let _timetick = null;\n    let _statuscb = null;\n    let _loop = false;\n    let _tickRAF = null;\n    let _autostart = false;\n    let _playTo = null;\n    let _networkTimeout = null;\n    let _fpsSamples = [];\n    function updateLoader(st) {\n        if (st === \"loading\" || st === \"buffering\" || st === \"seeking\") {\n            Q.Debounce('media-video-loader', 1000, () => {\n                if (_status === st && (st === \"loading\" || st === \"buffering\" || st === \"seeking\")) {\n                    if (loaderOverlay.css('display') === 'none') {\n                        loaderOverlay.css('display', 'flex');\n                        setTimeout(() => loaderOverlay.addClass('visible'), 10);\n                    } else {\n                        loaderOverlay.addClass('visible');\n                    }\n                }\n            });\n            if (_networkTimeout) clearTimeout(_networkTimeout);\n            _networkTimeout = setTimeout(() => {\n                if (_status === \"loading\" || _status === \"buffering\" || _status === \"seeking\") {\n                    setStatus(\"networkfail\");\n                }\n            }, 30000);\n        } else {\n            Q.Debounce('media-video-loader', 0, () => {});\n            loaderOverlay.removeClass('visible');\n            loaderOverlay.nodes[0].addEventListener('transitionend', function handler(e) {\n                if (!loaderOverlay.hasClass('visible')) {\n                    loaderOverlay.css('display', 'none');\n                }\n                loaderOverlay.nodes[0].removeEventListener('transitionend', handler);\n            });\n            if (_networkTimeout) {\n                clearTimeout(_networkTimeout);\n                _networkTimeout = null;\n            }\n        }\n    }\n    const statusMap = {\n        \"playing\": \"playing\",\n        \"pause\": \"paused\",\n        \"ended\": \"ended\",\n        \"waiting\": \"buffering\",\n        \"seeking\": \"seeking\",\n        \"canplay\": \"ready\",\n        \"canplaythrough\": \"ready\",\n        \"loadstart\": \"loading\",\n        \"error\": \"failed\",\n        \"stalled\": \"networkfail\",\n        \"suspend\": \"networkfail\"\n    };\n    function setStatus(st) {\n        if (st === \"ready\" || st === \"playing\" || st === \"paused\" || st === \"ended\") {\n            if (_networkTimeout) {\n                clearTimeout(_networkTimeout);\n                _networkTimeout = null;\n            }\n            loaderOverlay.removeClass('visible');\n            loaderOverlay.css('display', 'none');\n        }\n        if (_status !== st) {\n            _status = st;\n            if (_statuscb) _statuscb(st);\n        }\n        if (!(st === \"ready\" || st === \"playing\" || st === \"paused\" || st === \"ended\")) {\n            updateLoader(st);\n        }\n    }\n    const updateStatus = (evt) => {\n        let st = statusMap[evt.type] || evt.type;\n        if (evt.type === \"error\") {\n            const err = video.nodes[0].error;\n            if (err) {\n                if (err.code === 2) st = \"networkfail\";\n                else st = \"failed\";\n            } else {\n                st = \"failed\";\n            }\n        }\n        if ((evt.type === \"canplay\" || evt.type === \"canplaythrough\")) {\n            if (_loop && _status === \"ended\") {\n                st = \"playing\";\n            } else if (video.nodes[0].paused) {\n                st = \"ready\";\n            } else if (!video.nodes[0].paused) {\n                st = \"playing\";\n            }\n        }\n        if (evt.type === \"ratechange\" && !video.nodes[0].paused) {\n            st = \"playing\";\n        }\n        setStatus(st);\n    };\n    [\"playing\", \"pause\", \"ended\", \"waiting\", \"seeking\", \"canplay\", \"canplaythrough\", \"loadstart\", \"error\", \"stalled\", \"suspend\", \"ratechange\"].forEach(ev =>\n        video.on(ev, updateStatus)\n    );\n    const tick = () => {\n        if (_timetick && !video.nodes[0].paused && !video.nodes[0].ended) {\n            _timetick(instance.pos());\n        }\n        const v = video.nodes[0];\n        let frames = null;\n        if (typeof v.getVideoPlaybackQuality === \"function\") {\n            const q = v.getVideoPlaybackQuality();\n            frames = q.totalVideoFrames || q.totalFrameCount || null;\n        } else if (typeof v.webkitDecodedFrameCount === \"number\") {\n            frames = v.webkitDecodedFrameCount;\n        } else if (typeof v.mozDecodedFrames === \"number\") {\n            frames = v.mozDecodedFrames;\n        }\n        if (frames !== null) {\n            const now = performance.now();\n            _fpsSamples.push({ t: now, f: frames });\n            while (_fpsSamples.length > 2 && (_fpsSamples[0].t < now - 1000)) {\n                _fpsSamples.shift();\n            }\n        }\n        const from = typeof instance._playFrom === \"number\" ? instance._playFrom : 0;\n        const to = typeof instance._playTo === \"number\" ? instance._playTo : null;\n        if (to !== null && !video.nodes[0].paused && !video.nodes[0].ended) {\n            if (instance.pos() >= to) {\n                if (_loop) {\n                    instance.seek(from);\n                    video.nodes[0].play();\n                } else {\n                    video.nodes[0].pause();\n                    instance._playTo = null;\n                    instance._playFrom = 0;\n                }\n            }\n        }\n        _tickRAF = requestAnimationFrame(tick);\n    };\n    video.on(\"play\", () => {\n        if (!_tickRAF) _tickRAF = requestAnimationFrame(tick);\n    });\n    video.on(\"pause\", () => {\n        if (_tickRAF) { cancelAnimationFrame(_tickRAF); _tickRAF = null; }\n    });\n    video.on(\"ended\", () => {\n        if (_tickRAF) { cancelAnimationFrame(_tickRAF); _tickRAF = null; }\n        if (_loop) instance.play();\n    });\n    const instance = wrapper;\n    let seekEventCb = null;\n    instance.onSeek = function(cb) {\n        seekEventCb = typeof cb === \"function\" ? cb : null;\n        return instance;\n    };\n    instance.load = function(url) {\n        video.attr('src', '');\n        video.nodes[0].removeAttribute('src');\n        video.nodes[0].load();\n        video.attr('src', url);\n        video.nodes[0].load();\n        setStatus(\"loading\");\n        if (_autostart) {\n            video.nodes[0].play();\n        }\n        return instance;\n    };\n    instance.play = function(from, to) {\n        let videoLen = instance.length();\n        if (typeof from === \"number\") {\n            instance.seek(from);\n            instance._playFrom = from;\n        }\n        if (typeof to === \"number\" && to > (typeof from === \"number\" ? from : 0)) {\n            instance._playTo = Math.min(to, videoLen);\n        }\n        if (typeof from !== \"number\" && typeof to !== \"number\") {\n            if (typeof instance._playFrom === \"number\" && typeof instance._playTo === \"number\") {\n                instance.seek(instance._playFrom);\n            } else {\n                instance._playFrom = 0;\n                instance._playTo = null;\n                instance.seek(0);\n            }\n        }\n        video.nodes[0].play().catch(error => {\n            console.error(\"Video playback error:\", error);\n            setStatus(\"failed\");\n        });\n        return instance;\n    };\n    instance.stop = function() {\n        video.nodes[0].pause();\n        instance._playTo = null;\n        instance._playFrom = 0;\n        instance.seek(0);\n        return instance;\n    };\n    instance.pause = function() {\n        video.nodes[0].pause();\n        instance._playTo = null;\n        instance._playFrom = 0;\n        return instance;\n    };\n    instance.seek = function(ms, _fromSeekBar) {\n        video.nodes[0].currentTime = ms / 1000;\n        if (!_fromSeekBar && seekEventCb) seekEventCb(ms);\n        return instance;\n    };\n    instance.speed = function(val) {\n        if (val === undefined) return video.nodes[0].playbackRate;\n        video.nodes[0].playbackRate = Math.max(0.1, Math.min(10, val));\n        return instance;\n    };\n    instance.loop = function(enable) {\n        if (enable === undefined) return _loop;\n        _loop = !!enable;\n        video.nodes[0].loop = false; // always false, we handle loop logic for both full and from-to\n        return instance;\n    };\n    instance.volume = function(val) {\n        if (val === undefined) return video.nodes[0].volume;\n        video.nodes[0].volume = Math.max(0, Math.min(1, val));\n        return instance;\n    };\n    instance.resolution = function() {\n        return {\n            width: video.nodes[0].videoWidth,\n            height: video.nodes[0].videoHeight\n        };\n    };\n    instance.boundaries = function() {\n        const rect = video.nodes[0].getBoundingClientRect();\n        const parent = wrapper.nodes[0].getBoundingClientRect();\n        return {\n            width: ((rect.width / parent.width) * 100) || 0,\n            height: ((rect.height / parent.height) * 100) || 0,\n            left: ((rect.left - parent.left) / parent.width * 100) || 0,\n            top: ((rect.top - parent.top) / parent.height * 100) || 0\n        };\n    };\n    instance.length = function() {\n        return Math.round((video.nodes[0].duration || 0) * 1000);\n    };\n    instance.pos = function() {\n        return Math.round((video.nodes[0].currentTime || 0) * 1000);\n    };\n    instance.timetick = function(cb) {\n        _timetick = typeof cb === \"function\" ? cb : null;\n        return instance;\n    };\n    instance.status = function(cb) {\n        _statuscb = typeof cb === \"function\" ? cb : null;\n        return instance;\n    };\n    instance.autostart = function(val) {\n        if (val === undefined) return _autostart;\n        _autostart = !!val;\n        return instance;\n    };\n    const frag = Q(`<div class=\"${classes['media-video-controls']}\"></div>`);\n    const btnPlay = Q('<button>').text(\"Play\").on('click', () => instance.play());\n    const btnPause = Q('<button>').text(\"Pause\").on('click', () => instance.pause());\n    const btnStop = Q('<button>').text(\"Stop\").on('click', () => instance.stop());\n    const form = Q.Form ? new Q.Form() : null;\n    let volSlider = null;\n    if (form && form.Slider) {\n        volSlider = form.Slider(instance.volume(), { min: 0, max: 1 });\n        volSlider.change(function(val) {\n            instance.volume(parseFloat(val));\n        });\n        video.on('volumechange', function() {\n            volSlider.val(instance.volume());\n        });\n    }\n    const speedValues = [\n        { value: 0.1, text: \"0.1x\" },\n        { value: 0.25, text: \"0.25x\" },\n        { value: 0.5, text: \"0.5x\" },\n        { value: 0.75, text: \"0.75x\" },\n        { value: 1, text: \"1x\" },\n        { value: 1.5, text: \"1.5x\" },\n        { value: 2, text: \"2x\" },\n        { value: 2.5, text: \"2.5x\" },\n        { value: 5, text: \"5x\" }\n    ];\n    let initialSpeedIdx = speedValues.findIndex(v => v.value === instance.speed());\n    if (initialSpeedIdx === -1) initialSpeedIdx = 4; // default 1x\n    let speedDropdown = null;\n    if (form && form.Dropdown) {\n        speedDropdown = form.Dropdown({\n            values: speedValues.map((v, i) => ({\n                value: v.value,\n                text: v.text,\n                default: i === initialSpeedIdx\n            })),\n            change: function(val) {\n                instance.speed(parseFloat(val));\n            }\n        });\n    }\n    const loop = Q('<input type=\"checkbox\">')\n        .prop('checked', instance.loop())\n        .attr('title', 'Loop')\n        .on('change', function() { instance.loop(this.checked); });\n    const loopLbl = Q('<label>').append(loop, document.createTextNode(\" Loop\"));\n    const auto = Q('<input type=\"checkbox\">')\n        .prop('checked', instance.autostart())\n        .attr('title', 'Autostart')\n        .on('change', function() { instance.autostart(this.checked); });\n    const autoLbl = Q('<label>').append(auto, document.createTextNode(\" Autostart\"));\n    function fmt(ms) {\n        ms = Math.max(0, Math.round(ms));\n        let s = Math.floor(ms / 1000), m = Math.floor(s / 60), h = Math.floor(m / 60);\n        let ms3 = (ms % 1000).toString().padStart(3, '0');\n        s = s % 60; m = m % 60;\n        return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}.${ms3}`;\n    }\n    const seekScale = Q(`<div class=\"${classes['media-video-seek-scale']}\"></div>`);\n    function renderScale() {\n        seekScale.html('');\n        const len = instance.length();\n        const scaleDiv = Q('<div style=\"position:absolute;left:0;top:0;width:100%;height:100%;\"></div>');\n        const scaleHeight = parseFloat(seekScale.css('height')) || 8;\n        for (let ms = 0; ms <= len; ms += 30000) {\n            const isMinute = ms % 60000 === 0;\n            const left = (ms / len * 100).toFixed(2) + '%';\n            const height = isMinute ? scaleHeight : scaleHeight * 0.5;\n            const top = isMinute ? 0 : (scaleHeight * 0.5) + 'px';\n            const mark = Q('<div>')\n                .css({\n                    position: 'absolute',\n                    left: left,\n                    top: top,\n                    width: '1px',\n                    height: height + 'px',\n                    background: isMinute ? '#fff' : '#aaa',\n                    opacity: isMinute ? 0.8 : 0.5\n                });\n            scaleDiv.append(mark);\n        }\n        seekScale.append(scaleDiv);\n    }\n    const seekBar = Q(`<div class=\"${classes['media-video-seekbar']}\"></div>`);\n    const seekTrack = Q(`<div class=\"${classes['media-video-seekbar-track']}\"></div>`);\n    const seekThumb = Q(`<div class=\"${classes['media-video-seekbar-thumb']}\"></div>`);\n    seekBar.append(seekTrack, seekThumb);\n    const seekInfo = Q(`<div class=\"${classes['media-video-seek-info']}\"></div>`);\n    const seekLeft = Q('<div>').css({flex:'1',textAlign:'left'});\n    const seekCenter = Q('<div>').css({flex:'1',textAlign:'center'});\n    const seekRight = Q('<div>').css({flex:'1',textAlign:'right'});\n    seekInfo.append(seekLeft, seekCenter, seekRight);\n    const seekGroup = Q(`<div class=\"${classes['media-video-seek-group']}\"></div>`);\n    seekGroup.append(seekScale, seekBar, seekInfo);\n    function updateSeekUI() {\n        const len = instance.length();\n        const pos = instance.pos();\n        const pct = len > 0 ? pos / len : 0;\n        seekTrack.css('width', (pct * 100) + '%');\n        seekThumb.css('left', (pct * 100) + '%');\n        seekLeft.text(fmt(0) + ' / ' + fmt(pos));\n        seekRight.text(fmt(len));\n        seekCenter.text('');\n    }\n    let dragging = false;\n    let lastSeekMs = null; // last seeked ms during seekbar drag\n    function seekToClientX(clientX, status) {\n        const rect = seekBar.nodes[0].getBoundingClientRect();\n        let rel = (clientX - rect.left) / rect.width;\n        rel = Math.max(0, Math.min(1, rel));\n        const len = instance.length();\n        const ms = Math.round(len * rel);\n        lastSeekMs = ms;\n        instance.seek(ms, true); // only UI update\n        updateSeekUI();\n        if (seekEventCb) seekEventCb(ms);\n    }\n    let mouseMoveHandler = null;\n    let mouseUpHandler = null;\n    seekBar.on('mousedown', function(e) {\n        dragging = true;\n        seekToClientX(e.clientX, 'start');\n        document.body.style.userSelect = 'none';\n        mouseMoveHandler = function(ev) {\n            if (dragging) {\n                seekToClientX(ev.clientX, 'move');\n            }\n        };\n        mouseUpHandler = function(ev) {\n            if (dragging) {\n                dragging = false;\n                document.body.style.userSelect = '';\n                seekToClientX(ev.clientX, 'end');\n                document.removeEventListener('mousemove', mouseMoveHandler);\n                document.removeEventListener('mouseup', mouseUpHandler);\n                mouseMoveHandler = null;\n                mouseUpHandler = null;\n            }\n        };\n        document.addEventListener('mousemove', mouseMoveHandler);\n        document.addEventListener('mouseup', mouseUpHandler);\n    });\n    video.on('timeupdate', updateSeekUI);\n    video.on('loadedmetadata', function() {\n        renderScale();\n        updateSeekUI();\n    });\n    video.on('durationchange', function() {\n        renderScale();\n        updateSeekUI();\n    });\n    setTimeout(() => {\n        renderScale();\n        updateSeekUI();\n    }, 0);\n    frag.append(seekGroup);\n    if (btnPlay) frag.append(btnPlay);\n    if (btnPause) frag.append(btnPause);\n    if (btnStop) frag.append(btnStop);\n    if (volSlider) frag.append(volSlider);\n    if (speedDropdown) frag.append(speedDropdown);\n    frag.append(loopLbl);\n    frag.append(autoLbl);\n    instance.control = function() {\n        return {\n            seekGroup,\n            seekScale,\n            seekBar,\n            seekInfo,\n            playButton: btnPlay,\n            pauseButton: btnPause,\n            stopButton: btnStop,\n            volumeSlider: volSlider,\n            speedSelector: speedDropdown,\n            loop: loopLbl,\n            autoPlay: autoLbl,\n            controlPanel: frag\n        };\n    };\n    instance.overlay = function(qobj) {\n        if (_customOverlay) {\n            Q(_customOverlay).remove();\n            _customOverlay = null;\n        }\n        if (qobj && typeof qobj === \"object\" && qobj.nodes && qobj.nodes[0]) {\n            wrapper.append(qobj);\n            _customOverlay = qobj.nodes[0];\n        }\n        return instance;\n    };\n    instance.wrapper = wrapper.nodes[0];\n    instance.video = video.nodes[0];\n    instance.fps = function() {\n        if (_fpsSamples.length < 2) return null;\n        const first = _fpsSamples[0], last = _fpsSamples[_fpsSamples.length - 1];\n        const dt = (last.t - first.t) / 1000;\n        const df = last.f - first.f;\n        if (dt > 0 && df >= 0) {\n            return df / dt;\n        }\n        return null;\n    };\n    return wrapper;\n};\nMedia.Video = Media.prototype.Video;"
            }
        },
        "statics": {
            "Average Color": {
                "uuid": "8fba6775-173e-4c97-a0d2-0a97af34b96c",
                "name": "Average Color",
                "method": "Static",
                "desc": "Calculates the average color of an image from a given source.",
                "type": "Image Processing",
                "example": [
                    "Q.AvgColor('https://example.com/profile.jpg', 'auto', function(color) { document.body.style.backgroundColor = `rgb(${color.r}, ${color.g}, ${color.b})`; });",
                    "Q.AvgColor(document.getElementById('myCanvas'), 2, function(result) { console.log(result); });",
                    "Q.AvgColor(headerImage.src, 5, function(avgColor) { /* ... */ });"
                ],
                "dependencies": [],
                "script": "Q.AvgColor = (source, sampleSize, callback) => {\n    const image = new Image();\n    image.crossOrigin = 'Anonymous';\n    if (typeof source === 'string') image.src = source;\n    else if (source instanceof HTMLCanvasElement) image.src = source.toDataURL();\n    else return console.error(\"Invalid image source provided.\");\n    image.onload = () => {\n      const canvas = Object.assign(document.createElement('canvas'), { width: image.width, height: image.height });\n      const context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      const data = context.getImageData(0, 0, image.width, image.height).data;\n      const samplingRate = sampleSize === 'auto'\n        ? Math.max(1, Math.ceil(Math.sqrt(image.width * image.height) / 32))\n        : (typeof sampleSize === 'number' && sampleSize > 0 ? sampleSize : 1);\n      let totalRed = 0, totalGreen = 0, totalBlue = 0, count = 0;\n      for (let index = 0, len = data.length; index < len; index += samplingRate * 4) {\n        totalRed   += data[index];\n        totalGreen += data[index + 1];\n        totalBlue  += data[index + 2];\n        count++;\n      }\n      const avgColor = { r: (totalRed / count) | 0, g: (totalGreen / count) | 0, b: (totalBlue / count) | 0 };\n      typeof callback === 'function' && callback(avgColor);\n    };\n    image.onerror = () => console.error(\"Failed to load image.\");\n  };"
            },
            "CMYK to RGB Converter": {
                "uuid": "575297fd-9335-447d-81da-ff6b5a198b33",
                "name": "CMYK to RGB Converter",
                "method": "Static",
                "desc": "Converts CMYK (Cyan, Magenta, Yellow, Key/Black) color values to RGB (Red, Green, Blue) format.",
                "type": "Color Conversion",
                "example": [
                    "const rgbColor = Q.CMYK2RGB(0.75, 0.0, 0.75, 0.0);",
                    "Q.CMYK2RGB(0.0, 0.8, 0.8, 0.0);",
                    "Q.CMYK2RGB(0.8, 0.0, 0.8, 0.0);",
                    "Q.CMYK2RGB(0.8, 0.8, 0.0, 0.0);"
                ],
                "dependencies": [],
                "script": "Q.CMYK2RGB = (c, m, y, k) => {\n  const r = 255 * (1 - c) * (1 - k);\n  const g = 255 * (1 - m) * (1 - k);\n  const b = 255 * (1 - y) * (1 - k);\n  return [Math.round(r), Math.round(g), Math.round(b)];\n};"
            },
            "Color Brightness": {
                "uuid": "3946b6ed-868c-41c9-b51a-fc66139bdc06",
                "name": "Color Brightness",
                "method": "Static",
                "desc": "Adjusts the brightness of a color by a specified percentage.",
                "type": "Color Manipulation",
                "example": [
                    "const highlightColor = Q.ColorBrightness('#3498db', 20);",
                    "const shadowColor = Q.ColorBrightness('#3498db', -30);",
                    "let hoverState = Q.ColorBrightness('rgb(52, 152, 219)', 15);",
                    "let activeState = Q.ColorBrightness('rgb(52, 152, 219)', -10);",
                    "Q.ColorBrightness('rgba(52, 152, 219, 0.8)', 25);"
                ],
                "dependencies": [],
                "script": "Q.ColorBrightness = (inputColor, percent) => {\n    if (!/^#|^rgb/.test(inputColor)) throw new Error('Unsupported format');\n    let red, green, blue, alpha = 1, isHex = false, factor = 1 + percent / 100;\n    if (inputColor[0] === '#') {\n      isHex = true;\n      const hexString = inputColor.slice(1);\n      if (hexString.length === 3) {\n        red = parseInt(hexString[0] + hexString[0], 16);\n        green = parseInt(hexString[1] + hexString[1], 16);\n        blue = parseInt(hexString[2] + hexString[2], 16);\n      } else if (hexString.length === 6) {\n        red = parseInt(hexString.slice(0, 2), 16);\n        green = parseInt(hexString.slice(2, 4), 16);\n        blue = parseInt(hexString.slice(4, 6), 16);\n      }\n    } else {\n      const match = inputColor.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([\\d.]+))?\\)/);\n      if (match) {\n        red = +match[1];\n        green = +match[2];\n        blue = +match[3];\n        if (match[4] != null) alpha = parseFloat(match[4]);\n      }\n    }\n    const clamp = value => Math.min(255, Math.max(0, Math.round(value * factor)));\n    red = clamp(red);\n    green = clamp(green);\n    blue = clamp(blue);\n    return isHex\n      ? '#' + [red, green, blue].map(component => (`0${component.toString(16)}`).slice(-2)).join('')\n      : (alpha === 1 ? `rgb(${red}, ${green}, ${blue})` : `rgba(${red}, ${green}, ${blue}, ${alpha})`);\n  };"
            },
            "Debounce": {
                "uuid": "861832d7-4ad5-4a51-9386-1beec85e8e5a",
                "name": "Debounce",
                "method": "Static",
                "desc": "Delays the execution of a function until after a specified wait period has elapsed since the last invocation.",
                "type": "Performance Optimization",
                "example": [
                    "Q.Debounce('search-query', 500, function() { fetchSearchResults(searchInput.value); });",
                    "Q.Debounce('resize-chart', 250, function() { redrawChart(window.innerWidth * 0.8); });",
                    "Q.Debounce('form-save', 300, function() { saveData(formData); });"
                ],
                "dependencies": [],
                "script": "Q.Debounce = (id, time, callback) => {\n    const debounceStorage = Q.getGLOBAL('Debounce') || {};\n    debounceStorage[id] && clearTimeout(debounceStorage[id]);\n    debounceStorage[id] = setTimeout(callback, time);\n    Q.setGLOBAL({ Debounce: debounceStorage });\n  };"
            },
            "HSL to RGB Converter": {
                "uuid": "fe389cf4-2322-483f-80d5-d435a7799f28",
                "name": "HSL to RGB Converter",
                "method": "Static",
                "desc": "Converts HSL (Hue, Saturation, Lightness) color values to RGB (Red, Green, Blue) format.",
                "type": "Color Conversion",
                "example": [
                    "const rgbColor = Q.HSL2RGB(0, 1, 0.5);",
                    "let rgb = Q.HSL2RGB(0.5, 0.8, 0.5);",
                    "var buttonColor = Q.HSL2RGB(0.33, 0.5, 0.7);"
                ],
                "dependencies": [],
                "script": "Q.HSL2RGB = (h, s, l) => {\n    if (s === 0) {\n      const gray = l * 255;\n      return [gray, gray, gray];\n    }\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n          p = 2 * l - q,\n          hueToRgb = (t) => {\n            t < 0 && (t += 1);\n            t > 1 && (t -= 1);\n            return t < 1 / 6 ? p + (q - p) * 6 * t\n                 : t < 1 / 2 ? q\n                 : t < 2 / 3 ? p + (q - p) * 6 * (2 / 3 - t)\n                 : p;\n          };\n    return [hueToRgb(h + 1 / 3) * 255, hueToRgb(h) * 255, hueToRgb(h - 1 / 3) * 255];\n  };"
            },
            "ID Generator": {
                "uuid": "10881a05-d961-4d39-b6fb-56b067ec0706",
                "name": "ID Generator",
                "method": "Static",
                "desc": "Generates a random hexadecimal identifier with customizable length and prefix.",
                "type": "Utility",
                "example": [
                    "const uniqueId = Q.ID();",
                    "let elementId = Q.ID(12, 'element-');",
                    "var inputId = Q.ID(10, 'input_');",
                    "var labelId = Q.ID(10, 'label_');"
                ],
                "dependencies": [],
                "script": "Q.ID = (length = 8, prefix = '') =>\n    prefix + Array.from({ length }, () => (Math.random() * 16 | 0).toString(16)).join('');"
            },
            "Is Dark Color": {
                "uuid": "380bac8e-4667-49f0-ac0c-57a3316a1927",
                "name": "Is Dark Color",
                "method": "Static",
                "desc": "Determines if a color is considered dark based on its luminance value.",
                "type": "Color Analysis",
                "example": [
                    "const backgroundColor = '#3498db'; const textColor = Q.isDarkColor(backgroundColor) ? '#ffffff' : '#000000'; document.querySelector('.card').style.color = textColor;",
                    "let buttonColor = 'rgb(52, 152, 219)'; let textShade = Q.isDarkColor(buttonColor, 15) ? 'white' : 'black'; document.getElementById('action-button').classList.add(`text-${textShade}`);",
                    "var headerBg = '#6a1b9a'; var customThreshold = 120; var headerTextClass = Q.isDarkColor(headerBg, 10, customThreshold) ? 'light-text' : 'dark-text'; document.querySelector('header').classList.add(headerTextClass);"
                ],
                "dependencies": [],
                "script": "Q.isDarkColor = (color, margin = 20, threshold = 100) => {\n    let red, green, blue;\n    if (color[0] === '#') {\n      const hex = color.slice(1);\n      const parts = hex.length === 3\n        ? [hex[0] + hex[0], hex[1] + hex[1], hex[2] + hex[2]]\n        : hex.length === 6\n        ? [hex.slice(0, 2), hex.slice(2, 4), hex.slice(4, 6)]\n        : null;\n      if (!parts) throw Error('Invalid hex format');\n      [red, green, blue] = parts.map(v => parseInt(v, 16));\n    } else if (color.startsWith('rgb')) {\n      const arr = color.match(/\\d+/g);\n      if (arr && arr.length >= 3) [red, green, blue] = arr.map(Number);\n      else throw Error('Invalid format');\n    } else throw Error('Unsupported format');\n    return Math.sqrt(0.299 * red ** 2 + 0.587 * green ** 2 + 0.114 * blue ** 2) + margin < threshold;\n  };"
            },
            "LAB to RGB Converter": {
                "uuid": "6bcefde5-3a17-453a-bca0-965151c14615",
                "name": "LAB to RGB Converter",
                "method": "Static",
                "desc": "Converts LAB (Lightness, a*, b*) color values to RGB (Red, Green, Blue) format.",
                "type": "Color Conversion",
                "example": [
                    "const l = 54.29; const a = 80.81; const b = 69.89; const rgbColor = Q.LAB2RGB(l, a, b); console.log(`R: ${rgbColor[0]}, G: ${rgbColor[1]}, B: ${rgbColor[2]}`);",
                    "function adjustSaturation(r, g, b, factor) { const lab = Q.RGB2LAB(r, g, b); lab[1] = lab[1] * factor; lab[2] = lab[2] * factor; return Q.LAB2RGB(lab[0], lab[1], lab[2]); }"
                ],
                "dependencies": [],
                "script": "Q.LAB2RGB = (L, a, b) => {\n  const fy = (L + 16) / 116;\n  const fx = a / 500 + fy;\n  const fz = fy - b / 200;\n  const xRef = 95.047;\n  const yRef = 100.0;\n  const zRef = 108.883;\n  const fx3 = Math.pow(fx, 3);\n  const fy3 = Math.pow(fy, 3);\n  const fz3 = Math.pow(fz, 3);\n  const x = xRef * (fx3 > 0.008856 ? fx3 : (fx - 16/116) / 7.787);\n  const y = yRef * (fy3 > 0.008856 ? fy3 : (fy - 16/116) / 7.787);\n  const z = zRef * (fz3 > 0.008856 ? fz3 : (fz - 16/116) / 7.787);\n  let r = (x * 0.032406 + y * -0.015372 + z * -0.004986) / 100;\n  let g = (x * -0.009689 + y * 0.018758 + z * 0.000415) / 100;\n  let b_val = (x * 0.000557 + y * -0.002040 + z * 0.010570) / 100;\n  r = r > 0.0031308 ? 1.055 * Math.pow(r, 1/2.4) - 0.055 : 12.92 * r;\n  g = g > 0.0031308 ? 1.055 * Math.pow(g, 1/2.4) - 0.055 : 12.92 * g;\n  b_val = b_val > 0.0031308 ? 1.055 * Math.pow(b_val, 1/2.4) - 0.055 : 12.92 * b_val;\n  r = Math.max(0, Math.min(1, r));\n  g = Math.max(0, Math.min(1, g));\n  b_val = Math.max(0, Math.min(1, b_val));\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b_val * 255)];\n};"
            },
            "RGB to CMYK Converter": {
                "uuid": "fdf29a45-e158-4ab4-a1da-70bbeb074191",
                "name": "RGB to CMYK Converter",
                "method": "Static",
                "desc": "Converts RGB (Red, Green, Blue) color values to CMYK (Cyan, Magenta, Yellow, Key/Black) format.",
                "type": "Color Conversion",
                "example": [
                    "const red = 255; const green = 0; const blue = 0; const cmykColor = Q.RGB2CMYK(red, green, blue); console.log(`C: ${(cmykColor[0] * 100).toFixed(0)}%, M: ${(cmykColor[1] * 100).toFixed(0)}%, Y: ${(cmykColor[2] * 100).toFixed(0)}%, K: ${(cmykColor[3] * 100).toFixed(0)}%`);",
                    "const color1 = Q.RGB2CMYK(200, 50, 50); const color2 = Q.RGB2CMYK(50, 50, 200); const inkUsage1 = color1[0] + color1[1] + color1[2] + color1[3]; const inkUsage2 = color2[0] + color2[1] + color2[2] + color2[3]; console.log(`Color 1 ink usage: ${(inkUsage1 * 100).toFixed(1)}%`); console.log(`Color 2 ink usage: ${(inkUsage2 * 100).toFixed(1)}%`);"
                ],
                "dependencies": [],
                "script": "Q.RGB2CMYK = (r, g, b) => {\n  r = r / 255;\n  g = g / 255;\n  b = b / 255;\n  const k = 1 - Math.max(r, g, b);\n  if (k === 1) return [0, 0, 0, 1];\n  const c = (1 - r - k) / (1 - k);\n  const m = (1 - g - k) / (1 - k);\n  const y = (1 - b - k) / (1 - k);\n  return [c, m, y, k];\n};"
            },
            "RGB to HSL Converter": {
                "uuid": "c2f81734-3ecb-437e-a5d7-851fd01a6d94",
                "name": "RGB to HSL Converter",
                "method": "Static",
                "desc": "Converts RGB (Red, Green, Blue) color values to HSL (Hue, Saturation, Lightness) format.",
                "type": "Color Conversion",
                "example": [
                    "const red = 255; const green = 0; const blue = 0; const hslColor = Q.RGB2HSL(red, green, blue); console.log(`Hue: ${hslColor[0].toFixed(2)}, Saturation: ${hslColor[1].toFixed(2)}, Lightness: ${hslColor[2].toFixed(2)}`);",
                    "let baseRed = 64; let baseGreen = 128; let baseBlue = 255; let hsl = Q.RGB2HSL(baseRed, baseGreen, baseBlue); let lighterHSL = [hsl[0], hsl[1], Math.min(1, hsl[2] + 0.2)];",
                    "var rgb = {r: 142, g: 68, b: 173}; var hsl = Q.RGB2HSL(rgb.r, rgb.g, rgb.b); var adjustedHue = (hsl[0] + 0.5) % 1; var complementaryHsl = [adjustedHue, hsl[1], hsl[2]];"
                ],
                "dependencies": [],
                "script": "Q.RGB2HSL = (r, g, b) => {\n    r /= 255, g /= 255, b /= 255;\n    const max = Math.max(r, g, b), min = Math.min(r, g, b);\n    let h, s, l = (max + min) / 2, d = max - min;\n    if (!d) h = s = 0;\n    else {\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      h = max === r ? (g - b) / d + (g < b ? 6 : 0)\n        : max === g ? (b - r) / d + 2\n        : (r - g) / d + 4;\n      h /= 6;\n    }\n    return [h, s, l];\n  };"
            },
            "RGB to LAB Converter": {
                "uuid": "7de74001-73e1-45c1-808d-22ffce7de617",
                "name": "RGB to LAB Converter",
                "method": "Static",
                "desc": "Converts RGB (Red, Green, Blue) color values to LAB (Lightness, a*, b*) color space format.",
                "type": "Color Conversion",
                "example": [
                    "const red = 255; const green = 0; const blue = 0; const labColor = Q.RGB2LAB(red, green, blue); console.log(`L: ${labColor[0].toFixed(2)}, a*: ${labColor[1].toFixed(2)}, b*: ${labColor[2].toFixed(2)}`);",
                    "const color1 = Q.RGB2LAB(255, 100, 50); const color2 = Q.RGB2LAB(200, 150, 100); const distance = Math.sqrt(Math.pow(color2[0] - color1[0], 2) + Math.pow(color2[1] - color1[1], 2) + Math.pow(color2[2] - color1[2], 2)); console.log(`Perceptual color distance: ${distance.toFixed(2)}`);"
                ],
                "dependencies": [],
                "script": "Q.RGB2LAB = (r, g, b) => {\n  r /= 255;\n  g /= 255;\n  b /= 255;\n  r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n  g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n  b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n  const x = (r * 0.4124 + g * 0.3576 + b * 0.1805) * 100;\n  const y = (r * 0.2126 + g * 0.7152 + b * 0.0722) * 100;\n  const z = (r * 0.0193 + g * 0.1192 + b * 0.9505) * 100;\n  const xRef = 95.047;\n  const yRef = 100.0;\n  const zRef = 108.883;\n  const xNorm = x / xRef;\n  const yNorm = y / yRef;\n  const zNorm = z / zRef;\n  const fx = xNorm > 0.008856 ? Math.pow(xNorm, 1/3) : (7.787 * xNorm) + (16/116);\n  const fy = yNorm > 0.008856 ? Math.pow(yNorm, 1/3) : (7.787 * yNorm) + (16/116);\n  const fz = zNorm > 0.008856 ? Math.pow(zNorm, 1/3) : (7.787 * zNorm) + (16/116);\n  const L = (116 * fy) - 16;\n  const a = 500 * (fx - fy);\n  const b_val = 200 * (fy - fz);\n  return [L, a, b_val];\n};"
            }
        }
    }
};
function Highlight(code) {
    // Escape HTML
    const escapeHTML = str => str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    // Szintaktikus formzs: j sor ;, =>, {, } utn, s behzs
    // 1. j sor karakterek beszrsa
    code = code
        .replace(/;(?=(?![\r\n]))/g, ';\n')
        .replace(/=>\s*/g, '=>\n')
        .replace(/{/g, '{\n')
        .replace(/}/g, '}\n');

    // 2. Behzs (egyszer, nem tkletes, de mkdik)
    let indent = 0;
    code = code.split('\n').map(line => {
        let trimmed = line.trim();
        if (trimmed.endsWith('}')) indent--;
        let result = '    '.repeat(Math.max(indent, 0)) + trimmed;
        if (trimmed.endsWith('{')) indent++;
        return result;
    }).join('\n');

    // Escape HTML (csak most!)
    code = escapeHTML(code);

    // Patterns in order: multiline comment, singleline comment, string, number, keyword, class, method, bracket, etc.
    const patterns = [
        // Multiline comments
        {
            regex: /\/\*[\s\S]*?\*\//g,
            className: "comment"
        },
        // Single-line comments (javtva: csak sor vgig tart)
        {
            regex: /\/\/[^\n\r]*/g,
            className: "comment"
        },
        // Template strings (backticks)
        {
            regex: /`(?:\\[\s\S]|[^\\`])*`/g,
            className: "string"
        },
        // Double-quoted strings
        {
            regex: /"(?:\\.|[^"\\])*"/g,
            className: "string"
        },
        // Single-quoted strings
        {
            regex: /'(?:\\.|[^'\\])*'/g,
            className: "string"
        },
        // Numbers (integer, float, hex, binary, octal)
        {
            regex: /\b(0[xX][\da-fA-F]+|0[bB][01]+|0[oO][0-7]+|\d+(\.\d+)?([eE][+-]?\d+)?)\b/g,
            className: "number"
        },
        // Keywords (JS reserved words)
        {
            regex: /\b(?:function|return|if|else|for|while|const|let|var|new|typeof|instanceof|switch|case|break|continue|do|try|catch|finally|throw|class|extends|super|import|from|export|default|await|async|in|of|this|null|undefined|true|false)\b/g,
            className: "keyword"
        },
        // Class names (simple heuristic: PascalCase identifiers)
        {
            regex: /\b[A-Z][A-Za-z0-9_]*\b/g,
            className: "class"
        },
        // Methods (common JS DOM/jQuery methods)
        {
            regex: /\b(?:addClass|after|animate|append|attr|before|bind|blur|children|click|clone|closest|css|data|detach|each|empty|eq|fadeIn|fadeOut|fadeTo|fadeToggle|find|first|focus|hasClass|height|hide|html|id|index|inside|is|isExists|last|map|next|off|offset|on|parent|position|prepend|prev|prop|remove|removeAttr|removeClass|removeData|removeProp|removeTransition|scrollHeight|scrollLeft|scrollTop|scrollWidth|show|siblings|size|text|toggle|toggleClass|trigger|unwrap|val|wait|walk|width|wrap|wrapAll|zIndex)\b/g,
            className: "method"
        },
        // Brackets
        {
            regex: /[()[\]{}]/g,
            className: "bracket"
        }
        // NINCS operator!
    ];

    // To avoid nested spans, replace matches with unique tokens, then replace tokens with spans
    let tokenId = 0;
    const tokens = {};
    patterns.forEach(({ regex, className }) => {
        code = code.replace(regex, match => {
            const key = `__HLTOKEN${tokenId++}__`;
            tokens[key] = `<span class="hl ${className}">${match}</span>`;
            return key;
        });
    });

    // Replace tokens with their span-wrapped content
    code = code.replace(/__HLTOKEN\d+__/g, m => tokens[m]);

    // <pre><code> blokkba csomagols
    return `<pre><code class="hljs">${code}</code></pre>`;
}

const IDS = {};

function CodeBuilder() {
    const activeBlocks = document.querySelectorAll(".block.active");


    const applyScript = (script) => {
        const sizedata = document.querySelector(".sizedata");
        let BaseScript = JSON.parse(JSON.stringify(DATA.base));
        BaseScript = BaseScript.replace("return Q;", script + "\nreturn Q;");
        let codeBlock = document.querySelector(".codeData");
        codeBlock.innerHTML = minify(BaseScript);
        sizedata.innerHTML = "Library size: " + CalculateSizeKB(BaseScript);
    }




    if (!activeBlocks.length) {
        applyScript("");
        return;
    }

    const script = Array.from(activeBlocks)
        .map(block => {
            let blockScript = "";
            // Traverse the IDS structure to find the matching script
            for (const name in IDS) {
                const blockData = IDS[name];
                if (blockData.uuid == block.id) {
                    blockScript = blockData.script || "";
                    break;
                }
            }
            return blockScript;
        })
        .join("");

    applyScript(script);

    // console.log(script);
}


function classFormat(text) {
    return text.toLowerCase().replace(/ /g, "_").replace(/[^a-z0-9_]/g, "");
}

function minify(code) {
    return code.replace(/^\s*/gm, "").replace(/\n/g, "");
}

function CalculateSizeKB(code) {
    return (new Blob([code]).size / 1024).toFixed(2) + " KB";
}

function createTags(tags) {
    const tagsContainer = document.createElement("div");
    tagsContainer.className = "tags";
    // Ensure tags is always an array
    if (!Array.isArray(tags)) {
        tags = typeof tags === "undefined" || tags === null ? [] : [String(tags)];
    }
    tags.forEach(tag => {
        const tagElement = document.createElement("span");
        tagElement.className = "tag";
        tagElement.innerHTML = tag;
        tagsContainer.appendChild(tagElement);
    });
    return tagsContainer;
}

function createCodeCategory(title) {
    const categoryContainer = document.createElement("div");
    categoryContainer.className = "code_category";
    categoryContainer.innerHTML = `<h2 class='code_category_title'>${title}</h2>`;
    const categoryContent = document.createElement("div");
    categoryContent.className = "code_content";
    categoryContent.id = classFormat(title);
    categoryContainer.appendChild(categoryContent);
    return categoryContainer;
}

function createBlock(contentData) {
    const { uuid, name, method, desc, example, dependencies } = contentData;
    const block = document.createElement("div");
    block.className = "block";
    block.id = uuid;
    block.innerHTML = `<h2>${name}</h2><div class="block_method">${method || ""}</div>`;

    const blockContent = document.createElement("div");
    blockContent.className = "block_content";
    block.appendChild(blockContent);

    blockContent.innerHTML = `<p>${desc}</p>`;

    // Handle example: can be string, array, or object
    if (typeof example === "object" && example !== null && !Array.isArray(example)) {
        // If example is an object, create a block_example for each key
        Object.entries(example).forEach(([key, value]) => {
            const blockExample = document.createElement("div");
            blockExample.className = "block_example";
            blockExample.innerHTML = `<b>${key}:</b>` +
                (Array.isArray(value)
                    ? value.map(ex =>
                        typeof ex === "string"
                            ? Highlight(ex)
                            : typeof ex === "object" && ex !== null
                                ? Highlight(JSON.stringify(ex, null, 2))
                                : Highlight(String(ex))
                    ).join("")
                    : (typeof value === "string"
                        ? Highlight(value)
                        : typeof value === "object" && value !== null
                            ? Highlight(JSON.stringify(value, null, 2))
                            : Highlight(String(value))
                    )
                );
            blockContent.appendChild(blockExample);
        });
    } else if (Array.isArray(example)) {
        // If example is an array, create a single block_example
        const blockExample = document.createElement("div");
        blockExample.className = "block_example";
        blockExample.innerHTML = example.map(ex =>
            typeof ex === "string"
                ? Highlight(ex)
                : typeof ex === "object" && ex !== null
                    ? Highlight(JSON.stringify(ex, null, 2))
                    : Highlight(String(ex))
        ).join("");
        blockContent.appendChild(blockExample);
    } else {
        // Otherwise, treat as string or fallback
        const blockExample = document.createElement("div");
        blockExample.className = "block_example";
        blockExample.innerHTML = (typeof example === "string"
            ? Highlight(example)
            : typeof example === "object" && example !== null
                ? Highlight(JSON.stringify(example, null, 2))
                : Highlight(String(example))
        );
        blockContent.appendChild(blockExample);
    }

    if (dependencies.length > 0) {
        const blockDependencies = document.createElement("div");
        blockDependencies.className = "block_dependencies";
        blockDependencies.innerHTML = "<b>Dependencies</b>";
        blockDependencies.appendChild(createTags(dependencies));
        blockContent.appendChild(blockDependencies);
    }

    block.addEventListener("click", function (event) {
        if (event.currentTarget.contains(event.target)) {
            block.classList.toggle("active");
            if (block.classList.contains("active")) {
                dependencies.forEach(dep => {
                    const depBlock = document.getElementById(IDS[dep]?.uuid);
                    if (depBlock && !depBlock.classList.contains("active")) {
                        depBlock.click();
                    }
                });
            }
            CodeBuilder();
        }
    });

    return block;
}

function createTab(name, identifier, contentData) {
    const tabHeader = document.querySelector(".tab_header");
    const tabContainer = document.querySelector(".tab_container");

    const tab = document.createElement("div");
    tab.className = "tab";
    tab.innerHTML = name;
    tab.setAttribute("data-identifier", identifier);

    const tabContent = document.createElement("div");
    tabContent.className = "tab_content";
    tabContent.setAttribute("data-identifier", identifier);

    const types = [...new Set(contentData.map(c => c.type))];
    types.forEach(type => tabContent.appendChild(createCodeCategory(type)));
    contentData.forEach(content => {
        tabContent.querySelector(`#${classFormat(content.type)}`).appendChild(createBlock(content));
    });

    tab.addEventListener("click", function () {
        document.querySelectorAll(".tab, .tab_content").forEach(el => el.classList.remove("active"));
        tab.classList.add("active");
        tabContent.classList.add("active");
    });

    tabHeader.appendChild(tab);
    tabContainer.appendChild(tabContent);

    return tab;
}

function createTabs() {
    const methods = new Set();
    let pos = 0;
    // Use DATA.scripts instead of DATA
    Object.values(DATA.scripts).forEach(category => {
        // we must get the key of the object
        let categoryName = Object.keys(DATA.scripts)[pos];
        pos++;

        if (typeof category === 'object') {
            const contentData = [];
            Object.values(category).forEach(({ method, uuid, desc, type, example, dependencies, script }) => {
                if (!methods.has(categoryName)) {
                    methods.add(categoryName);
                    Object.values(category).forEach(block => {
                        contentData.push({ ...block });
                        if (block.dependencies === undefined) {
                            block.dependencies = [];
                        }
                        IDS[block.name] = { uuid: block.uuid, script: block.script, dependencies: block.dependencies };
                    });
                    createTab(categoryName, categoryName, contentData);
                }
            });
        }
    });

    //choose .download button
    const downloadButton = document.querySelector(".download");
    const codeBlock = document.querySelector(".codeData");

    //add event listener to download button
    downloadButton.addEventListener("click", () => {
        const code = codeBlock.innerText;
        const blob = new Blob([code], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "vulpiniq.js";
        a.click();
        URL.revokeObjectURL(url);
    });


}

document.addEventListener("DOMContentLoaded", createTabs);
</script>
</head>
<body>
    <div class="container">
<div class="left_side">
<div class="header">
    <h1>VulpiniQ</h1>
    <p>Build your own VulpiniQ Library</p>
    </div>
<textarea class="codeData" placeholder="Enter your code here"></textarea>
<div class="footer">
    <div class="sizedata">No code recently</div>
    <button class="btn download">Download</button>
</div>
</div>
<div class="right_side">
    <div class="tab_header">
    </div>
    <div class="tab_container">
    </div>
</div>
    </div>
    <!-- <div class="generated">
        <h2>Your personalised VulpiniQ</h2>
        <div class="gen_code_size" readonly></div>
        <textarea class="gen_code" readonly></textarea>
    </div>
    <div class="generated">
        <h2>Minified version</h2>
        <div class="minified_size" readonly></div>
        <textarea class="gen_code minified" readonly></textarea>
    </div> -->
</body>
</html>